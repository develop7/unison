<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ApplicativeDo #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- Name shadowing is really helpful for writing some custom traversals</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-name-shadowing #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Unison.Sync.Types</span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Misc. types</span></span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier">Base64Bytes</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier">RepoInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier">Path</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#pathRepoInfo"><span class="hs-identifier">pathRepoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#pathCodebasePath"><span class="hs-identifier">pathCodebasePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Entity types</span></span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier">Entity</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier">TermComponent</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier">DeclComponent</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier">PatchDiff</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier">Namespace</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier">NamespaceDiff</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier">Causal</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier">LocalIds</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#entityDependencies"><span class="hs-identifier">entityDependencies</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier">EntityType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><span class="hs-comment">-- *** Entity Traversals</span></span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#entityHashes_"><span class="hs-identifier">entityHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#patchOldHashes_"><span class="hs-identifier">patchOldHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#patchNewHashes_"><span class="hs-identifier">patchNewHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#patchDiffHashes_"><span class="hs-identifier">patchDiffHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#namespaceDiffHashes_"><span class="hs-identifier">namespaceDiffHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#causalHashes_"><span class="hs-identifier">causalHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Request/response types</span></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Get causal hash by path</span></span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier">GetCausalHashByPathRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathResponse"><span class="hs-identifier">GetCausalHashByPathResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Download entities</span></span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier">DownloadEntitiesRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesResponse"><span class="hs-identifier">DownloadEntitiesResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesError"><span class="hs-identifier">DownloadEntitiesError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Upload entities</span></span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier">UploadEntitiesRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesResponse"><span class="hs-identifier">UploadEntitiesResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError"><span class="hs-identifier">UploadEntitiesError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Common/shared error types</span></span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier">HashMismatchForEntity</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier">InvalidParentage</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier">NeedDependencies</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#EntityValidationError"><span class="hs-identifier">EntityValidationError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">where</span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">both</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">traverseOf</span></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.Types</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifoldable</span></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bitraversable</span></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteArray.Encoding</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Base</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Base64</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">convertFromBase</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">convertToBase</span></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(:|)</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NEMap</span></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NESet</span></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">U.Codebase.Sqlite.Branch.Format</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">LocalBranchBytes</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Hash32</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Hash32.Orphans.Aeson</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Prelude</span></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Share.API.Hash</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HashJWT</span></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Util.Set</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-80"></span><span class="hs-comment">-- Misc. types</span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="annot"><span class="hs-comment">-- | A newtype for JSON encoding binary data.</span></span><span>
</span><span id="line-83"></span><span class="hs-keyword">newtype</span><span> </span><span id="Base64Bytes"><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Base64Bytes"><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679388339"><span id="local-6989586621679388343"><span id="local-6989586621679388346"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-86"></span><span>  </span><span id="local-6989586621679388353"><span class="annot"><span class="annottext">toJSON :: Base64Bytes -&gt; Value
</span><a href="#local-6989586621679388353"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679388355"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679388355"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value) -&gt; (ByteString -&gt; Text) -&gt; ByteString -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">Text.decodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Value) -&gt; ByteString -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Base -&gt; ByteString -&gt; ByteString
forall bin bout.
(ByteArrayAccess bin, ByteArray bout) =&gt;
Base -&gt; bin -&gt; bout
</span><span class="hs-identifier hs-var">convertToBase</span></span><span> </span><span class="annot"><span class="annottext">Base
</span><span class="hs-identifier hs-var">Base64</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679388355"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679388361"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-89"></span><span>  </span><span id="local-6989586621679388371"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser Base64Bytes
</span><a href="#local-6989586621679388371"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser Base64Bytes) -&gt; Value -&gt; Parser Base64Bytes
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Base64&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679388374"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679388374"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-90"></span><span>    </span><span class="annot"><span class="annottext">(String -&gt; Parser Base64Bytes)
-&gt; (ByteString -&gt; Parser Base64Bytes)
-&gt; Either String ByteString
-&gt; Parser Base64Bytes
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser Base64Bytes
forall a. String -&gt; Parser a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Base64Bytes -&gt; Parser Base64Bytes
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Base64Bytes -&gt; Parser Base64Bytes)
-&gt; (ByteString -&gt; Base64Bytes) -&gt; ByteString -&gt; Parser Base64Bytes
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either String ByteString -&gt; Parser Base64Bytes)
-&gt; Either String ByteString -&gt; Parser Base64Bytes
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Base -&gt; ByteString -&gt; Either String ByteString
forall bin bout.
(ByteArrayAccess bin, ByteArray bout) =&gt;
Base -&gt; bin -&gt; Either String bout
</span><span class="hs-identifier hs-var">convertFromBase</span></span><span> </span><span class="annot"><span class="annottext">Base
</span><span class="hs-identifier hs-var">Base64</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">Text.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679388374"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-keyword">newtype</span><span> </span><span id="RepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AunRepoInfo%3ARepoInfo"><span class="annot"><span class="annottext">RepoInfo -&gt; Text
</span><a href="Unison.Sync.Types.html#%24sel%3AunRepoInfo%3ARepoInfo"><span class="hs-identifier hs-var hs-var">unRepoInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">}</span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679388380"><span id="local-6989586621679388385"><span id="local-6989586621679388389"><span class="annot"><span class="annottext">Int -&gt; RepoInfo -&gt; ShowS
[RepoInfo] -&gt; ShowS
RepoInfo -&gt; String
(Int -&gt; RepoInfo -&gt; ShowS)
-&gt; (RepoInfo -&gt; String) -&gt; ([RepoInfo] -&gt; ShowS) -&gt; Show RepoInfo
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; RepoInfo -&gt; ShowS
showsPrec :: Int -&gt; RepoInfo -&gt; ShowS
$cshow :: RepoInfo -&gt; String
show :: RepoInfo -&gt; String
$cshowList :: [RepoInfo] -&gt; ShowS
showList :: [RepoInfo] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388395"><span id="local-6989586621679388400"><span class="annot"><span class="annottext">RepoInfo -&gt; RepoInfo -&gt; Bool
(RepoInfo -&gt; RepoInfo -&gt; Bool)
-&gt; (RepoInfo -&gt; RepoInfo -&gt; Bool) -&gt; Eq RepoInfo
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: RepoInfo -&gt; RepoInfo -&gt; Bool
== :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c/= :: RepoInfo -&gt; RepoInfo -&gt; Bool
/= :: RepoInfo -&gt; RepoInfo -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388408"><span id="local-6989586621679388413"><span id="local-6989586621679388417"><span id="local-6989586621679388421"><span id="local-6989586621679388425"><span id="local-6989586621679388429"><span id="local-6989586621679388433"><span class="annot"><span class="annottext">Eq RepoInfo
Eq RepoInfo =&gt;
(RepoInfo -&gt; RepoInfo -&gt; Ordering)
-&gt; (RepoInfo -&gt; RepoInfo -&gt; Bool)
-&gt; (RepoInfo -&gt; RepoInfo -&gt; Bool)
-&gt; (RepoInfo -&gt; RepoInfo -&gt; Bool)
-&gt; (RepoInfo -&gt; RepoInfo -&gt; Bool)
-&gt; (RepoInfo -&gt; RepoInfo -&gt; RepoInfo)
-&gt; (RepoInfo -&gt; RepoInfo -&gt; RepoInfo)
-&gt; Ord RepoInfo
RepoInfo -&gt; RepoInfo -&gt; Bool
RepoInfo -&gt; RepoInfo -&gt; Ordering
RepoInfo -&gt; RepoInfo -&gt; RepoInfo
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: RepoInfo -&gt; RepoInfo -&gt; Ordering
compare :: RepoInfo -&gt; RepoInfo -&gt; Ordering
$c&lt; :: RepoInfo -&gt; RepoInfo -&gt; Bool
&lt; :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c&lt;= :: RepoInfo -&gt; RepoInfo -&gt; Bool
&lt;= :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c&gt; :: RepoInfo -&gt; RepoInfo -&gt; Bool
&gt; :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c&gt;= :: RepoInfo -&gt; RepoInfo -&gt; Bool
&gt;= :: RepoInfo -&gt; RepoInfo -&gt; Bool
$cmax :: RepoInfo -&gt; RepoInfo -&gt; RepoInfo
max :: RepoInfo -&gt; RepoInfo -&gt; RepoInfo
$cmin :: RepoInfo -&gt; RepoInfo -&gt; RepoInfo
min :: RepoInfo -&gt; RepoInfo -&gt; RepoInfo
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388439"><span id="local-6989586621679388444"><span id="local-6989586621679388448"><span id="local-6989586621679388452"><span class="annot"><span class="annottext">[RepoInfo] -&gt; Value
[RepoInfo] -&gt; Encoding
RepoInfo -&gt; Value
RepoInfo -&gt; Encoding
(RepoInfo -&gt; Value)
-&gt; (RepoInfo -&gt; Encoding)
-&gt; ([RepoInfo] -&gt; Value)
-&gt; ([RepoInfo] -&gt; Encoding)
-&gt; ToJSON RepoInfo
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
$ctoJSON :: RepoInfo -&gt; Value
toJSON :: RepoInfo -&gt; Value
$ctoEncoding :: RepoInfo -&gt; Encoding
toEncoding :: RepoInfo -&gt; Encoding
$ctoJSONList :: [RepoInfo] -&gt; Value
toJSONList :: [RepoInfo] -&gt; Value
$ctoEncodingList :: [RepoInfo] -&gt; Encoding
toEncodingList :: [RepoInfo] -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388457"><span id="local-6989586621679388462"><span class="annot"><span class="annottext">Value -&gt; Parser [RepoInfo]
Value -&gt; Parser RepoInfo
(Value -&gt; Parser RepoInfo)
-&gt; (Value -&gt; Parser [RepoInfo]) -&gt; FromJSON RepoInfo
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
$cparseJSON :: Value -&gt; Parser RepoInfo
parseJSON :: Value -&gt; Parser RepoInfo
$cparseJSONList :: Value -&gt; Parser [RepoInfo]
parseJSONList :: Value -&gt; Parser [RepoInfo]
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-keyword">data</span><span> </span><span id="Path"><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-var">Path</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Path"><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-var">Path</span></a></span></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- This is a nonempty list, where we require the first segment to be the repo name / user name / whatever,</span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-comment">-- which we need on the server side as an implementation detail of how we're representing different users' codebases.</span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-comment">-- This could be relaxed in some other share implementation that allows access to the &quot;root&quot; of the shared codebase.</span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-comment">-- Our share implementation doesn't have a root, just a collection of sub-roots, one per user or (eventually) organization.</span><span>
</span><span id="line-101"></span><span>    </span><span id="%24sel%3ApathSegments%3APath"><span class="annot"><span class="annottext">Path -&gt; NonEmpty Text
</span><a href="Unison.Sync.Types.html#%24sel%3ApathSegments%3APath"><span class="hs-identifier hs-var hs-var">pathSegments</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679388469"><span id="local-6989586621679388476"><span id="local-6989586621679388480"><span class="annot"><span class="annottext">Int -&gt; Path -&gt; ShowS
[Path] -&gt; ShowS
Path -&gt; String
(Int -&gt; Path -&gt; ShowS)
-&gt; (Path -&gt; String) -&gt; ([Path] -&gt; ShowS) -&gt; Show Path
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Path -&gt; ShowS
showsPrec :: Int -&gt; Path -&gt; ShowS
$cshow :: Path -&gt; String
show :: Path -&gt; String
$cshowList :: [Path] -&gt; ShowS
showList :: [Path] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388483"><span id="local-6989586621679388488"><span class="annot"><span class="annottext">Path -&gt; Path -&gt; Bool
(Path -&gt; Path -&gt; Bool) -&gt; (Path -&gt; Path -&gt; Bool) -&gt; Eq Path
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Path -&gt; Path -&gt; Bool
== :: Path -&gt; Path -&gt; Bool
$c/= :: Path -&gt; Path -&gt; Bool
/= :: Path -&gt; Path -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388494"><span id="local-6989586621679388499"><span id="local-6989586621679388503"><span id="local-6989586621679388507"><span id="local-6989586621679388510"><span id="local-6989586621679388513"><span id="local-6989586621679388516"><span class="annot"><span class="annottext">Eq Path
Eq Path =&gt;
(Path -&gt; Path -&gt; Ordering)
-&gt; (Path -&gt; Path -&gt; Bool)
-&gt; (Path -&gt; Path -&gt; Bool)
-&gt; (Path -&gt; Path -&gt; Bool)
-&gt; (Path -&gt; Path -&gt; Bool)
-&gt; (Path -&gt; Path -&gt; Path)
-&gt; (Path -&gt; Path -&gt; Path)
-&gt; Ord Path
Path -&gt; Path -&gt; Bool
Path -&gt; Path -&gt; Ordering
Path -&gt; Path -&gt; Path
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: Path -&gt; Path -&gt; Ordering
compare :: Path -&gt; Path -&gt; Ordering
$c&lt; :: Path -&gt; Path -&gt; Bool
&lt; :: Path -&gt; Path -&gt; Bool
$c&lt;= :: Path -&gt; Path -&gt; Bool
&lt;= :: Path -&gt; Path -&gt; Bool
$c&gt; :: Path -&gt; Path -&gt; Bool
&gt; :: Path -&gt; Path -&gt; Bool
$c&gt;= :: Path -&gt; Path -&gt; Bool
&gt;= :: Path -&gt; Path -&gt; Bool
$cmax :: Path -&gt; Path -&gt; Path
max :: Path -&gt; Path -&gt; Path
$cmin :: Path -&gt; Path -&gt; Path
min :: Path -&gt; Path -&gt; Path
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="annot"><span class="hs-comment">-- | Convert a path like arya.public.mystuff to a &quot;repo info&quot; by treating the first segment as a user handle.</span></span><span>
</span><span id="line-106"></span><span class="annot"><a href="Unison.Sync.Types.html#pathRepoInfo"><span class="hs-identifier hs-type">pathRepoInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-107"></span><span id="pathRepoInfo"><span class="annot"><span class="annottext">pathRepoInfo :: Path -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#pathRepoInfo"><span class="hs-identifier hs-var hs-var">pathRepoInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679388518"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679388518"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">Text.cons</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'@'</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679388518"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="annot"><a href="Unison.Sync.Types.html#pathCodebasePath"><span class="hs-identifier hs-type">pathCodebasePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-110"></span><span id="pathCodebasePath"><span class="annot"><span class="annottext">pathCodebasePath :: Path -&gt; [Text]
</span><a href="Unison.Sync.Types.html#pathCodebasePath"><span class="hs-identifier hs-var hs-var">pathCodebasePath</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span id="local-6989586621679388520"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679388520"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679388520"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679388523"><span id="local-6989586621679388527"><span id="local-6989586621679388530"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-113"></span><span>  </span><span id="local-6989586621679388541"><span class="annot"><span class="annottext">toJSON :: Path -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span id="local-6989586621679388542"><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679388542"><span class="hs-identifier hs-var">segments</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-114"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-115"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; NonEmpty Text -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679388542"><span class="hs-identifier hs-var">segments</span></a></span><span>
</span><span id="line-116"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679388547"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-119"></span><span>  </span><span id="local-6989586621679388556"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser Path
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Object -&gt; Parser Path) -&gt; Value -&gt; Parser Path
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Path&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679388558"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679388558"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-120"></span><span>    </span><span id="local-6989586621679388559"><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679388559"><span class="hs-identifier hs-var">pathSegments</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679388558"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (NonEmpty Text)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">NonEmpty Text
$sel:pathSegments:Path :: NonEmpty Text
pathSegments :: NonEmpty Text
</span><a href="Unison.Sync.Types.html#%24sel%3ApathSegments%3APath"><span class="hs-glyph hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-124"></span><span class="hs-comment">-- Entity types</span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-keyword">data</span><span> </span><span id="Entity"><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-var">Entity</span></a></span></span><span> </span><span id="local-6989586621679387836"><span class="annot"><a href="#local-6989586621679387836"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679387838"><span class="annot"><a href="#local-6989586621679387838"><span class="hs-identifier hs-type">noSyncHash</span></a></span></span><span> </span><span id="local-6989586621679387837"><span class="annot"><a href="#local-6989586621679387837"><span class="hs-identifier hs-type">hash</span></a></span></span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TC"><span class="annot"><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-var">TC</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387836"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387837"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DC"><span class="annot"><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-var">DC</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387836"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387837"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="P"><span class="annot"><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-var">P</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387836"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387838"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387837"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PD"><span class="annot"><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-var">PD</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387836"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387838"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387837"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="N"><span class="annot"><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-var">N</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387836"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387837"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ND"><span class="annot"><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-var">ND</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387836"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387837"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="C"><span class="annot"><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-var">C</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387837"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679388572"><span id="local-6989586621679388595"><span id="local-6989586621679388599"><span class="annot"><span class="annottext">Int -&gt; Entity text noSyncHash hash -&gt; ShowS
[Entity text noSyncHash hash] -&gt; ShowS
Entity text noSyncHash hash -&gt; String
(Int -&gt; Entity text noSyncHash hash -&gt; ShowS)
-&gt; (Entity text noSyncHash hash -&gt; String)
-&gt; ([Entity text noSyncHash hash] -&gt; ShowS)
-&gt; Show (Entity text noSyncHash hash)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
Int -&gt; Entity text noSyncHash hash -&gt; ShowS
forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
[Entity text noSyncHash hash] -&gt; ShowS
forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
Entity text noSyncHash hash -&gt; String
$cshowsPrec :: forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
Int -&gt; Entity text noSyncHash hash -&gt; ShowS
showsPrec :: Int -&gt; Entity text noSyncHash hash -&gt; ShowS
$cshow :: forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
Entity text noSyncHash hash -&gt; String
show :: Entity text noSyncHash hash -&gt; String
$cshowList :: forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
[Entity text noSyncHash hash] -&gt; ShowS
showList :: [Entity text noSyncHash hash] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388605"><span id="local-6989586621679388621"><span class="annot"><span class="annottext">Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
(Entity text noSyncHash hash
 -&gt; Entity text noSyncHash hash -&gt; Bool)
-&gt; (Entity text noSyncHash hash
    -&gt; Entity text noSyncHash hash -&gt; Bool)
-&gt; Eq (Entity text noSyncHash hash)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text noSyncHash hash.
(Eq text, Eq noSyncHash, Eq hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c== :: forall text noSyncHash hash.
(Eq text, Eq noSyncHash, Eq hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
== :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c/= :: forall text noSyncHash hash.
(Eq text, Eq noSyncHash, Eq hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
/= :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388633"><span id="local-6989586621679388649"><span id="local-6989586621679388653"><span id="local-6989586621679388656"><span id="local-6989586621679388659"><span id="local-6989586621679388662"><span id="local-6989586621679388665"><span class="annot"><span class="annottext">Eq (Entity text noSyncHash hash)
Eq (Entity text noSyncHash hash) =&gt;
(Entity text noSyncHash hash
 -&gt; Entity text noSyncHash hash -&gt; Ordering)
-&gt; (Entity text noSyncHash hash
    -&gt; Entity text noSyncHash hash -&gt; Bool)
-&gt; (Entity text noSyncHash hash
    -&gt; Entity text noSyncHash hash -&gt; Bool)
-&gt; (Entity text noSyncHash hash
    -&gt; Entity text noSyncHash hash -&gt; Bool)
-&gt; (Entity text noSyncHash hash
    -&gt; Entity text noSyncHash hash -&gt; Bool)
-&gt; (Entity text noSyncHash hash
    -&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash)
-&gt; (Entity text noSyncHash hash
    -&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash)
-&gt; Ord (Entity text noSyncHash hash)
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Ordering
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Eq (Entity text noSyncHash hash)
forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Ordering
forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
$ccompare :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Ordering
compare :: Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Ordering
$c&lt; :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
&lt; :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c&lt;= :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
&lt;= :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c&gt; :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
&gt; :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c&gt;= :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
&gt;= :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$cmax :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
max :: Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
$cmin :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
min :: Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679387791"><span id="local-6989586621679387792"><span id="local-6989586621679387793"><span id="local-6989586621679388673"><span id="local-6989586621679388677"><span id="local-6989586621679388680"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387791"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387792"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387793"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387791"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387792"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387793"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-137"></span><span>  </span><span id="local-6989586621679388696"><span class="annot"><span class="annottext">toJSON :: Entity text noSyncHash hash -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-type">TC</span></a></span><span> </span><span id="local-6989586621679388697"><span class="annot"><span class="annottext">TermComponent text hash
</span><a href="#local-6989586621679388697"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; TermComponent text hash -&gt; Value
forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679388698"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span><span> </span><span class="annot"><span class="annottext">TermComponent text hash
</span><a href="#local-6989586621679388697"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-139"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-type">DC</span></a></span><span> </span><span id="local-6989586621679388700"><span class="annot"><span class="annottext">DeclComponent text hash
</span><a href="#local-6989586621679388700"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; DeclComponent text hash -&gt; Value
forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679388698"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span><span> </span><span class="annot"><span class="annottext">DeclComponent text hash
</span><a href="#local-6989586621679388700"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-140"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span id="local-6989586621679388702"><span class="annot"><span class="annottext">Patch text noSyncHash hash
</span><a href="#local-6989586621679388702"><span class="hs-identifier hs-var">patch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Patch text noSyncHash hash -&gt; Value
forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679388698"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span><span> </span><span class="annot"><span class="annottext">Patch text noSyncHash hash
</span><a href="#local-6989586621679388702"><span class="hs-identifier hs-var">patch</span></a></span><span>
</span><span id="line-141"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-type">PD</span></a></span><span> </span><span id="local-6989586621679388704"><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash
</span><a href="#local-6989586621679388704"><span class="hs-identifier hs-var">patch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; PatchDiff text noSyncHash hash -&gt; Value
forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679388698"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span><span> </span><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash
</span><a href="#local-6989586621679388704"><span class="hs-identifier hs-var">patch</span></a></span><span>
</span><span id="line-142"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-type">N</span></a></span><span> </span><span id="local-6989586621679388706"><span class="annot"><span class="annottext">Namespace text hash
</span><a href="#local-6989586621679388706"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Namespace text hash -&gt; Value
forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679388698"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span><span> </span><span class="annot"><span class="annottext">Namespace text hash
</span><a href="#local-6989586621679388706"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-143"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-type">ND</span></a></span><span> </span><span id="local-6989586621679388708"><span class="annot"><span class="annottext">NamespaceDiff text hash
</span><a href="#local-6989586621679388708"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; NamespaceDiff text hash -&gt; Value
forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679388698"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span><span> </span><span class="annot"><span class="annottext">NamespaceDiff text hash
</span><a href="#local-6989586621679388708"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-144"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-type">C</span></a></span><span> </span><span id="local-6989586621679388710"><span class="annot"><span class="annottext">Causal hash
</span><a href="#local-6989586621679388710"><span class="hs-identifier hs-var">causal</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Causal hash -&gt; Value
forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679388698"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span><span> </span><span class="annot"><span class="annottext">Causal hash
</span><a href="#local-6989586621679388710"><span class="hs-identifier hs-var">causal</span></a></span><span>
</span><span id="line-145"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-146"></span><span>      </span><span id="local-6989586621679387810"><span class="annot"><a href="#local-6989586621679388698"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387810"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-type">EntityType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387810"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span></span><span>
</span><span id="line-147"></span><span>      </span><span id="local-6989586621679388698"><span class="annot"><span class="annottext">go :: forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679388698"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679388722"><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679388722"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span id="local-6989586621679388723"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679388723"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; EntityType -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679388722"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; a -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679388723"><span class="hs-identifier hs-var">obj</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679387815"><span id="local-6989586621679387816"><span id="local-6989586621679387817"><span id="local-6989586621679388730"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387815"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387816"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387817"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679387817"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387815"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387816"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387817"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-150"></span><span>  </span><span id="local-6989586621679388766"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Entity text noSyncHash hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (Entity text noSyncHash hash))
-&gt; Value
-&gt; Parser (Entity text noSyncHash hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Entity&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679388767"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679388767"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679388767"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser EntityType
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser EntityType
-&gt; (EntityType -&gt; Parser (Entity text noSyncHash hash))
-&gt; Parser (Entity text noSyncHash hash)
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-152"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermComponent text hash -&gt; Entity text noSyncHash hash
forall text noSyncHash hash.
TermComponent text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-var">TC</span></a></span><span> </span><span class="annot"><span class="annottext">(TermComponent text hash -&gt; Entity text noSyncHash hash)
-&gt; Parser (TermComponent text hash)
-&gt; Parser (Entity text noSyncHash hash)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679388767"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (TermComponent text hash)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-153"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DeclComponent text hash -&gt; Entity text noSyncHash hash
forall text noSyncHash hash.
DeclComponent text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-var">DC</span></a></span><span> </span><span class="annot"><span class="annottext">(DeclComponent text hash -&gt; Entity text noSyncHash hash)
-&gt; Parser (DeclComponent text hash)
-&gt; Parser (Entity text noSyncHash hash)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679388767"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (DeclComponent text hash)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-154"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Patch text noSyncHash hash -&gt; Entity text noSyncHash hash
forall text noSyncHash hash.
Patch text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-var">P</span></a></span><span> </span><span class="annot"><span class="annottext">(Patch text noSyncHash hash -&gt; Entity text noSyncHash hash)
-&gt; Parser (Patch text noSyncHash hash)
-&gt; Parser (Entity text noSyncHash hash)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679388767"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (Patch text noSyncHash hash)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-155"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash -&gt; Entity text noSyncHash hash
forall text noSyncHash hash.
PatchDiff text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-var">PD</span></a></span><span> </span><span class="annot"><span class="annottext">(PatchDiff text noSyncHash hash -&gt; Entity text noSyncHash hash)
-&gt; Parser (PatchDiff text noSyncHash hash)
-&gt; Parser (Entity text noSyncHash hash)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679388767"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (PatchDiff text noSyncHash hash)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-156"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Namespace text hash -&gt; Entity text noSyncHash hash
forall text noSyncHash hash.
Namespace text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-var">N</span></a></span><span> </span><span class="annot"><span class="annottext">(Namespace text hash -&gt; Entity text noSyncHash hash)
-&gt; Parser (Namespace text hash)
-&gt; Parser (Entity text noSyncHash hash)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679388767"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (Namespace text hash)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-157"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamespaceDiff text hash -&gt; Entity text noSyncHash hash
forall text noSyncHash hash.
NamespaceDiff text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-var">ND</span></a></span><span> </span><span class="annot"><span class="annottext">(NamespaceDiff text hash -&gt; Entity text noSyncHash hash)
-&gt; Parser (NamespaceDiff text hash)
-&gt; Parser (Entity text noSyncHash hash)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679388767"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (NamespaceDiff text hash)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-158"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Causal hash -&gt; Entity text noSyncHash hash
forall text noSyncHash hash.
Causal hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-var">C</span></a></span><span> </span><span class="annot"><span class="annottext">(Causal hash -&gt; Entity text noSyncHash hash)
-&gt; Parser (Causal hash) -&gt; Parser (Entity text noSyncHash hash)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679388767"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (Causal hash)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span id="local-6989586621679387842"><span id="local-6989586621679387843"><span id="local-6989586621679387844"><span id="local-6989586621679387845"><span id="local-6989586621679387846"><span class="annot"><a href="Unison.Sync.Types.html#entityHashes_"><span class="hs-identifier hs-type">entityHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679387842"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679387843"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387844"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387842"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387843"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387845"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387846"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387844"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387842"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387845"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387846"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387843"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-161"></span><span id="entityHashes_"><span class="annot"><span class="annottext">entityHashes_ :: forall (m :: * -&gt; *) hash' hash text noSyncHash.
(Applicative m, Ord hash') =&gt;
(hash -&gt; m hash')
-&gt; Entity text noSyncHash hash -&gt; m (Entity text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#entityHashes_"><span class="hs-identifier hs-var hs-var">entityHashes_</span></a></span></span><span> </span><span id="local-6989586621679388797"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679388797"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-162"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-type">TC</span></a></span><span> </span><span id="local-6989586621679388798"><span class="annot"><span class="annottext">TermComponent text hash
</span><a href="#local-6989586621679388798"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermComponent text hash' -&gt; Entity text noSyncHash hash'
forall text noSyncHash hash.
TermComponent text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-var">TC</span></a></span><span> </span><span class="annot"><span class="annottext">(TermComponent text hash' -&gt; Entity text noSyncHash hash')
-&gt; m (TermComponent text hash') -&gt; m (Entity text noSyncHash hash')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(text -&gt; m text)
-&gt; (hash -&gt; m hash')
-&gt; TermComponent text hash
-&gt; m (TermComponent text hash')
forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c)
-&gt; (b -&gt; f d) -&gt; TermComponent a b -&gt; f (TermComponent c d)
forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">text -&gt; m text
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679388797"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">TermComponent text hash
</span><a href="#local-6989586621679388798"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-163"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-type">DC</span></a></span><span> </span><span id="local-6989586621679388800"><span class="annot"><span class="annottext">DeclComponent text hash
</span><a href="#local-6989586621679388800"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DeclComponent text hash' -&gt; Entity text noSyncHash hash'
forall text noSyncHash hash.
DeclComponent text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-var">DC</span></a></span><span> </span><span class="annot"><span class="annottext">(DeclComponent text hash' -&gt; Entity text noSyncHash hash')
-&gt; m (DeclComponent text hash') -&gt; m (Entity text noSyncHash hash')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(text -&gt; m text)
-&gt; (hash -&gt; m hash')
-&gt; DeclComponent text hash
-&gt; m (DeclComponent text hash')
forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c)
-&gt; (b -&gt; f d) -&gt; DeclComponent a b -&gt; f (DeclComponent c d)
forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">text -&gt; m text
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679388797"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">DeclComponent text hash
</span><a href="#local-6989586621679388800"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-164"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span id="local-6989586621679388801"><span class="annot"><span class="annottext">Patch text noSyncHash hash
</span><a href="#local-6989586621679388801"><span class="hs-identifier hs-var">patch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Patch text noSyncHash hash' -&gt; Entity text noSyncHash hash'
forall text noSyncHash hash.
Patch text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-var">P</span></a></span><span> </span><span class="annot"><span class="annottext">(Patch text noSyncHash hash' -&gt; Entity text noSyncHash hash')
-&gt; m (Patch text noSyncHash hash')
-&gt; m (Entity text noSyncHash hash')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash')
-&gt; Patch text noSyncHash hash -&gt; m (Patch text noSyncHash hash')
forall (m :: * -&gt; *) newHash newHash' text oldHash.
Applicative m =&gt;
(newHash -&gt; m newHash')
-&gt; Patch text oldHash newHash -&gt; m (Patch text oldHash newHash')
</span><a href="Unison.Sync.Types.html#patchNewHashes_"><span class="hs-identifier hs-var">patchNewHashes_</span></a></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679388797"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Patch text noSyncHash hash
</span><a href="#local-6989586621679388801"><span class="hs-identifier hs-var">patch</span></a></span><span>
</span><span id="line-165"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-type">PD</span></a></span><span> </span><span id="local-6989586621679388802"><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash
</span><a href="#local-6989586621679388802"><span class="hs-identifier hs-var">patch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash' -&gt; Entity text noSyncHash hash'
forall text noSyncHash hash.
PatchDiff text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-var">PD</span></a></span><span> </span><span class="annot"><span class="annottext">(PatchDiff text noSyncHash hash' -&gt; Entity text noSyncHash hash')
-&gt; m (PatchDiff text noSyncHash hash')
-&gt; m (Entity text noSyncHash hash')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash')
-&gt; PatchDiff text noSyncHash hash
-&gt; m (PatchDiff text noSyncHash hash')
forall (m :: * -&gt; *) hash hash' text noSyncHash.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; PatchDiff text noSyncHash hash
-&gt; m (PatchDiff text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#patchDiffHashes_"><span class="hs-identifier hs-var">patchDiffHashes_</span></a></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679388797"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash
</span><a href="#local-6989586621679388802"><span class="hs-identifier hs-var">patch</span></a></span><span>
</span><span id="line-166"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-type">N</span></a></span><span> </span><span id="local-6989586621679388803"><span class="annot"><span class="annottext">Namespace text hash
</span><a href="#local-6989586621679388803"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Namespace text hash' -&gt; Entity text noSyncHash hash'
forall text noSyncHash hash.
Namespace text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-var">N</span></a></span><span> </span><span class="annot"><span class="annottext">(Namespace text hash' -&gt; Entity text noSyncHash hash')
-&gt; m (Namespace text hash') -&gt; m (Entity text noSyncHash hash')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(text -&gt; m text)
-&gt; (hash -&gt; m hash')
-&gt; Namespace text hash
-&gt; m (Namespace text hash')
forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; Namespace a b -&gt; f (Namespace c d)
forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">text -&gt; m text
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679388797"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Namespace text hash
</span><a href="#local-6989586621679388803"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-167"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-type">ND</span></a></span><span> </span><span id="local-6989586621679388804"><span class="annot"><span class="annottext">NamespaceDiff text hash
</span><a href="#local-6989586621679388804"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamespaceDiff text hash' -&gt; Entity text noSyncHash hash'
forall text noSyncHash hash.
NamespaceDiff text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-var">ND</span></a></span><span> </span><span class="annot"><span class="annottext">(NamespaceDiff text hash' -&gt; Entity text noSyncHash hash')
-&gt; m (NamespaceDiff text hash') -&gt; m (Entity text noSyncHash hash')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash')
-&gt; NamespaceDiff text hash -&gt; m (NamespaceDiff text hash')
forall (m :: * -&gt; *) hash hash' text.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; NamespaceDiff text hash -&gt; m (NamespaceDiff text hash')
</span><a href="Unison.Sync.Types.html#namespaceDiffHashes_"><span class="hs-identifier hs-var">namespaceDiffHashes_</span></a></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679388797"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">NamespaceDiff text hash
</span><a href="#local-6989586621679388804"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-168"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-type">C</span></a></span><span> </span><span id="local-6989586621679388805"><span class="annot"><span class="annottext">Causal hash
</span><a href="#local-6989586621679388805"><span class="hs-identifier hs-var">causal</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Causal hash' -&gt; Entity text noSyncHash hash'
forall text noSyncHash hash.
Causal hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-var">C</span></a></span><span> </span><span class="annot"><span class="annottext">(Causal hash' -&gt; Entity text noSyncHash hash')
-&gt; m (Causal hash') -&gt; m (Entity text noSyncHash hash')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash') -&gt; Causal hash -&gt; m (Causal hash')
forall (m :: * -&gt; *) hash' hash.
(Applicative m, Ord hash') =&gt;
(hash -&gt; m hash') -&gt; Causal hash -&gt; m (Causal hash')
</span><a href="Unison.Sync.Types.html#causalHashes_"><span class="hs-identifier hs-var">causalHashes_</span></a></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679388797"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Causal hash
</span><a href="#local-6989586621679388805"><span class="hs-identifier hs-var">causal</span></a></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="hs-comment">-- | Get the direct dependencies of an entity (which are actually sync'd).</span><span>
</span><span id="line-171"></span><span class="hs-comment">--</span><span>
</span><span id="line-172"></span><span class="hs-comment">-- FIXME use generic-lens here? (typed @hash)</span><span>
</span><span id="line-173"></span><span id="local-6989586621679387876"><span id="local-6989586621679387877"><span id="local-6989586621679387878"><span class="annot"><a href="Unison.Sync.Types.html#entityDependencies"><span class="hs-identifier hs-type">entityDependencies</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679387876"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387877"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387878"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387876"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621679387876"><span class="hs-identifier hs-type">hash</span></a></span></span></span></span><span>
</span><span id="line-174"></span><span id="entityDependencies"><span class="annot"><span class="annottext">entityDependencies :: forall hash text noSyncHash.
Ord hash =&gt;
Entity text noSyncHash hash -&gt; Set hash
</span><a href="Unison.Sync.Types.html#entityDependencies"><span class="hs-identifier hs-var hs-var">entityDependencies</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-175"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-type">TC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span id="local-6989586621679388834"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679388834"><span class="hs-identifier hs-var">terms</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(((LocalIds text hash, ByteString) -&gt; Set hash)
 -&gt; [(LocalIds text hash, ByteString)] -&gt; Set hash)
-&gt; [(LocalIds text hash, ByteString)]
-&gt; ((LocalIds text hash, ByteString) -&gt; Set hash)
-&gt; Set hash
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">((LocalIds text hash, ByteString) -&gt; Set hash)
-&gt; [(LocalIds text hash, ByteString)] -&gt; Set hash
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; [a] -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679388834"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679388838"><span class="annot"><span class="annottext">[hash]
hashes :: [hash]
$sel:hashes:LocalIds :: forall text hash. LocalIds text hash -&gt; [hash]
</span><a href="#local-6989586621679388838"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388840"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679388840"><span class="hs-identifier hs-var">_term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679388838"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-176"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-type">DC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span id="local-6989586621679388843"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679388843"><span class="hs-identifier hs-var">decls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(((LocalIds text hash, ByteString) -&gt; Set hash)
 -&gt; [(LocalIds text hash, ByteString)] -&gt; Set hash)
-&gt; [(LocalIds text hash, ByteString)]
-&gt; ((LocalIds text hash, ByteString) -&gt; Set hash)
-&gt; Set hash
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">((LocalIds text hash, ByteString) -&gt; Set hash)
-&gt; [(LocalIds text hash, ByteString)] -&gt; Set hash
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; [a] -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679388843"><span class="hs-identifier hs-var">decls</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679388844"><span class="annot"><span class="annottext">[hash]
$sel:hashes:LocalIds :: forall text hash. LocalIds text hash -&gt; [hash]
hashes :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3Ahashes%3ALocalIds"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388845"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679388845"><span class="hs-identifier hs-var">_decl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679388844"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679388847"><span class="annot"><span class="annottext">[hash]
newHashLookup :: [hash]
$sel:newHashLookup:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; [newHash]
</span><a href="#local-6989586621679388847"><span class="hs-identifier hs-var hs-var">newHashLookup</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679388847"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span>
</span><span id="line-178"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-type">PD</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679388850"><span class="annot"><span class="annottext">hash
parent :: hash
$sel:parent:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; hash
</span><a href="#local-6989586621679388850"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388852"><span class="annot"><span class="annottext">[hash]
newHashLookup :: [hash]
$sel:newHashLookup:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; [hash]
</span><a href="#local-6989586621679388852"><span class="hs-identifier hs-var hs-var">newHashLookup</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">hash -&gt; Set hash -&gt; Set hash
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679388850"><span class="hs-identifier hs-var">parent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679388852"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-type">N</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679388856"><span class="annot"><span class="annottext">[hash]
defnLookup :: [hash]
$sel:defnLookup:Namespace :: forall text hash. Namespace text hash -&gt; [hash]
</span><a href="#local-6989586621679388856"><span class="hs-identifier hs-var hs-var">defnLookup</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388858"><span class="annot"><span class="annottext">[hash]
patchLookup :: [hash]
$sel:patchLookup:Namespace :: forall text hash. Namespace text hash -&gt; [hash]
</span><a href="#local-6989586621679388858"><span class="hs-identifier hs-var hs-var">patchLookup</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388860"><span class="annot"><span class="annottext">[(hash, hash)]
childLookup :: [(hash, hash)]
$sel:childLookup:Namespace :: forall text hash. Namespace text hash -&gt; [(hash, hash)]
</span><a href="#local-6989586621679388860"><span class="hs-identifier hs-var hs-var">childLookup</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-180"></span><span>    </span><span class="annot"><span class="annottext">[Set hash] -&gt; Set hash
forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><span class="hs-identifier hs-var">Set.unions</span></span><span>
</span><span id="line-181"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679388856"><span class="hs-identifier hs-var">defnLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-182"></span><span>        </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679388858"><span class="hs-identifier hs-var">patchLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-183"></span><span>        </span><span class="annot"><span class="annottext">((hash, hash) -&gt; Set hash) -&gt; [(hash, hash)] -&gt; Set hash
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; [a] -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679388863"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679388863"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388864"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679388864"><span class="hs-identifier hs-var">causalHash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679388863"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679388864"><span class="hs-identifier hs-var">causalHash</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679388860"><span class="hs-identifier hs-var">childLookup</span></a></span><span>
</span><span id="line-184"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-185"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-type">ND</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679388866"><span class="annot"><span class="annottext">hash
parent :: hash
$sel:parent:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; hash
</span><a href="#local-6989586621679388866"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388868"><span class="annot"><span class="annottext">[hash]
defnLookup :: [hash]
$sel:defnLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [hash]
</span><a href="#local-6989586621679388868"><span class="hs-identifier hs-var hs-var">defnLookup</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388870"><span class="annot"><span class="annottext">[hash]
patchLookup :: [hash]
$sel:patchLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [hash]
</span><a href="#local-6989586621679388870"><span class="hs-identifier hs-var hs-var">patchLookup</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388872"><span class="annot"><span class="annottext">[(hash, hash)]
childLookup :: [(hash, hash)]
$sel:childLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [(hash, hash)]
</span><a href="#local-6989586621679388872"><span class="hs-identifier hs-var hs-var">childLookup</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><span class="annottext">[Set hash] -&gt; Set hash
forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><span class="hs-identifier hs-var">Set.unions</span></span><span>
</span><span id="line-187"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">hash -&gt; Set hash
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679388866"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-188"></span><span>        </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679388868"><span class="hs-identifier hs-var">defnLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-189"></span><span>        </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679388870"><span class="hs-identifier hs-var">patchLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-190"></span><span>        </span><span class="annot"><span class="annottext">((hash, hash) -&gt; Set hash) -&gt; [(hash, hash)] -&gt; Set hash
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; [a] -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679388875"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679388875"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388876"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679388876"><span class="hs-identifier hs-var">causalHash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679388875"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679388876"><span class="hs-identifier hs-var">causalHash</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679388872"><span class="hs-identifier hs-var">childLookup</span></a></span><span>
</span><span id="line-191"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-192"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-type">C</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679388878"><span class="annot"><span class="annottext">hash
namespaceHash :: hash
$sel:namespaceHash:Causal :: forall hash. Causal hash -&gt; hash
</span><a href="#local-6989586621679388878"><span class="hs-identifier hs-var hs-var">namespaceHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388880"><span class="annot"><span class="annottext">Set hash
parents :: Set hash
$sel:parents:Causal :: forall hash. Causal hash -&gt; Set hash
</span><a href="#local-6989586621679388880"><span class="hs-identifier hs-var hs-var">parents</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">hash -&gt; Set hash -&gt; Set hash
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679388878"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span> </span><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679388880"><span class="hs-identifier hs-var">parents</span></a></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="hs-keyword">data</span><span> </span><span id="TermComponent"><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-var">TermComponent</span></a></span></span><span> </span><span id="local-6989586621679387985"><span class="annot"><a href="#local-6989586621679387985"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679387986"><span class="annot"><a href="#local-6989586621679387986"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TermComponent"><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-var">TermComponent</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387985"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387986"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-195"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679388885"><span id="local-6989586621679388891"><span id="local-6989586621679388894"><span class="annot"><span class="annottext">Int -&gt; TermComponent text hash -&gt; ShowS
[TermComponent text hash] -&gt; ShowS
TermComponent text hash -&gt; String
(Int -&gt; TermComponent text hash -&gt; ShowS)
-&gt; (TermComponent text hash -&gt; String)
-&gt; ([TermComponent text hash] -&gt; ShowS)
-&gt; Show (TermComponent text hash)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; TermComponent text hash -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
[TermComponent text hash] -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
TermComponent text hash -&gt; String
$cshowsPrec :: forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; TermComponent text hash -&gt; ShowS
showsPrec :: Int -&gt; TermComponent text hash -&gt; ShowS
$cshow :: forall text hash.
(Show text, Show hash) =&gt;
TermComponent text hash -&gt; String
show :: TermComponent text hash -&gt; String
$cshowList :: forall text hash.
(Show text, Show hash) =&gt;
[TermComponent text hash] -&gt; ShowS
showList :: [TermComponent text hash] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388904"><span id="local-6989586621679388909"><span class="annot"><span class="annottext">TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
(TermComponent text hash -&gt; TermComponent text hash -&gt; Bool)
-&gt; (TermComponent text hash -&gt; TermComponent text hash -&gt; Bool)
-&gt; Eq (TermComponent text hash)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq text, Eq hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c== :: forall text hash.
(Eq text, Eq hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
== :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c/= :: forall text hash.
(Eq text, Eq hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
/= :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388917"><span id="local-6989586621679388923"><span class="annot"><span class="annottext">(forall a b.
 (a -&gt; b) -&gt; TermComponent text a -&gt; TermComponent text b)
-&gt; (forall a b. a -&gt; TermComponent text b -&gt; TermComponent text a)
-&gt; Functor (TermComponent text)
forall a b. a -&gt; TermComponent text b -&gt; TermComponent text a
forall a b.
(a -&gt; b) -&gt; TermComponent text a -&gt; TermComponent text b
forall text a b. a -&gt; TermComponent text b -&gt; TermComponent text a
forall text a b.
(a -&gt; b) -&gt; TermComponent text a -&gt; TermComponent text b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall text a b.
(a -&gt; b) -&gt; TermComponent text a -&gt; TermComponent text b
fmap :: forall a b.
(a -&gt; b) -&gt; TermComponent text a -&gt; TermComponent text b
$c&lt;$ :: forall text a b. a -&gt; TermComponent text b -&gt; TermComponent text a
&lt;$ :: forall a b. a -&gt; TermComponent text b -&gt; TermComponent text a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679388935"><span id="local-6989586621679388940"><span id="local-6989586621679388944"><span id="local-6989586621679388947"><span id="local-6989586621679388950"><span id="local-6989586621679388953"><span id="local-6989586621679388956"><span class="annot"><span class="annottext">Eq (TermComponent text hash)
Eq (TermComponent text hash) =&gt;
(TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering)
-&gt; (TermComponent text hash -&gt; TermComponent text hash -&gt; Bool)
-&gt; (TermComponent text hash -&gt; TermComponent text hash -&gt; Bool)
-&gt; (TermComponent text hash -&gt; TermComponent text hash -&gt; Bool)
-&gt; (TermComponent text hash -&gt; TermComponent text hash -&gt; Bool)
-&gt; (TermComponent text hash
    -&gt; TermComponent text hash -&gt; TermComponent text hash)
-&gt; (TermComponent text hash
    -&gt; TermComponent text hash -&gt; TermComponent text hash)
-&gt; Ord (TermComponent text hash)
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering
TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall text hash.
(Ord text, Ord hash) =&gt;
Eq (TermComponent text hash)
forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering
forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
$ccompare :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering
compare :: TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering
$c&lt; :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
&lt; :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
&lt;= :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
&gt; :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
&gt;= :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$cmax :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
max :: TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
$cmin :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
min :: TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679388966"><span id="local-6989586621679388973"><span id="local-6989586621679388976"><span class="annot"><span class="hs-identifier hs-type">Bifoldable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-198"></span><span>  </span><span id="local-6989586621679388982"><span class="annot"><span class="annottext">bifoldMap :: forall m a b.
Monoid m =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; TermComponent a b -&gt; m
</span><a href="#local-6989586621679388982"><span class="hs-identifier hs-var hs-var hs-var hs-var">bifoldMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m) -&gt; (b -&gt; m) -&gt; TermComponent a b -&gt; m
forall (t :: * -&gt; * -&gt; *) m a b.
(Bitraversable t, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; t a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMapDefault</span></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679388989"><span id="local-6989586621679388993"><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-201"></span><span>  </span><span id="local-6989586621679388997"><span class="annot"><span class="annottext">bimap :: forall a b c d.
(a -&gt; b) -&gt; (c -&gt; d) -&gt; TermComponent a c -&gt; TermComponent b d
</span><a href="#local-6989586621679388997"><span class="hs-identifier hs-var hs-var hs-var hs-var">bimap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; (c -&gt; d) -&gt; TermComponent a c -&gt; TermComponent b d
forall (t :: * -&gt; * -&gt; *) a b c d.
Bitraversable t =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; t a c -&gt; t b d
</span><span class="hs-identifier hs-var">bimapDefault</span></span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bitraversable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-204"></span><span>  </span><span id="local-6989586621679389010"><span class="annot"><span class="annottext">bitraverse :: forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c)
-&gt; (b -&gt; f d) -&gt; TermComponent a b -&gt; f (TermComponent c d)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">bitraverse</span></span></span><span> </span><span id="local-6989586621679389011"><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679389011"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679389012"><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679389012"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span id="local-6989586621679389013"><span class="annot"><span class="annottext">[(LocalIds a b, ByteString)]
</span><a href="#local-6989586621679389013"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-205"></span><span>    </span><span class="annot"><span class="annottext">[(LocalIds c d, ByteString)] -&gt; TermComponent c d
forall text hash.
[(LocalIds text hash, ByteString)] -&gt; TermComponent text hash
</span><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-var">TermComponent</span></a></span><span> </span><span class="annot"><span class="annottext">([(LocalIds c d, ByteString)] -&gt; TermComponent c d)
-&gt; f [(LocalIds c d, ByteString)] -&gt; f (TermComponent c d)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; f c)
-&gt; (b -&gt; f d)
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds c d, ByteString)]
forall (f :: * -&gt; *) a a' b b'.
Applicative f =&gt;
(a -&gt; f a')
-&gt; (b -&gt; f b')
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds a' b', ByteString)]
</span><a href="Unison.Sync.Types.html#bitraverseComponents"><span class="hs-identifier hs-var">bitraverseComponents</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679389011"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679389012"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocalIds a b, ByteString)]
</span><a href="#local-6989586621679389013"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679387796"><span id="local-6989586621679387797"><span id="local-6989586621679389019"><span id="local-6989586621679389022"><span id="local-6989586621679389025"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387796"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387797"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387796"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387797"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-208"></span><span>  </span><span id="local-6989586621679389038"><span class="annot"><span class="annottext">toJSON :: TermComponent text hash -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span id="local-6989586621679389039"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679389039"><span class="hs-identifier hs-var">components</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-209"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-210"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;terms&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocalIds text hash, ByteString) -&gt; Value
forall text hash.
(ToJSON text, ToJSON hash) =&gt;
(LocalIds text hash, ByteString) -&gt; Value
</span><a href="Unison.Sync.Types.html#encodeComponentPiece"><span class="hs-identifier hs-var">encodeComponentPiece</span></a></span><span> </span><span class="annot"><span class="annottext">((LocalIds text hash, ByteString) -&gt; Value)
-&gt; [(LocalIds text hash, ByteString)] -&gt; [Value]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679389039"><span class="hs-identifier hs-var">components</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679387820"><span id="local-6989586621679387821"><span id="local-6989586621679389045"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387820"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387821"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387820"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387821"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-214"></span><span>  </span><span id="local-6989586621679389059"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (TermComponent text hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (TermComponent text hash))
-&gt; Value
-&gt; Parser (TermComponent text hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TermComponent&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679389060"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389060"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-215"></span><span>    </span><span id="local-6989586621679389061"><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679389061"><span class="hs-identifier hs-var">pieces</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389060"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;terms&quot;</span></span><span>
</span><span id="line-216"></span><span>    </span><span id="local-6989586621679389062"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679389062"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (LocalIds text hash, ByteString))
-&gt; [Value] -&gt; Parser [(LocalIds text hash, ByteString)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (LocalIds text hash, ByteString)
forall text hash.
(FromJSON text, FromJSON hash) =&gt;
Value -&gt; Parser (LocalIds text hash, ByteString)
</span><a href="Unison.Sync.Types.html#decodeComponentPiece"><span class="hs-identifier hs-var">decodeComponentPiece</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679389061"><span class="hs-identifier hs-var">pieces</span></a></span><span>
</span><span id="line-217"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)] -&gt; TermComponent text hash
forall text hash.
[(LocalIds text hash, ByteString)] -&gt; TermComponent text hash
</span><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-var">TermComponent</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679389062"><span class="hs-identifier hs-var">terms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span id="local-6989586621679387987"><span id="local-6989586621679387988"><span id="local-6989586621679387989"><span id="local-6989586621679387990"><span id="local-6989586621679387991"><span class="annot"><a href="Unison.Sync.Types.html#bitraverseComponents"><span class="hs-identifier hs-type">bitraverseComponents</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-220"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679387987"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-221"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387988"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387987"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387989"><span class="hs-identifier hs-type">a'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-222"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387990"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387987"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387991"><span class="hs-identifier hs-type">b'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-223"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387988"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387990"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-224"></span><span>  </span><span class="annot"><a href="#local-6989586621679387987"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387989"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387991"><span class="hs-identifier hs-type">b'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span></span></span></span></span></span><span>
</span><span id="line-225"></span><span id="bitraverseComponents"><span class="annot"><span class="annottext">bitraverseComponents :: forall (f :: * -&gt; *) a a' b b'.
Applicative f =&gt;
(a -&gt; f a')
-&gt; (b -&gt; f b')
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds a' b', ByteString)]
</span><a href="Unison.Sync.Types.html#bitraverseComponents"><span class="hs-identifier hs-var hs-var">bitraverseComponents</span></a></span></span><span> </span><span id="local-6989586621679389073"><span class="annot"><span class="annottext">a -&gt; f a'
</span><a href="#local-6989586621679389073"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679389074"><span class="annot"><span class="annottext">b -&gt; f b'
</span><a href="#local-6989586621679389074"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-226"></span><span>  </span><span class="annot"><span class="annottext">((LocalIds a b, ByteString) -&gt; f (LocalIds a' b', ByteString))
-&gt; [(LocalIds a b, ByteString)] -&gt; f [(LocalIds a' b', ByteString)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">(((LocalIds a b, ByteString) -&gt; f (LocalIds a' b', ByteString))
 -&gt; [(LocalIds a b, ByteString)]
 -&gt; f [(LocalIds a' b', ByteString)])
-&gt; ((LocalIds a b -&gt; f (LocalIds a' b'))
    -&gt; (LocalIds a b, ByteString) -&gt; f (LocalIds a' b', ByteString))
-&gt; (LocalIds a b -&gt; f (LocalIds a' b'))
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds a' b', ByteString)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LocalIds a b -&gt; f (LocalIds a' b'))
-&gt; (LocalIds a b, ByteString) -&gt; f (LocalIds a' b', ByteString)
forall {f :: * -&gt; *} {t} {a} {t}.
Functor f =&gt;
(t -&gt; f a) -&gt; (t, t) -&gt; f (a, t)
</span><a href="#local-6989586621679389075"><span class="hs-identifier hs-var">_1</span></a></span><span> </span><span class="annot"><span class="annottext">((LocalIds a b -&gt; f (LocalIds a' b'))
 -&gt; [(LocalIds a b, ByteString)]
 -&gt; f [(LocalIds a' b', ByteString)])
-&gt; (LocalIds a b -&gt; f (LocalIds a' b'))
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds a' b', ByteString)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; f a') -&gt; (b -&gt; f b') -&gt; LocalIds a b -&gt; f (LocalIds a' b')
forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; LocalIds a b -&gt; f (LocalIds c d)
forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f a'
</span><a href="#local-6989586621679389073"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f b'
</span><a href="#local-6989586621679389074"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-227"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-228"></span><span>    </span><span id="local-6989586621679389075"><span class="annot"><span class="annottext">_1 :: (t -&gt; f a) -&gt; (t, t) -&gt; f (a, t)
</span><a href="#local-6989586621679389075"><span class="hs-identifier hs-var hs-var">_1</span></a></span></span><span> </span><span id="local-6989586621679389078"><span class="annot"><span class="annottext">t -&gt; f a
</span><a href="#local-6989586621679389078"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679389079"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679389079"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389080"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679389080"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679389080"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(a -&gt; (a, t)) -&gt; f a -&gt; f (a, t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; f a
</span><a href="#local-6989586621679389078"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679389079"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span id="local-6989586621679387995"><span id="local-6989586621679387996"><span class="annot"><a href="Unison.Sync.Types.html#encodeComponentPiece"><span class="hs-identifier hs-type">encodeComponentPiece</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387995"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387996"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387995"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387996"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span></span></span><span>
</span><span id="line-231"></span><span id="encodeComponentPiece"><span class="annot"><span class="annottext">encodeComponentPiece :: forall text hash.
(ToJSON text, ToJSON hash) =&gt;
(LocalIds text hash, ByteString) -&gt; Value
</span><a href="Unison.Sync.Types.html#encodeComponentPiece"><span class="hs-identifier hs-var hs-var">encodeComponentPiece</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679389092"><span class="annot"><span class="annottext">LocalIds text hash
</span><a href="#local-6989586621679389092"><span class="hs-identifier hs-var">localIDs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389093"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679389093"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-232"></span><span>  </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-233"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;local_ids&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; LocalIds text hash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">LocalIds text hash
</span><a href="#local-6989586621679389092"><span class="hs-identifier hs-var">localIDs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-234"></span><span>      </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Base64Bytes -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679389093"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-235"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span id="local-6989586621679388004"><span id="local-6989586621679388005"><span class="annot"><a href="Unison.Sync.Types.html#decodeComponentPiece"><span class="hs-identifier hs-type">decodeComponentPiece</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679388004"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679388005"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Parser</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388004"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388005"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-238"></span><span id="decodeComponentPiece"><span class="annot"><span class="annottext">decodeComponentPiece :: forall text hash.
(FromJSON text, FromJSON hash) =&gt;
Value -&gt; Parser (LocalIds text hash, ByteString)
</span><a href="Unison.Sync.Types.html#decodeComponentPiece"><span class="hs-identifier hs-var hs-var">decodeComponentPiece</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (LocalIds text hash, ByteString))
-&gt; Value
-&gt; Parser (LocalIds text hash, ByteString)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Component Piece&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679389105"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389105"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-239"></span><span>  </span><span id="local-6989586621679389106"><span class="annot"><span class="annottext">LocalIds text hash
</span><a href="#local-6989586621679389106"><span class="hs-identifier hs-var">localIDs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389105"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (LocalIds text hash)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;local_ids&quot;</span></span><span>
</span><span id="line-240"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679389107"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679389107"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389105"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Base64Bytes
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-241"></span><span>  </span><span class="annot"><span class="annottext">(LocalIds text hash, ByteString)
-&gt; Parser (LocalIds text hash, ByteString)
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalIds text hash
</span><a href="#local-6989586621679389106"><span class="hs-identifier hs-var">localIDs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679389107"><span class="hs-identifier hs-var">bytes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="hs-keyword">data</span><span> </span><span id="DeclComponent"><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-var">DeclComponent</span></a></span></span><span> </span><span id="local-6989586621679388044"><span class="annot"><a href="#local-6989586621679388044"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679388045"><span class="annot"><a href="#local-6989586621679388045"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DeclComponent"><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-var">DeclComponent</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388044"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388045"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679389111"><span id="local-6989586621679389116"><span id="local-6989586621679389119"><span class="annot"><span class="annottext">Int -&gt; DeclComponent text hash -&gt; ShowS
[DeclComponent text hash] -&gt; ShowS
DeclComponent text hash -&gt; String
(Int -&gt; DeclComponent text hash -&gt; ShowS)
-&gt; (DeclComponent text hash -&gt; String)
-&gt; ([DeclComponent text hash] -&gt; ShowS)
-&gt; Show (DeclComponent text hash)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; DeclComponent text hash -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
[DeclComponent text hash] -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
DeclComponent text hash -&gt; String
$cshowsPrec :: forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; DeclComponent text hash -&gt; ShowS
showsPrec :: Int -&gt; DeclComponent text hash -&gt; ShowS
$cshow :: forall text hash.
(Show text, Show hash) =&gt;
DeclComponent text hash -&gt; String
show :: DeclComponent text hash -&gt; String
$cshowList :: forall text hash.
(Show text, Show hash) =&gt;
[DeclComponent text hash] -&gt; ShowS
showList :: [DeclComponent text hash] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389126"><span id="local-6989586621679389130"><span class="annot"><span class="annottext">DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
(DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool)
-&gt; (DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool)
-&gt; Eq (DeclComponent text hash)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq text, Eq hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c== :: forall text hash.
(Eq text, Eq hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
== :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c/= :: forall text hash.
(Eq text, Eq hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
/= :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389135"><span id="local-6989586621679389139"><span class="annot"><span class="annottext">(forall a b.
 (a -&gt; b) -&gt; DeclComponent text a -&gt; DeclComponent text b)
-&gt; (forall a b. a -&gt; DeclComponent text b -&gt; DeclComponent text a)
-&gt; Functor (DeclComponent text)
forall a b. a -&gt; DeclComponent text b -&gt; DeclComponent text a
forall a b.
(a -&gt; b) -&gt; DeclComponent text a -&gt; DeclComponent text b
forall text a b. a -&gt; DeclComponent text b -&gt; DeclComponent text a
forall text a b.
(a -&gt; b) -&gt; DeclComponent text a -&gt; DeclComponent text b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall text a b.
(a -&gt; b) -&gt; DeclComponent text a -&gt; DeclComponent text b
fmap :: forall a b.
(a -&gt; b) -&gt; DeclComponent text a -&gt; DeclComponent text b
$c&lt;$ :: forall text a b. a -&gt; DeclComponent text b -&gt; DeclComponent text a
&lt;$ :: forall a b. a -&gt; DeclComponent text b -&gt; DeclComponent text a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389150"><span id="local-6989586621679389154"><span id="local-6989586621679389158"><span id="local-6989586621679389161"><span id="local-6989586621679389164"><span id="local-6989586621679389167"><span id="local-6989586621679389170"><span class="annot"><span class="annottext">Eq (DeclComponent text hash)
Eq (DeclComponent text hash) =&gt;
(DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering)
-&gt; (DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool)
-&gt; (DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool)
-&gt; (DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool)
-&gt; (DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool)
-&gt; (DeclComponent text hash
    -&gt; DeclComponent text hash -&gt; DeclComponent text hash)
-&gt; (DeclComponent text hash
    -&gt; DeclComponent text hash -&gt; DeclComponent text hash)
-&gt; Ord (DeclComponent text hash)
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering
DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall text hash.
(Ord text, Ord hash) =&gt;
Eq (DeclComponent text hash)
forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering
forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
$ccompare :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering
compare :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering
$c&lt; :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
&lt; :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
&lt;= :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
&gt; :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
&gt;= :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$cmax :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
max :: DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
$cmin :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
min :: DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679389177"><span id="local-6989586621679389184"><span id="local-6989586621679389187"><span class="annot"><span class="hs-identifier hs-type">Bifoldable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-247"></span><span>  </span><span id="local-6989586621679389192"><span class="annot"><span class="annottext">bifoldMap :: forall m a b.
Monoid m =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; DeclComponent a b -&gt; m
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">bifoldMap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m) -&gt; (b -&gt; m) -&gt; DeclComponent a b -&gt; m
forall (t :: * -&gt; * -&gt; *) m a b.
(Bitraversable t, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; t a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMapDefault</span></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679389197"><span id="local-6989586621679389201"><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-250"></span><span>  </span><span id="local-6989586621679389204"><span class="annot"><span class="annottext">bimap :: forall a b c d.
(a -&gt; b) -&gt; (c -&gt; d) -&gt; DeclComponent a c -&gt; DeclComponent b d
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">bimap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; (c -&gt; d) -&gt; DeclComponent a c -&gt; DeclComponent b d
forall (t :: * -&gt; * -&gt; *) a b c d.
Bitraversable t =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; t a c -&gt; t b d
</span><span class="hs-identifier hs-var">bimapDefault</span></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bitraversable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-253"></span><span>  </span><span id="local-6989586621679389214"><span class="annot"><span class="annottext">bitraverse :: forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c)
-&gt; (b -&gt; f d) -&gt; DeclComponent a b -&gt; f (DeclComponent c d)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">bitraverse</span></span></span><span> </span><span id="local-6989586621679389215"><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679389215"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679389216"><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679389216"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span id="local-6989586621679389217"><span class="annot"><span class="annottext">[(LocalIds a b, ByteString)]
</span><a href="#local-6989586621679389217"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-254"></span><span>    </span><span class="annot"><span class="annottext">[(LocalIds c d, ByteString)] -&gt; DeclComponent c d
forall text hash.
[(LocalIds text hash, ByteString)] -&gt; DeclComponent text hash
</span><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-var">DeclComponent</span></a></span><span> </span><span class="annot"><span class="annottext">([(LocalIds c d, ByteString)] -&gt; DeclComponent c d)
-&gt; f [(LocalIds c d, ByteString)] -&gt; f (DeclComponent c d)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; f c)
-&gt; (b -&gt; f d)
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds c d, ByteString)]
forall (f :: * -&gt; *) a a' b b'.
Applicative f =&gt;
(a -&gt; f a')
-&gt; (b -&gt; f b')
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds a' b', ByteString)]
</span><a href="Unison.Sync.Types.html#bitraverseComponents"><span class="hs-identifier hs-var">bitraverseComponents</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679389215"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679389216"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocalIds a b, ByteString)]
</span><a href="#local-6989586621679389217"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679387794"><span id="local-6989586621679387795"><span id="local-6989586621679389222"><span id="local-6989586621679389225"><span id="local-6989586621679389228"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387794"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387795"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387794"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387795"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-257"></span><span>  </span><span id="local-6989586621679389239"><span class="annot"><span class="annottext">toJSON :: DeclComponent text hash -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span id="local-6989586621679389240"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679389240"><span class="hs-identifier hs-var">components</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-258"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-259"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;decls&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocalIds text hash, ByteString) -&gt; Value
forall text hash.
(ToJSON text, ToJSON hash) =&gt;
(LocalIds text hash, ByteString) -&gt; Value
</span><a href="Unison.Sync.Types.html#encodeComponentPiece"><span class="hs-identifier hs-var">encodeComponentPiece</span></a></span><span> </span><span class="annot"><span class="annottext">((LocalIds text hash, ByteString) -&gt; Value)
-&gt; [(LocalIds text hash, ByteString)] -&gt; [Value]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679389240"><span class="hs-identifier hs-var">components</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679387818"><span id="local-6989586621679387819"><span id="local-6989586621679389245"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387818"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387819"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387818"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387819"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-263"></span><span>  </span><span id="local-6989586621679389256"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (DeclComponent text hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (DeclComponent text hash))
-&gt; Value
-&gt; Parser (DeclComponent text hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DeclComponent&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679389257"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389257"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-264"></span><span>    </span><span id="local-6989586621679389258"><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679389258"><span class="hs-identifier hs-var">pieces</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389257"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;decls&quot;</span></span><span>
</span><span id="line-265"></span><span>    </span><span id="local-6989586621679389259"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679389259"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (LocalIds text hash, ByteString))
-&gt; [Value] -&gt; Parser [(LocalIds text hash, ByteString)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (LocalIds text hash, ByteString)
forall text hash.
(FromJSON text, FromJSON hash) =&gt;
Value -&gt; Parser (LocalIds text hash, ByteString)
</span><a href="Unison.Sync.Types.html#decodeComponentPiece"><span class="hs-identifier hs-var">decodeComponentPiece</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679389258"><span class="hs-identifier hs-var">pieces</span></a></span><span>
</span><span id="line-266"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)] -&gt; DeclComponent text hash
forall text hash.
[(LocalIds text hash, ByteString)] -&gt; DeclComponent text hash
</span><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-var">DeclComponent</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679389259"><span class="hs-identifier hs-var">terms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-267"></span><span>
</span><span id="line-268"></span><span class="hs-keyword">data</span><span> </span><span id="LocalIds"><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-var">LocalIds</span></a></span></span><span> </span><span id="local-6989586621679387891"><span class="annot"><a href="#local-6989586621679387891"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679387892"><span class="annot"><a href="#local-6989586621679387892"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LocalIds"><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-var">LocalIds</span></a></span></span><span>
</span><span id="line-269"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Atexts%3ALocalIds"><span class="annot"><span class="annottext">forall text hash. LocalIds text hash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3Atexts%3ALocalIds"><span class="hs-identifier hs-var hs-var">texts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387891"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-270"></span><span>    </span><span id="%24sel%3Ahashes%3ALocalIds"><span class="annot"><span class="annottext">forall text hash. LocalIds text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3Ahashes%3ALocalIds"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387892"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-271"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-272"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679389264"><span id="local-6989586621679389269"><span id="local-6989586621679389272"><span class="annot"><span class="annottext">Int -&gt; LocalIds text hash -&gt; ShowS
[LocalIds text hash] -&gt; ShowS
LocalIds text hash -&gt; String
(Int -&gt; LocalIds text hash -&gt; ShowS)
-&gt; (LocalIds text hash -&gt; String)
-&gt; ([LocalIds text hash] -&gt; ShowS)
-&gt; Show (LocalIds text hash)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; LocalIds text hash -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
[LocalIds text hash] -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
LocalIds text hash -&gt; String
$cshowsPrec :: forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; LocalIds text hash -&gt; ShowS
showsPrec :: Int -&gt; LocalIds text hash -&gt; ShowS
$cshow :: forall text hash.
(Show text, Show hash) =&gt;
LocalIds text hash -&gt; String
show :: LocalIds text hash -&gt; String
$cshowList :: forall text hash.
(Show text, Show hash) =&gt;
[LocalIds text hash] -&gt; ShowS
showList :: [LocalIds text hash] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389277"><span id="local-6989586621679389281"><span class="annot"><span class="annottext">LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
(LocalIds text hash -&gt; LocalIds text hash -&gt; Bool)
-&gt; (LocalIds text hash -&gt; LocalIds text hash -&gt; Bool)
-&gt; Eq (LocalIds text hash)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq text, Eq hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c== :: forall text hash.
(Eq text, Eq hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
== :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c/= :: forall text hash.
(Eq text, Eq hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
/= :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389284"><span id="local-6989586621679389287"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; LocalIds text a -&gt; LocalIds text b)
-&gt; (forall a b. a -&gt; LocalIds text b -&gt; LocalIds text a)
-&gt; Functor (LocalIds text)
forall a b. a -&gt; LocalIds text b -&gt; LocalIds text a
forall a b. (a -&gt; b) -&gt; LocalIds text a -&gt; LocalIds text b
forall text a b. a -&gt; LocalIds text b -&gt; LocalIds text a
forall text a b. (a -&gt; b) -&gt; LocalIds text a -&gt; LocalIds text b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall text a b. (a -&gt; b) -&gt; LocalIds text a -&gt; LocalIds text b
fmap :: forall a b. (a -&gt; b) -&gt; LocalIds text a -&gt; LocalIds text b
$c&lt;$ :: forall text a b. a -&gt; LocalIds text b -&gt; LocalIds text a
&lt;$ :: forall a b. a -&gt; LocalIds text b -&gt; LocalIds text a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389296"><span id="local-6989586621679389300"><span id="local-6989586621679389304"><span id="local-6989586621679389307"><span id="local-6989586621679389310"><span id="local-6989586621679389313"><span id="local-6989586621679389316"><span class="annot"><span class="annottext">Eq (LocalIds text hash)
Eq (LocalIds text hash) =&gt;
(LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering)
-&gt; (LocalIds text hash -&gt; LocalIds text hash -&gt; Bool)
-&gt; (LocalIds text hash -&gt; LocalIds text hash -&gt; Bool)
-&gt; (LocalIds text hash -&gt; LocalIds text hash -&gt; Bool)
-&gt; (LocalIds text hash -&gt; LocalIds text hash -&gt; Bool)
-&gt; (LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash)
-&gt; (LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash)
-&gt; Ord (LocalIds text hash)
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering
LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall text hash. (Ord text, Ord hash) =&gt; Eq (LocalIds text hash)
forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering
forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
$ccompare :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering
compare :: LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering
$c&lt; :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
&lt; :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
&lt;= :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
&gt; :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
&gt;= :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$cmax :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
max :: LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
$cmin :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
min :: LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679389319"><span id="local-6989586621679389326"><span id="local-6989586621679389329"><span class="annot"><span class="hs-identifier hs-type">Bifoldable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-275"></span><span>  </span><span id="local-6989586621679389334"><span class="annot"><span class="annottext">bifoldMap :: forall m a b. Monoid m =&gt; (a -&gt; m) -&gt; (b -&gt; m) -&gt; LocalIds a b -&gt; m
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">bifoldMap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m) -&gt; (b -&gt; m) -&gt; LocalIds a b -&gt; m
forall (t :: * -&gt; * -&gt; *) m a b.
(Bitraversable t, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; t a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMapDefault</span></span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679389339"><span id="local-6989586621679389343"><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-278"></span><span>  </span><span id="local-6989586621679389346"><span class="annot"><span class="annottext">bimap :: forall a b c d.
(a -&gt; b) -&gt; (c -&gt; d) -&gt; LocalIds a c -&gt; LocalIds b d
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">bimap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; (c -&gt; d) -&gt; LocalIds a c -&gt; LocalIds b d
forall (t :: * -&gt; * -&gt; *) a b c d.
Bitraversable t =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; t a c -&gt; t b d
</span><span class="hs-identifier hs-var">bimapDefault</span></span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bitraversable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-281"></span><span>  </span><span id="local-6989586621679389360"><span class="annot"><span class="annottext">bitraverse :: forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; LocalIds a b -&gt; f (LocalIds c d)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">bitraverse</span></span></span><span> </span><span id="local-6989586621679389361"><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679389361"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679389362"><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679389362"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span id="local-6989586621679389363"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679389363"><span class="hs-identifier hs-var">texts</span></a></span></span><span> </span><span id="local-6989586621679389364"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679389364"><span class="hs-identifier hs-var">hashes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-282"></span><span>    </span><span class="annot"><span class="annottext">[c] -&gt; [d] -&gt; LocalIds c d
forall text hash. [text] -&gt; [hash] -&gt; LocalIds text hash
</span><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-var">LocalIds</span></a></span><span> </span><span class="annot"><span class="annottext">([c] -&gt; [d] -&gt; LocalIds c d) -&gt; f [c] -&gt; f ([d] -&gt; LocalIds c d)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; f c) -&gt; [a] -&gt; f [c]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679389361"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679389363"><span class="hs-identifier hs-var">texts</span></a></span><span> </span><span class="annot"><span class="annottext">f ([d] -&gt; LocalIds c d) -&gt; f [d] -&gt; f (LocalIds c d)
forall a b. f (a -&gt; b) -&gt; f a -&gt; f b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(b -&gt; f d) -&gt; [b] -&gt; f [d]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679389362"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679389364"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679388017"><span id="local-6989586621679388018"><span id="local-6989586621679389369"><span id="local-6989586621679389372"><span id="local-6989586621679389375"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679388017"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679388018"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388017"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388018"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-285"></span><span>  </span><span id="local-6989586621679389385"><span class="annot"><span class="annottext">toJSON :: LocalIds text hash -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span id="local-6989586621679389386"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679389386"><span class="hs-identifier hs-var">texts</span></a></span></span><span> </span><span id="local-6989586621679389387"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679389387"><span class="hs-identifier hs-var">hashes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-286"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-287"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;texts&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [text] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679389386"><span class="hs-identifier hs-var">texts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-288"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hashes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [hash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679389387"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-289"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679388021"><span id="local-6989586621679388022"><span id="local-6989586621679389392"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679388021"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679388022"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388021"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388022"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-292"></span><span>  </span><span id="local-6989586621679389400"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (LocalIds text hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (LocalIds text hash))
-&gt; Value
-&gt; Parser (LocalIds text hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;LocalIds&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679389401"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389401"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-293"></span><span>    </span><span id="local-6989586621679389402"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679389402"><span class="hs-identifier hs-var">texts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389401"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [text]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;texts&quot;</span></span><span>
</span><span id="line-294"></span><span>    </span><span id="local-6989586621679389403"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679389403"><span class="hs-identifier hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389401"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [hash]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hashes&quot;</span></span><span>
</span><span id="line-295"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">[text]
[hash]
$sel:hashes:LocalIds :: [hash]
$sel:texts:LocalIds :: [text]
texts :: [text]
hashes :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3Ahashes%3ALocalIds"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span class="hs-keyword">data</span><span> </span><span id="Patch"><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-var">Patch</span></a></span></span><span> </span><span id="local-6989586621679387894"><span class="annot"><a href="#local-6989586621679387894"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679387895"><span class="annot"><a href="#local-6989586621679387895"><span class="hs-identifier hs-type">oldHash</span></a></span></span><span> </span><span id="local-6989586621679387896"><span class="annot"><a href="#local-6989586621679387896"><span class="hs-identifier hs-type">newHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Patch"><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-var">Patch</span></a></span></span><span>
</span><span id="line-298"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AtextLookup%3APatch"><span class="annot"><span class="annottext">forall text oldHash newHash. Patch text oldHash newHash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3AtextLookup%3APatch"><span class="hs-identifier hs-var hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387894"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-299"></span><span>    </span><span id="%24sel%3AoldHashLookup%3APatch"><span class="annot"><span class="annottext">forall text oldHash newHash.
Patch text oldHash newHash -&gt; [oldHash]
</span><a href="Unison.Sync.Types.html#%24sel%3AoldHashLookup%3APatch"><span class="hs-identifier hs-var hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387895"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-300"></span><span>    </span><span id="%24sel%3AnewHashLookup%3APatch"><span class="annot"><span class="annottext">forall text oldHash newHash.
Patch text oldHash newHash -&gt; [newHash]
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatch"><span class="hs-identifier hs-var hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387896"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-301"></span><span>    </span><span id="%24sel%3Abytes%3APatch"><span class="annot"><span class="annottext">forall text oldHash newHash.
Patch text oldHash newHash -&gt; ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3APatch"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-302"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-303"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679389411"><span id="local-6989586621679389418"><span id="local-6989586621679389421"><span class="annot"><span class="annottext">Int -&gt; Patch text oldHash newHash -&gt; ShowS
[Patch text oldHash newHash] -&gt; ShowS
Patch text oldHash newHash -&gt; String
(Int -&gt; Patch text oldHash newHash -&gt; ShowS)
-&gt; (Patch text oldHash newHash -&gt; String)
-&gt; ([Patch text oldHash newHash] -&gt; ShowS)
-&gt; Show (Patch text oldHash newHash)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
Int -&gt; Patch text oldHash newHash -&gt; ShowS
forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
[Patch text oldHash newHash] -&gt; ShowS
forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
Patch text oldHash newHash -&gt; String
$cshowsPrec :: forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
Int -&gt; Patch text oldHash newHash -&gt; ShowS
showsPrec :: Int -&gt; Patch text oldHash newHash -&gt; ShowS
$cshow :: forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
Patch text oldHash newHash -&gt; String
show :: Patch text oldHash newHash -&gt; String
$cshowList :: forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
[Patch text oldHash newHash] -&gt; ShowS
showList :: [Patch text oldHash newHash] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389427"><span id="local-6989586621679389433"><span class="annot"><span class="annottext">Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
(Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool)
-&gt; (Patch text oldHash newHash
    -&gt; Patch text oldHash newHash -&gt; Bool)
-&gt; Eq (Patch text oldHash newHash)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text oldHash newHash.
(Eq text, Eq oldHash, Eq newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c== :: forall text oldHash newHash.
(Eq text, Eq oldHash, Eq newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
== :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c/= :: forall text oldHash newHash.
(Eq text, Eq oldHash, Eq newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
/= :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389444"><span id="local-6989586621679389450"><span id="local-6989586621679389456"><span id="local-6989586621679389459"><span id="local-6989586621679389462"><span id="local-6989586621679389465"><span id="local-6989586621679389468"><span class="annot"><span class="annottext">Eq (Patch text oldHash newHash)
Eq (Patch text oldHash newHash) =&gt;
(Patch text oldHash newHash
 -&gt; Patch text oldHash newHash -&gt; Ordering)
-&gt; (Patch text oldHash newHash
    -&gt; Patch text oldHash newHash -&gt; Bool)
-&gt; (Patch text oldHash newHash
    -&gt; Patch text oldHash newHash -&gt; Bool)
-&gt; (Patch text oldHash newHash
    -&gt; Patch text oldHash newHash -&gt; Bool)
-&gt; (Patch text oldHash newHash
    -&gt; Patch text oldHash newHash -&gt; Bool)
-&gt; (Patch text oldHash newHash
    -&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash)
-&gt; (Patch text oldHash newHash
    -&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash)
-&gt; Ord (Patch text oldHash newHash)
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Ordering
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Eq (Patch text oldHash newHash)
forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Ordering
forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
$ccompare :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Ordering
compare :: Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Ordering
$c&lt; :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
&lt; :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c&lt;= :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
&lt;= :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c&gt; :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
&gt; :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c&gt;= :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
&gt;= :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$cmax :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
max :: Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
$cmin :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
min :: Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679387798"><span id="local-6989586621679387799"><span id="local-6989586621679387800"><span id="local-6989586621679389475"><span id="local-6989586621679389478"><span id="local-6989586621679389481"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387798"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387799"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387800"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387798"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387799"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387800"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-306"></span><span>  </span><span id="local-6989586621679389497"><span class="annot"><span class="annottext">toJSON :: Patch text oldHash newHash -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span id="local-6989586621679389498"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679389498"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span id="local-6989586621679389499"><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679389499"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span id="local-6989586621679389500"><span class="annot"><span class="annottext">[newHash]
</span><a href="#local-6989586621679389500"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span id="local-6989586621679389501"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679389501"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-307"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-308"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [text] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679389498"><span class="hs-identifier hs-var">textLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-309"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;optional_hash_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [oldHash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679389499"><span class="hs-identifier hs-var">oldHashLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-310"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hash_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [newHash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[newHash]
</span><a href="#local-6989586621679389500"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-311"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Base64Bytes -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679389501"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-312"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679387822"><span id="local-6989586621679387823"><span id="local-6989586621679387824"><span id="local-6989586621679389507"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387822"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387823"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387824"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387822"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387823"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387824"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-315"></span><span>  </span><span id="local-6989586621679389523"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Patch text oldHash newHash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (Patch text oldHash newHash))
-&gt; Value
-&gt; Parser (Patch text oldHash newHash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Patch&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679389524"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389524"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-316"></span><span>    </span><span id="local-6989586621679389525"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679389525"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389524"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [text]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span>
</span><span id="line-317"></span><span>    </span><span id="local-6989586621679389526"><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679389526"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389524"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [oldHash]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;optional_hash_lookup&quot;</span></span><span>
</span><span id="line-318"></span><span>    </span><span id="local-6989586621679389527"><span class="annot"><span class="annottext">[newHash]
</span><a href="#local-6989586621679389527"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389524"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [newHash]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hash_lookup&quot;</span></span><span>
</span><span id="line-319"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679389528"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679389528"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389524"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Base64Bytes
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-320"></span><span>    </span><span class="annot"><span class="annottext">Patch text oldHash newHash -&gt; Parser (Patch text oldHash newHash)
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">[text]
[oldHash]
[newHash]
ByteString
$sel:newHashLookup:Patch :: [newHash]
$sel:textLookup:Patch :: [text]
$sel:oldHashLookup:Patch :: [oldHash]
$sel:bytes:Patch :: ByteString
textLookup :: [text]
oldHashLookup :: [oldHash]
newHashLookup :: [newHash]
bytes :: ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatch"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span id="local-6989586621679388107"><span id="local-6989586621679388108"><span id="local-6989586621679388109"><span id="local-6989586621679388110"><span id="local-6989586621679388111"><span class="annot"><a href="Unison.Sync.Types.html#patchOldHashes_"><span class="hs-identifier hs-type">patchOldHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679388107"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679388108"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679388107"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388109"><span class="hs-identifier hs-type">oldHash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388110"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388108"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388111"><span class="hs-identifier hs-type">newHash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679388107"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388110"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388109"><span class="hs-identifier hs-type">oldHash'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388111"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-323"></span><span id="patchOldHashes_"><span class="annot"><span class="annottext">patchOldHashes_ :: forall (m :: * -&gt; *) oldHash oldHash' text newHash.
Applicative m =&gt;
(oldHash -&gt; m oldHash')
-&gt; Patch text oldHash newHash -&gt; m (Patch text oldHash' newHash)
</span><a href="Unison.Sync.Types.html#patchOldHashes_"><span class="hs-identifier hs-var hs-var">patchOldHashes_</span></a></span></span><span> </span><span id="local-6989586621679389534"><span class="annot"><span class="annottext">oldHash -&gt; m oldHash'
</span><a href="#local-6989586621679389534"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679389535"><span id="local-6989586621679389536"><span id="local-6989586621679389537"><span id="local-6989586621679389538"><span class="annot"><span class="annottext">[oldHash]
[text]
[newHash]
ByteString
$sel:newHashLookup:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; [newHash]
$sel:textLookup:Patch :: forall text oldHash newHash. Patch text oldHash newHash -&gt; [text]
$sel:oldHashLookup:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; [oldHash]
$sel:bytes:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; ByteString
textLookup :: [text]
oldHashLookup :: [oldHash]
newHashLookup :: [newHash]
bytes :: ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatch"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-324"></span><span>  </span><span id="local-6989586621679389539"><span class="annot"><span class="annottext">[oldHash']
</span><a href="#local-6989586621679389539"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(oldHash -&gt; m oldHash') -&gt; [oldHash] -&gt; m [oldHash']
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">oldHash -&gt; m oldHash'
</span><a href="#local-6989586621679389534"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679389536"><span class="hs-identifier hs-var">oldHashLookup</span></a></span><span>
</span><span id="line-325"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">[oldHash']
[text]
[newHash]
ByteString
$sel:newHashLookup:Patch :: [newHash]
$sel:textLookup:Patch :: [text]
$sel:oldHashLookup:Patch :: [oldHash']
$sel:bytes:Patch :: ByteString
textLookup :: [text]
newHashLookup :: [newHash]
bytes :: ByteString
oldHashLookup :: [oldHash']
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatch"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span id="local-6989586621679387859"><span id="local-6989586621679387860"><span id="local-6989586621679387861"><span id="local-6989586621679387862"><span id="local-6989586621679387863"><span class="annot"><a href="Unison.Sync.Types.html#patchNewHashes_"><span class="hs-identifier hs-type">patchNewHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679387859"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387860"><span class="hs-identifier hs-type">newHash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387859"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387861"><span class="hs-identifier hs-type">newHash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387862"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387863"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387860"><span class="hs-identifier hs-type">newHash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387859"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387862"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387863"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387861"><span class="hs-identifier hs-type">newHash'</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-328"></span><span id="patchNewHashes_"><span class="annot"><span class="annottext">patchNewHashes_ :: forall (m :: * -&gt; *) newHash newHash' text oldHash.
Applicative m =&gt;
(newHash -&gt; m newHash')
-&gt; Patch text oldHash newHash -&gt; m (Patch text oldHash newHash')
</span><a href="Unison.Sync.Types.html#patchNewHashes_"><span class="hs-identifier hs-var hs-var">patchNewHashes_</span></a></span></span><span> </span><span id="local-6989586621679389545"><span class="annot"><span class="annottext">newHash -&gt; m newHash'
</span><a href="#local-6989586621679389545"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679389546"><span id="local-6989586621679389547"><span id="local-6989586621679389548"><span id="local-6989586621679389549"><span class="annot"><span class="annottext">[newHash]
[text]
[oldHash]
ByteString
$sel:newHashLookup:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; [newHash]
$sel:textLookup:Patch :: forall text oldHash newHash. Patch text oldHash newHash -&gt; [text]
$sel:oldHashLookup:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; [oldHash]
$sel:bytes:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; ByteString
textLookup :: [text]
oldHashLookup :: [oldHash]
newHashLookup :: [newHash]
bytes :: ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatch"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-329"></span><span>  </span><span id="local-6989586621679389550"><span class="annot"><span class="annottext">[newHash']
</span><a href="#local-6989586621679389550"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(newHash -&gt; m newHash') -&gt; [newHash] -&gt; m [newHash']
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">newHash -&gt; m newHash'
</span><a href="#local-6989586621679389545"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[newHash]
</span><a href="#local-6989586621679389548"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span>
</span><span id="line-330"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">[newHash']
[text]
[oldHash]
ByteString
$sel:newHashLookup:Patch :: [newHash']
$sel:textLookup:Patch :: [text]
$sel:oldHashLookup:Patch :: [oldHash]
$sel:bytes:Patch :: ByteString
textLookup :: [text]
oldHashLookup :: [oldHash]
bytes :: ByteString
newHashLookup :: [newHash']
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatch"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="hs-keyword">data</span><span> </span><span id="PatchDiff"><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-var">PatchDiff</span></a></span></span><span> </span><span id="local-6989586621679387897"><span class="annot"><a href="#local-6989586621679387897"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679387898"><span class="annot"><a href="#local-6989586621679387898"><span class="hs-identifier hs-type">oldHash</span></a></span></span><span> </span><span id="local-6989586621679387899"><span class="annot"><a href="#local-6989586621679387899"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PatchDiff"><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-var">PatchDiff</span></a></span></span><span>
</span><span id="line-333"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Aparent%3APatchDiff"><span class="annot"><span class="annottext">forall text oldHash hash. PatchDiff text oldHash hash -&gt; hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3APatchDiff"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679387899"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-334"></span><span>    </span><span id="%24sel%3AtextLookup%3APatchDiff"><span class="annot"><span class="annottext">forall text oldHash hash. PatchDiff text oldHash hash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3AtextLookup%3APatchDiff"><span class="hs-identifier hs-var hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387897"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-335"></span><span>    </span><span id="%24sel%3AoldHashLookup%3APatchDiff"><span class="annot"><span class="annottext">forall text oldHash hash. PatchDiff text oldHash hash -&gt; [oldHash]
</span><a href="Unison.Sync.Types.html#%24sel%3AoldHashLookup%3APatchDiff"><span class="hs-identifier hs-var hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387898"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-336"></span><span>    </span><span id="%24sel%3AnewHashLookup%3APatchDiff"><span class="annot"><span class="annottext">forall text oldHash hash. PatchDiff text oldHash hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatchDiff"><span class="hs-identifier hs-var hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387899"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-337"></span><span>    </span><span id="%24sel%3Abytes%3APatchDiff"><span class="annot"><span class="annottext">forall text oldHash hash. PatchDiff text oldHash hash -&gt; ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3APatchDiff"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-338"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-339"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679389558"><span id="local-6989586621679389565"><span class="annot"><span class="annottext">PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
(PatchDiff text oldHash hash
 -&gt; PatchDiff text oldHash hash -&gt; Bool)
-&gt; (PatchDiff text oldHash hash
    -&gt; PatchDiff text oldHash hash -&gt; Bool)
-&gt; Eq (PatchDiff text oldHash hash)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text oldHash hash.
(Eq hash, Eq text, Eq oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c== :: forall text oldHash hash.
(Eq hash, Eq text, Eq oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
== :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c/= :: forall text oldHash hash.
(Eq hash, Eq text, Eq oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
/= :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389576"><span id="local-6989586621679389583"><span id="local-6989586621679389590"><span id="local-6989586621679389593"><span id="local-6989586621679389596"><span id="local-6989586621679389599"><span id="local-6989586621679389602"><span class="annot"><span class="annottext">Eq (PatchDiff text oldHash hash)
Eq (PatchDiff text oldHash hash) =&gt;
(PatchDiff text oldHash hash
 -&gt; PatchDiff text oldHash hash -&gt; Ordering)
-&gt; (PatchDiff text oldHash hash
    -&gt; PatchDiff text oldHash hash -&gt; Bool)
-&gt; (PatchDiff text oldHash hash
    -&gt; PatchDiff text oldHash hash -&gt; Bool)
-&gt; (PatchDiff text oldHash hash
    -&gt; PatchDiff text oldHash hash -&gt; Bool)
-&gt; (PatchDiff text oldHash hash
    -&gt; PatchDiff text oldHash hash -&gt; Bool)
-&gt; (PatchDiff text oldHash hash
    -&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash)
-&gt; (PatchDiff text oldHash hash
    -&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash)
-&gt; Ord (PatchDiff text oldHash hash)
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; Ordering
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
Eq (PatchDiff text oldHash hash)
forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; Ordering
forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
$ccompare :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; Ordering
compare :: PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; Ordering
$c&lt; :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
&lt; :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c&lt;= :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
&lt;= :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c&gt; :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
&gt; :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c&gt;= :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
&gt;= :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$cmax :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
max :: PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
$cmin :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
min :: PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389608"><span id="local-6989586621679389616"><span id="local-6989586621679389619"><span class="annot"><span class="annottext">Int -&gt; PatchDiff text oldHash hash -&gt; ShowS
[PatchDiff text oldHash hash] -&gt; ShowS
PatchDiff text oldHash hash -&gt; String
(Int -&gt; PatchDiff text oldHash hash -&gt; ShowS)
-&gt; (PatchDiff text oldHash hash -&gt; String)
-&gt; ([PatchDiff text oldHash hash] -&gt; ShowS)
-&gt; Show (PatchDiff text oldHash hash)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
Int -&gt; PatchDiff text oldHash hash -&gt; ShowS
forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
[PatchDiff text oldHash hash] -&gt; ShowS
forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
PatchDiff text oldHash hash -&gt; String
$cshowsPrec :: forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
Int -&gt; PatchDiff text oldHash hash -&gt; ShowS
showsPrec :: Int -&gt; PatchDiff text oldHash hash -&gt; ShowS
$cshow :: forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
PatchDiff text oldHash hash -&gt; String
show :: PatchDiff text oldHash hash -&gt; String
$cshowList :: forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
[PatchDiff text oldHash hash] -&gt; ShowS
showList :: [PatchDiff text oldHash hash] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679387801"><span id="local-6989586621679387802"><span id="local-6989586621679387803"><span id="local-6989586621679389626"><span id="local-6989586621679389629"><span id="local-6989586621679389632"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387801"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387802"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387803"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387801"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387802"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387803"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-342"></span><span>  </span><span id="local-6989586621679389651"><span class="annot"><span class="annottext">toJSON :: PatchDiff text oldHash hash -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span id="local-6989586621679389652"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679389652"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621679389653"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679389653"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span id="local-6989586621679389654"><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679389654"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span id="local-6989586621679389655"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679389655"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span id="local-6989586621679389656"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679389656"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-343"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-344"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; hash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679389652"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-345"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [text] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679389653"><span class="hs-identifier hs-var">textLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-346"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;optional_hash_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [oldHash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679389654"><span class="hs-identifier hs-var">oldHashLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-347"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hash_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [hash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679389655"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-348"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Base64Bytes -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679389656"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-349"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679387825"><span id="local-6989586621679387826"><span id="local-6989586621679387827"><span id="local-6989586621679389662"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387825"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387826"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387827"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387825"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387826"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387827"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-352"></span><span>  </span><span id="local-6989586621679389681"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (PatchDiff text oldHash hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (PatchDiff text oldHash hash))
-&gt; Value
-&gt; Parser (PatchDiff text oldHash hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PatchDiff&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679389682"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389682"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-353"></span><span>    </span><span id="local-6989586621679389683"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679389683"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389682"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser hash
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span>
</span><span id="line-354"></span><span>    </span><span id="local-6989586621679389684"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679389684"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389682"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [text]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span>
</span><span id="line-355"></span><span>    </span><span id="local-6989586621679389685"><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679389685"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389682"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [oldHash]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;optional_hash_lookup&quot;</span></span><span>
</span><span id="line-356"></span><span>    </span><span id="local-6989586621679389686"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679389686"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389682"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [hash]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hash_lookup&quot;</span></span><span>
</span><span id="line-357"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679389687"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679389687"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389682"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Base64Bytes
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-358"></span><span>    </span><span class="annot"><span class="annottext">PatchDiff text oldHash hash -&gt; Parser (PatchDiff text oldHash hash)
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash
[text]
[oldHash]
[hash]
ByteString
$sel:parent:PatchDiff :: hash
$sel:newHashLookup:PatchDiff :: [hash]
$sel:textLookup:PatchDiff :: [text]
$sel:oldHashLookup:PatchDiff :: [oldHash]
$sel:bytes:PatchDiff :: ByteString
parent :: hash
textLookup :: [text]
oldHashLookup :: [oldHash]
newHashLookup :: [hash]
bytes :: ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3APatchDiff"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-359"></span><span>
</span><span id="line-360"></span><span id="local-6989586621679387864"><span id="local-6989586621679387865"><span id="local-6989586621679387866"><span id="local-6989586621679387867"><span id="local-6989586621679387868"><span class="annot"><a href="Unison.Sync.Types.html#patchDiffHashes_"><span class="hs-identifier hs-type">patchDiffHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679387864"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387865"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387864"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387866"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387867"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387868"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387865"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387864"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387867"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387868"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387866"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-361"></span><span id="patchDiffHashes_"><span class="annot"><span class="annottext">patchDiffHashes_ :: forall (m :: * -&gt; *) hash hash' text noSyncHash.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; PatchDiff text noSyncHash hash
-&gt; m (PatchDiff text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#patchDiffHashes_"><span class="hs-identifier hs-var hs-var">patchDiffHashes_</span></a></span></span><span> </span><span id="local-6989586621679389694"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679389694"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679389695"><span id="local-6989586621679389696"><span id="local-6989586621679389697"><span id="local-6989586621679389698"><span id="local-6989586621679389699"><span class="annot"><span class="annottext">hash
[hash]
[text]
[noSyncHash]
ByteString
$sel:parent:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; hash
$sel:newHashLookup:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; [hash]
$sel:textLookup:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; [text]
$sel:oldHashLookup:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; [oldHash]
$sel:bytes:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; ByteString
parent :: hash
textLookup :: [text]
oldHashLookup :: [noSyncHash]
newHashLookup :: [hash]
bytes :: ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3APatchDiff"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-362"></span><span>  </span><span id="local-6989586621679389700"><span class="annot"><span class="annottext">hash'
</span><a href="#local-6989586621679389700"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679389694"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679389695"><span class="hs-identifier hs-var">parent</span></a></span><span>
</span><span id="line-363"></span><span>  </span><span id="local-6989586621679389701"><span class="annot"><span class="annottext">[hash']
</span><a href="#local-6989586621679389701"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash') -&gt; [hash] -&gt; m [hash']
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679389694"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679389698"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span>
</span><span id="line-364"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash'
[hash']
[text]
[noSyncHash]
ByteString
$sel:parent:PatchDiff :: hash'
$sel:newHashLookup:PatchDiff :: [hash']
$sel:textLookup:PatchDiff :: [text]
$sel:oldHashLookup:PatchDiff :: [noSyncHash]
$sel:bytes:PatchDiff :: ByteString
textLookup :: [text]
oldHashLookup :: [noSyncHash]
bytes :: ByteString
parent :: hash'
newHashLookup :: [hash']
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3APatchDiff"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-365"></span><span>
</span><span id="line-366"></span><span class="hs-keyword">data</span><span> </span><span id="Namespace"><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-var">Namespace</span></a></span></span><span> </span><span id="local-6989586621679387901"><span class="annot"><a href="#local-6989586621679387901"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679387902"><span class="annot"><a href="#local-6989586621679387902"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Namespace"><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-var">Namespace</span></a></span></span><span>
</span><span id="line-367"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AtextLookup%3ANamespace"><span class="annot"><span class="annottext">forall text hash. Namespace text hash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3AtextLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387901"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-368"></span><span>    </span><span id="%24sel%3AdefnLookup%3ANamespace"><span class="annot"><span class="annottext">forall text hash. Namespace text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AdefnLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387902"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-369"></span><span>    </span><span id="%24sel%3ApatchLookup%3ANamespace"><span class="annot"><span class="annottext">forall text hash. Namespace text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3ApatchLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387902"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-370"></span><span>    </span><span id="%24sel%3AchildLookup%3ANamespace"><span class="annot"><span class="annottext">forall text hash. Namespace text hash -&gt; [(hash, hash)]
</span><a href="Unison.Sync.Types.html#%24sel%3AchildLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387902"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679387902"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- (namespace hash, causal hash)</span><span>
</span><span id="line-371"></span><span>    </span><span id="%24sel%3Abytes%3ANamespace"><span class="annot"><span class="annottext">forall text hash. Namespace text hash -&gt; LocalBranchBytes
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3ANamespace"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalBranchBytes</span></span><span>
</span><span id="line-372"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-373"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679389707"><span id="local-6989586621679389716"><span class="annot"><span class="annottext">Namespace text hash -&gt; Namespace text hash -&gt; Bool
(Namespace text hash -&gt; Namespace text hash -&gt; Bool)
-&gt; (Namespace text hash -&gt; Namespace text hash -&gt; Bool)
-&gt; Eq (Namespace text hash)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq text, Eq hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c== :: forall text hash.
(Eq text, Eq hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
== :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c/= :: forall text hash.
(Eq text, Eq hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
/= :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389719"><span id="local-6989586621679389724"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; Namespace text a -&gt; Namespace text b)
-&gt; (forall a b. a -&gt; Namespace text b -&gt; Namespace text a)
-&gt; Functor (Namespace text)
forall a b. a -&gt; Namespace text b -&gt; Namespace text a
forall a b. (a -&gt; b) -&gt; Namespace text a -&gt; Namespace text b
forall text a b. a -&gt; Namespace text b -&gt; Namespace text a
forall text a b. (a -&gt; b) -&gt; Namespace text a -&gt; Namespace text b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall text a b. (a -&gt; b) -&gt; Namespace text a -&gt; Namespace text b
fmap :: forall a b. (a -&gt; b) -&gt; Namespace text a -&gt; Namespace text b
$c&lt;$ :: forall text a b. a -&gt; Namespace text b -&gt; Namespace text a
&lt;$ :: forall a b. a -&gt; Namespace text b -&gt; Namespace text a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389736"><span id="local-6989586621679389745"><span id="local-6989586621679389753"><span id="local-6989586621679389756"><span id="local-6989586621679389759"><span id="local-6989586621679389762"><span id="local-6989586621679389765"><span class="annot"><span class="annottext">Eq (Namespace text hash)
Eq (Namespace text hash) =&gt;
(Namespace text hash -&gt; Namespace text hash -&gt; Ordering)
-&gt; (Namespace text hash -&gt; Namespace text hash -&gt; Bool)
-&gt; (Namespace text hash -&gt; Namespace text hash -&gt; Bool)
-&gt; (Namespace text hash -&gt; Namespace text hash -&gt; Bool)
-&gt; (Namespace text hash -&gt; Namespace text hash -&gt; Bool)
-&gt; (Namespace text hash
    -&gt; Namespace text hash -&gt; Namespace text hash)
-&gt; (Namespace text hash
    -&gt; Namespace text hash -&gt; Namespace text hash)
-&gt; Ord (Namespace text hash)
Namespace text hash -&gt; Namespace text hash -&gt; Bool
Namespace text hash -&gt; Namespace text hash -&gt; Ordering
Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall text hash. (Ord text, Ord hash) =&gt; Eq (Namespace text hash)
forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Ordering
forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
$ccompare :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Ordering
compare :: Namespace text hash -&gt; Namespace text hash -&gt; Ordering
$c&lt; :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
&lt; :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
&lt;= :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
&gt; :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
&gt;= :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$cmax :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
max :: Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
$cmin :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
min :: Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389770"><span id="local-6989586621679389780"><span id="local-6989586621679389783"><span class="annot"><span class="annottext">Int -&gt; Namespace text hash -&gt; ShowS
[Namespace text hash] -&gt; ShowS
Namespace text hash -&gt; String
(Int -&gt; Namespace text hash -&gt; ShowS)
-&gt; (Namespace text hash -&gt; String)
-&gt; ([Namespace text hash] -&gt; ShowS)
-&gt; Show (Namespace text hash)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; Namespace text hash -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
[Namespace text hash] -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
Namespace text hash -&gt; String
$cshowsPrec :: forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; Namespace text hash -&gt; ShowS
showsPrec :: Int -&gt; Namespace text hash -&gt; ShowS
$cshow :: forall text hash.
(Show text, Show hash) =&gt;
Namespace text hash -&gt; String
show :: Namespace text hash -&gt; String
$cshowList :: forall text hash.
(Show text, Show hash) =&gt;
[Namespace text hash] -&gt; ShowS
showList :: [Namespace text hash] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679389786"><span id="local-6989586621679389793"><span id="local-6989586621679389796"><span class="annot"><span class="hs-identifier hs-type">Bifoldable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-376"></span><span>  </span><span id="local-6989586621679389801"><span class="annot"><span class="annottext">bifoldMap :: forall m a b.
Monoid m =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; Namespace a b -&gt; m
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">bifoldMap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m) -&gt; (b -&gt; m) -&gt; Namespace a b -&gt; m
forall (t :: * -&gt; * -&gt; *) m a b.
(Bitraversable t, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; t a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMapDefault</span></span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679389806"><span id="local-6989586621679389810"><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-379"></span><span>  </span><span id="local-6989586621679389813"><span class="annot"><span class="annottext">bimap :: forall a b c d.
(a -&gt; b) -&gt; (c -&gt; d) -&gt; Namespace a c -&gt; Namespace b d
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">bimap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; (c -&gt; d) -&gt; Namespace a c -&gt; Namespace b d
forall (t :: * -&gt; * -&gt; *) a b c d.
Bitraversable t =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; t a c -&gt; t b d
</span><span class="hs-identifier hs-var">bimapDefault</span></span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bitraversable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-382"></span><span>  </span><span id="local-6989586621679389838"><span class="annot"><span class="annottext">bitraverse :: forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; Namespace a b -&gt; f (Namespace c d)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">bitraverse</span></span></span><span> </span><span id="local-6989586621679389839"><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679389839"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679389840"><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679389840"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span id="local-6989586621679389841"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679389841"><span class="hs-identifier hs-var">tl</span></a></span></span><span> </span><span id="local-6989586621679389842"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679389842"><span class="hs-identifier hs-var">dl</span></a></span></span><span> </span><span id="local-6989586621679389843"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679389843"><span class="hs-identifier hs-var">pl</span></a></span></span><span> </span><span id="local-6989586621679389844"><span class="annot"><span class="annottext">[(b, b)]
</span><a href="#local-6989586621679389844"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span id="local-6989586621679389845"><span class="annot"><span class="annottext">LocalBranchBytes
</span><a href="#local-6989586621679389845"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-383"></span><span>    </span><span class="annot"><span class="annottext">[c] -&gt; [d] -&gt; [d] -&gt; [(d, d)] -&gt; LocalBranchBytes -&gt; Namespace c d
forall text hash.
[text]
-&gt; [hash]
-&gt; [hash]
-&gt; [(hash, hash)]
-&gt; LocalBranchBytes
-&gt; Namespace text hash
</span><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-var">Namespace</span></a></span><span>
</span><span id="line-384"></span><span>      </span><span class="annot"><span class="annottext">([c]
 -&gt; [d] -&gt; [d] -&gt; [(d, d)] -&gt; LocalBranchBytes -&gt; Namespace c d)
-&gt; f [c]
-&gt; f ([d] -&gt; [d] -&gt; [(d, d)] -&gt; LocalBranchBytes -&gt; Namespace c d)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; f c) -&gt; [a] -&gt; f [c]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679389839"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679389841"><span class="hs-identifier hs-var">tl</span></a></span><span>
</span><span id="line-385"></span><span>      </span><span class="annot"><span class="annottext">f ([d] -&gt; [d] -&gt; [(d, d)] -&gt; LocalBranchBytes -&gt; Namespace c d)
-&gt; f [d]
-&gt; f ([d] -&gt; [(d, d)] -&gt; LocalBranchBytes -&gt; Namespace c d)
forall a b. f (a -&gt; b) -&gt; f a -&gt; f b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(b -&gt; f d) -&gt; [b] -&gt; f [d]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679389840"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679389842"><span class="hs-identifier hs-var">dl</span></a></span><span>
</span><span id="line-386"></span><span>      </span><span class="annot"><span class="annottext">f ([d] -&gt; [(d, d)] -&gt; LocalBranchBytes -&gt; Namespace c d)
-&gt; f [d] -&gt; f ([(d, d)] -&gt; LocalBranchBytes -&gt; Namespace c d)
forall a b. f (a -&gt; b) -&gt; f a -&gt; f b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(b -&gt; f d) -&gt; [b] -&gt; f [d]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679389840"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679389843"><span class="hs-identifier hs-var">pl</span></a></span><span>
</span><span id="line-387"></span><span>      </span><span class="annot"><span class="annottext">f ([(d, d)] -&gt; LocalBranchBytes -&gt; Namespace c d)
-&gt; f [(d, d)] -&gt; f (LocalBranchBytes -&gt; Namespace c d)
forall a b. f (a -&gt; b) -&gt; f a -&gt; f b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">((b, b) -&gt; f (d, d)) -&gt; [(b, b)] -&gt; f [(d, d)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(b -&gt; f d) -&gt; (b -&gt; f d) -&gt; (b, b) -&gt; f (d, d)
forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; (a, b) -&gt; f (c, d)
forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679389840"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679389840"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(b, b)]
</span><a href="#local-6989586621679389844"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-388"></span><span>      </span><span class="annot"><span class="annottext">f (LocalBranchBytes -&gt; Namespace c d)
-&gt; f LocalBranchBytes -&gt; f (Namespace c d)
forall a b. f (a -&gt; b) -&gt; f a -&gt; f b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">LocalBranchBytes -&gt; f LocalBranchBytes
forall a. a -&gt; f a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">LocalBranchBytes
</span><a href="#local-6989586621679389845"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679387804"><span id="local-6989586621679387805"><span id="local-6989586621679389850"><span id="local-6989586621679389853"><span id="local-6989586621679389856"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387804"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387805"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387804"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387805"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-391"></span><span>  </span><span id="local-6989586621679389877"><span class="annot"><span class="annottext">toJSON :: Namespace text hash -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span id="local-6989586621679389878"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679389878"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span id="local-6989586621679389879"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679389879"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span id="local-6989586621679389880"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679389880"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span id="local-6989586621679389881"><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679389881"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LocalBranchBytes</span></span><span> </span><span id="local-6989586621679389883"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679389883"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-392"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-393"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [text] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679389878"><span class="hs-identifier hs-var">textLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-394"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;defn_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [hash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679389879"><span class="hs-identifier hs-var">defnLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-395"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;patch_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [hash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679389880"><span class="hs-identifier hs-var">patchLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-396"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [(hash, hash)] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679389881"><span class="hs-identifier hs-var">childLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-397"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Base64Bytes -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679389883"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-398"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679387828"><span id="local-6989586621679387829"><span id="local-6989586621679389888"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387828"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387829"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387828"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387829"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-401"></span><span>  </span><span id="local-6989586621679389909"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Namespace text hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (Namespace text hash))
-&gt; Value
-&gt; Parser (Namespace text hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Namespace&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679389910"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389910"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-402"></span><span>    </span><span id="local-6989586621679389911"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679389911"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389910"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [text]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span>
</span><span id="line-403"></span><span>    </span><span id="local-6989586621679389912"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679389912"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389910"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [hash]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;defn_lookup&quot;</span></span><span>
</span><span id="line-404"></span><span>    </span><span id="local-6989586621679389913"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679389913"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389910"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [hash]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;patch_lookup&quot;</span></span><span>
</span><span id="line-405"></span><span>    </span><span id="local-6989586621679389914"><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679389914"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389910"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [(hash, hash)]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child_lookup&quot;</span></span><span>
</span><span id="line-406"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679389915"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679389915"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679389910"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Base64Bytes
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-407"></span><span>    </span><span class="annot"><span class="annottext">Namespace text hash -&gt; Parser (Namespace text hash)
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:bytes:Namespace :: LocalBranchBytes
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3ANamespace"><span class="hs-identifier hs-var">bytes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; LocalBranchBytes
</span><span class="hs-identifier hs-var">LocalBranchBytes</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679389915"><span class="hs-identifier hs-var">bytes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[text]
[hash]
[(hash, hash)]
$sel:defnLookup:Namespace :: [hash]
$sel:patchLookup:Namespace :: [hash]
$sel:childLookup:Namespace :: [(hash, hash)]
$sel:textLookup:Namespace :: [text]
textLookup :: [text]
defnLookup :: [hash]
patchLookup :: [hash]
childLookup :: [(hash, hash)]
</span><a href="Unison.Sync.Types.html#%24sel%3AdefnLookup%3ANamespace"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-408"></span><span>
</span><span id="line-409"></span><span class="hs-keyword">data</span><span> </span><span id="NamespaceDiff"><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-var">NamespaceDiff</span></a></span></span><span> </span><span id="local-6989586621679387905"><span class="annot"><a href="#local-6989586621679387905"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679387906"><span class="annot"><a href="#local-6989586621679387906"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NamespaceDiff"><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-var">NamespaceDiff</span></a></span></span><span>
</span><span id="line-410"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Aparent%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679387906"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-411"></span><span>    </span><span id="%24sel%3AtextLookup%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3AtextLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387905"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-412"></span><span>    </span><span id="%24sel%3AdefnLookup%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AdefnLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387906"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-413"></span><span>    </span><span id="%24sel%3ApatchLookup%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3ApatchLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387906"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-414"></span><span>    </span><span id="%24sel%3AchildLookup%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; [(hash, hash)]
</span><a href="Unison.Sync.Types.html#%24sel%3AchildLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387906"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679387906"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- (namespace hash, causal hash)</span><span>
</span><span id="line-415"></span><span>    </span><span id="%24sel%3Abytes%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; LocalBranchBytes
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalBranchBytes</span></span><span>
</span><span id="line-416"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-417"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679389921"><span id="local-6989586621679389930"><span class="annot"><span class="annottext">NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
(NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool)
-&gt; (NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool)
-&gt; Eq (NamespaceDiff text hash)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq hash, Eq text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c== :: forall text hash.
(Eq hash, Eq text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
== :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c/= :: forall text hash.
(Eq hash, Eq text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
/= :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389939"><span id="local-6989586621679389948"><span id="local-6989586621679389957"><span id="local-6989586621679389960"><span id="local-6989586621679389963"><span id="local-6989586621679389966"><span id="local-6989586621679389969"><span class="annot"><span class="annottext">Eq (NamespaceDiff text hash)
Eq (NamespaceDiff text hash) =&gt;
(NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering)
-&gt; (NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool)
-&gt; (NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool)
-&gt; (NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool)
-&gt; (NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool)
-&gt; (NamespaceDiff text hash
    -&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash)
-&gt; (NamespaceDiff text hash
    -&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash)
-&gt; Ord (NamespaceDiff text hash)
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering
NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall text hash.
(Ord hash, Ord text) =&gt;
Eq (NamespaceDiff text hash)
forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering
forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
$ccompare :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering
compare :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering
$c&lt; :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
&lt; :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
&lt;= :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
&gt; :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
&gt;= :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$cmax :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
max :: NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
$cmin :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
min :: NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679389974"><span id="local-6989586621679389984"><span id="local-6989586621679389987"><span class="annot"><span class="annottext">Int -&gt; NamespaceDiff text hash -&gt; ShowS
[NamespaceDiff text hash] -&gt; ShowS
NamespaceDiff text hash -&gt; String
(Int -&gt; NamespaceDiff text hash -&gt; ShowS)
-&gt; (NamespaceDiff text hash -&gt; String)
-&gt; ([NamespaceDiff text hash] -&gt; ShowS)
-&gt; Show (NamespaceDiff text hash)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show hash, Show text) =&gt;
Int -&gt; NamespaceDiff text hash -&gt; ShowS
forall text hash.
(Show hash, Show text) =&gt;
[NamespaceDiff text hash] -&gt; ShowS
forall text hash.
(Show hash, Show text) =&gt;
NamespaceDiff text hash -&gt; String
$cshowsPrec :: forall text hash.
(Show hash, Show text) =&gt;
Int -&gt; NamespaceDiff text hash -&gt; ShowS
showsPrec :: Int -&gt; NamespaceDiff text hash -&gt; ShowS
$cshow :: forall text hash.
(Show hash, Show text) =&gt;
NamespaceDiff text hash -&gt; String
show :: NamespaceDiff text hash -&gt; String
$cshowList :: forall text hash.
(Show hash, Show text) =&gt;
[NamespaceDiff text hash] -&gt; ShowS
showList :: [NamespaceDiff text hash] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span>
</span><span id="line-419"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679387806"><span id="local-6989586621679387807"><span id="local-6989586621679389993"><span id="local-6989586621679389996"><span id="local-6989586621679389999"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387806"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387807"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387806"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387807"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-420"></span><span>  </span><span id="local-6989586621679390022"><span class="annot"><span class="annottext">toJSON :: NamespaceDiff text hash -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span id="local-6989586621679390023"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679390023"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621679390024"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679390024"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span id="local-6989586621679390025"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679390025"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span id="local-6989586621679390026"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679390026"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span id="local-6989586621679390027"><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679390027"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LocalBranchBytes</span></span><span> </span><span id="local-6989586621679390028"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679390028"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-421"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-422"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; hash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679390023"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-423"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [text] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679390024"><span class="hs-identifier hs-var">textLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-424"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;defn_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [hash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679390025"><span class="hs-identifier hs-var">defnLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-425"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;patch_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [hash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679390026"><span class="hs-identifier hs-var">patchLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-426"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [(hash, hash)] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679390027"><span class="hs-identifier hs-var">childLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-427"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Base64Bytes -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679390028"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-428"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-429"></span><span>
</span><span id="line-430"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679387830"><span id="local-6989586621679387831"><span id="local-6989586621679390033"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387830"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387831"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387830"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387831"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-431"></span><span>  </span><span id="local-6989586621679390056"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (NamespaceDiff text hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (NamespaceDiff text hash))
-&gt; Value
-&gt; Parser (NamespaceDiff text hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NamespaceDiff&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679390057"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390057"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-432"></span><span>    </span><span id="local-6989586621679390058"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679390058"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390057"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser hash
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span>
</span><span id="line-433"></span><span>    </span><span id="local-6989586621679390059"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679390059"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390057"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [text]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span>
</span><span id="line-434"></span><span>    </span><span id="local-6989586621679390060"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679390060"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390057"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [hash]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;defn_lookup&quot;</span></span><span>
</span><span id="line-435"></span><span>    </span><span id="local-6989586621679390061"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679390061"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390057"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [hash]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;patch_lookup&quot;</span></span><span>
</span><span id="line-436"></span><span>    </span><span id="local-6989586621679390062"><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679390062"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390057"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [(hash, hash)]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child_lookup&quot;</span></span><span>
</span><span id="line-437"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679390063"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679390063"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390057"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Base64Bytes
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-438"></span><span>    </span><span class="annot"><span class="annottext">NamespaceDiff text hash -&gt; Parser (NamespaceDiff text hash)
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:bytes:NamespaceDiff :: LocalBranchBytes
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3ANamespaceDiff"><span class="hs-identifier hs-var">bytes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; LocalBranchBytes
</span><span class="hs-identifier hs-var">LocalBranchBytes</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679390063"><span class="hs-identifier hs-var">bytes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hash
[text]
[hash]
[(hash, hash)]
$sel:parent:NamespaceDiff :: hash
$sel:defnLookup:NamespaceDiff :: [hash]
$sel:patchLookup:NamespaceDiff :: [hash]
$sel:childLookup:NamespaceDiff :: [(hash, hash)]
$sel:textLookup:NamespaceDiff :: [text]
parent :: hash
textLookup :: [text]
defnLookup :: [hash]
patchLookup :: [hash]
childLookup :: [(hash, hash)]
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3ANamespaceDiff"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-439"></span><span>
</span><span id="line-440"></span><span id="local-6989586621679387869"><span id="local-6989586621679387870"><span id="local-6989586621679387871"><span id="local-6989586621679387872"><span class="annot"><a href="Unison.Sync.Types.html#namespaceDiffHashes_"><span class="hs-identifier hs-type">namespaceDiffHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679387869"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387870"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387869"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387871"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387872"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387870"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387869"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387872"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387871"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-441"></span><span id="namespaceDiffHashes_"><span class="annot"><span class="annottext">namespaceDiffHashes_ :: forall (m :: * -&gt; *) hash hash' text.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; NamespaceDiff text hash -&gt; m (NamespaceDiff text hash')
</span><a href="Unison.Sync.Types.html#namespaceDiffHashes_"><span class="hs-identifier hs-var hs-var">namespaceDiffHashes_</span></a></span></span><span> </span><span id="local-6989586621679390078"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679390078"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679390079"><span id="local-6989586621679390080"><span id="local-6989586621679390081"><span id="local-6989586621679390082"><span id="local-6989586621679390083"><span id="local-6989586621679390084"><span class="annot"><span class="annottext">hash
[hash]
[text]
[(hash, hash)]
LocalBranchBytes
$sel:parent:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; hash
$sel:defnLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [hash]
$sel:patchLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [hash]
$sel:childLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [(hash, hash)]
$sel:textLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [text]
$sel:bytes:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; LocalBranchBytes
parent :: hash
textLookup :: [text]
defnLookup :: [hash]
patchLookup :: [hash]
childLookup :: [(hash, hash)]
bytes :: LocalBranchBytes
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3ANamespaceDiff"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-442"></span><span>  </span><span id="local-6989586621679390085"><span class="annot"><span class="annottext">hash'
</span><a href="#local-6989586621679390085"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679390078"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679390079"><span class="hs-identifier hs-var">parent</span></a></span><span>
</span><span id="line-443"></span><span>  </span><span id="local-6989586621679390086"><span class="annot"><span class="annottext">[hash']
</span><a href="#local-6989586621679390086"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash') -&gt; [hash] -&gt; m [hash']
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679390078"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679390081"><span class="hs-identifier hs-var">defnLookup</span></a></span><span>
</span><span id="line-444"></span><span>  </span><span id="local-6989586621679390087"><span class="annot"><span class="annottext">[hash']
</span><a href="#local-6989586621679390087"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash') -&gt; [hash] -&gt; m [hash']
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679390078"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679390082"><span class="hs-identifier hs-var">patchLookup</span></a></span><span>
</span><span id="line-445"></span><span>  </span><span id="local-6989586621679390088"><span class="annot"><span class="annottext">[(hash', hash')]
</span><a href="#local-6989586621679390088"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LensLike m [(hash, hash)] [(hash', hash')] hash hash'
-&gt; LensLike m [(hash, hash)] [(hash', hash')] hash hash'
forall (f :: * -&gt; *) s t a b.
LensLike f s t a b -&gt; LensLike f s t a b
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((hash, hash) -&gt; m (hash', hash'))
-&gt; [(hash, hash)] -&gt; m [(hash', hash')]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">(((hash, hash) -&gt; m (hash', hash'))
 -&gt; [(hash, hash)] -&gt; m [(hash', hash')])
-&gt; ((hash -&gt; m hash') -&gt; (hash, hash) -&gt; m (hash', hash'))
-&gt; LensLike m [(hash, hash)] [(hash', hash')] hash hash'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash') -&gt; (hash, hash) -&gt; m (hash', hash')
Traversal (hash, hash) (hash', hash') hash hash'
forall (r :: * -&gt; * -&gt; *) a b.
Bitraversable r =&gt;
Traversal (r a a) (r b b) a b
</span><span class="hs-identifier hs-var">both</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679390078"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679390083"><span class="hs-identifier hs-var">childLookup</span></a></span><span>
</span><span id="line-446"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash'
[hash']
[text]
[(hash', hash')]
LocalBranchBytes
$sel:parent:NamespaceDiff :: hash'
$sel:defnLookup:NamespaceDiff :: [hash']
$sel:patchLookup:NamespaceDiff :: [hash']
$sel:childLookup:NamespaceDiff :: [(hash', hash')]
$sel:textLookup:NamespaceDiff :: [text]
$sel:bytes:NamespaceDiff :: LocalBranchBytes
textLookup :: [text]
bytes :: LocalBranchBytes
parent :: hash'
defnLookup :: [hash']
patchLookup :: [hash']
childLookup :: [(hash', hash')]
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3ANamespaceDiff"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-447"></span><span>
</span><span id="line-448"></span><span class="hs-comment">-- Client _may_ choose not to download the namespace entity in the future, but</span><span>
</span><span id="line-449"></span><span class="hs-comment">-- we still send them the hash/hashjwt.</span><span>
</span><span id="line-450"></span><span class="hs-keyword">data</span><span> </span><span id="Causal"><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-var">Causal</span></a></span></span><span> </span><span id="local-6989586621679387908"><span class="annot"><a href="#local-6989586621679387908"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Causal"><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-var">Causal</span></a></span></span><span>
</span><span id="line-451"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AnamespaceHash%3ACausal"><span class="annot"><span class="annottext">forall hash. Causal hash -&gt; hash
</span><a href="Unison.Sync.Types.html#%24sel%3AnamespaceHash%3ACausal"><span class="hs-identifier hs-var hs-var">namespaceHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679387908"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-452"></span><span>    </span><span id="%24sel%3Aparents%3ACausal"><span class="annot"><span class="annottext">forall hash. Causal hash -&gt; Set hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparents%3ACausal"><span class="hs-identifier hs-var hs-var">parents</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621679387908"><span class="hs-identifier hs-type">hash</span></a></span><span>
</span><span id="line-453"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-454"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679390091"><span id="local-6989586621679390096"><span class="annot"><span class="annottext">Causal hash -&gt; Causal hash -&gt; Bool
(Causal hash -&gt; Causal hash -&gt; Bool)
-&gt; (Causal hash -&gt; Causal hash -&gt; Bool) -&gt; Eq (Causal hash)
forall hash. Eq hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall hash. Eq hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
== :: Causal hash -&gt; Causal hash -&gt; Bool
$c/= :: forall hash. Eq hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
/= :: Causal hash -&gt; Causal hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679390103"><span id="local-6989586621679390108"><span id="local-6989586621679390112"><span id="local-6989586621679390115"><span id="local-6989586621679390118"><span id="local-6989586621679390121"><span id="local-6989586621679390124"><span class="annot"><span class="annottext">Eq (Causal hash)
Eq (Causal hash) =&gt;
(Causal hash -&gt; Causal hash -&gt; Ordering)
-&gt; (Causal hash -&gt; Causal hash -&gt; Bool)
-&gt; (Causal hash -&gt; Causal hash -&gt; Bool)
-&gt; (Causal hash -&gt; Causal hash -&gt; Bool)
-&gt; (Causal hash -&gt; Causal hash -&gt; Bool)
-&gt; (Causal hash -&gt; Causal hash -&gt; Causal hash)
-&gt; (Causal hash -&gt; Causal hash -&gt; Causal hash)
-&gt; Ord (Causal hash)
Causal hash -&gt; Causal hash -&gt; Bool
Causal hash -&gt; Causal hash -&gt; Ordering
Causal hash -&gt; Causal hash -&gt; Causal hash
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall hash. Ord hash =&gt; Eq (Causal hash)
forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Ordering
forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Causal hash
$ccompare :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Ordering
compare :: Causal hash -&gt; Causal hash -&gt; Ordering
$c&lt; :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
&lt; :: Causal hash -&gt; Causal hash -&gt; Bool
$c&lt;= :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
&lt;= :: Causal hash -&gt; Causal hash -&gt; Bool
$c&gt; :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
&gt; :: Causal hash -&gt; Causal hash -&gt; Bool
$c&gt;= :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
&gt;= :: Causal hash -&gt; Causal hash -&gt; Bool
$cmax :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Causal hash
max :: Causal hash -&gt; Causal hash -&gt; Causal hash
$cmin :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Causal hash
min :: Causal hash -&gt; Causal hash -&gt; Causal hash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679390128"><span id="local-6989586621679390134"><span id="local-6989586621679390137"><span class="annot"><span class="annottext">Int -&gt; Causal hash -&gt; ShowS
[Causal hash] -&gt; ShowS
Causal hash -&gt; String
(Int -&gt; Causal hash -&gt; ShowS)
-&gt; (Causal hash -&gt; String)
-&gt; ([Causal hash] -&gt; ShowS)
-&gt; Show (Causal hash)
forall hash. Show hash =&gt; Int -&gt; Causal hash -&gt; ShowS
forall hash. Show hash =&gt; [Causal hash] -&gt; ShowS
forall hash. Show hash =&gt; Causal hash -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall hash. Show hash =&gt; Int -&gt; Causal hash -&gt; ShowS
showsPrec :: Int -&gt; Causal hash -&gt; ShowS
$cshow :: forall hash. Show hash =&gt; Causal hash -&gt; String
show :: Causal hash -&gt; String
$cshowList :: forall hash. Show hash =&gt; [Causal hash] -&gt; ShowS
showList :: [Causal hash] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-455"></span><span>
</span><span id="line-456"></span><span id="local-6989586621679387873"><span id="local-6989586621679387874"><span id="local-6989586621679387875"><span class="annot"><a href="Unison.Sync.Types.html#causalHashes_"><span class="hs-identifier hs-type">causalHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679387873"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679387874"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387875"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387873"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387874"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387875"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387873"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387874"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-457"></span><span id="causalHashes_"><span class="annot"><span class="annottext">causalHashes_ :: forall (m :: * -&gt; *) hash' hash.
(Applicative m, Ord hash') =&gt;
(hash -&gt; m hash') -&gt; Causal hash -&gt; m (Causal hash')
</span><a href="Unison.Sync.Types.html#causalHashes_"><span class="hs-identifier hs-var hs-var">causalHashes_</span></a></span></span><span> </span><span id="local-6989586621679390146"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679390146"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679390147"><span id="local-6989586621679390148"><span class="annot"><span class="annottext">hash
Set hash
$sel:namespaceHash:Causal :: forall hash. Causal hash -&gt; hash
$sel:parents:Causal :: forall hash. Causal hash -&gt; Set hash
namespaceHash :: hash
parents :: Set hash
</span><a href="Unison.Sync.Types.html#%24sel%3AnamespaceHash%3ACausal"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-458"></span><span>  </span><span id="local-6989586621679390149"><span class="annot"><span class="annottext">hash'
</span><a href="#local-6989586621679390149"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679390146"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679390147"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span>
</span><span id="line-459"></span><span>  </span><span id="local-6989586621679390150"><span class="annot"><span class="annottext">Set hash'
</span><a href="#local-6989586621679390150"><span class="hs-identifier hs-var">parents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash') -&gt; Set hash -&gt; m (Set hash')
forall (f :: * -&gt; *) b a.
(Applicative f, Ord b) =&gt;
(a -&gt; f b) -&gt; Set a -&gt; f (Set b)
</span><span class="hs-identifier hs-var">Set.traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679390146"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679390148"><span class="hs-identifier hs-var">parents</span></a></span><span>
</span><span id="line-460"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash'
Set hash'
$sel:namespaceHash:Causal :: hash'
$sel:parents:Causal :: Set hash'
namespaceHash :: hash'
parents :: Set hash'
</span><a href="Unison.Sync.Types.html#%24sel%3AnamespaceHash%3ACausal"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-461"></span><span>
</span><span id="line-462"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679387808"><span id="local-6989586621679390155"><span id="local-6989586621679390158"><span id="local-6989586621679390161"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387808"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387808"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-463"></span><span>  </span><span id="local-6989586621679390172"><span class="annot"><span class="annottext">toJSON :: Causal hash -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span id="local-6989586621679390173"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679390173"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span> </span><span id="local-6989586621679390174"><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679390174"><span class="hs-identifier hs-var">parents</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-464"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-465"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;namespace_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; hash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679390173"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-466"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parents&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Set hash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679390174"><span class="hs-identifier hs-var">parents</span></a></span><span>
</span><span id="line-467"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-468"></span><span>
</span><span id="line-469"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679387832"><span id="local-6989586621679390179"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387832"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679387832"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387832"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-470"></span><span>  </span><span id="local-6989586621679390188"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Causal hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (Causal hash))
-&gt; Value
-&gt; Parser (Causal hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Causal&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679390189"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390189"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-471"></span><span>    </span><span id="local-6989586621679390190"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679390190"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390189"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser hash
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;namespace_hash&quot;</span></span><span>
</span><span id="line-472"></span><span>    </span><span id="local-6989586621679390191"><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679390191"><span class="hs-identifier hs-var">parents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390189"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (Set hash)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parents&quot;</span></span><span>
</span><span id="line-473"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash
Set hash
$sel:namespaceHash:Causal :: hash
$sel:parents:Causal :: Set hash
namespaceHash :: hash
parents :: Set hash
</span><a href="Unison.Sync.Types.html#%24sel%3AnamespaceHash%3ACausal"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-474"></span><span>
</span><span id="line-475"></span><span class="hs-keyword">data</span><span> </span><span id="EntityType"><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-var">EntityType</span></a></span></span><span>
</span><span id="line-476"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TermComponentType"><span class="annot"><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span></span><span>
</span><span id="line-477"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DeclComponentType"><span class="annot"><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span></span><span>
</span><span id="line-478"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PatchType"><span class="annot"><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span></span><span>
</span><span id="line-479"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PatchDiffType"><span class="annot"><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span></span><span>
</span><span id="line-480"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NamespaceType"><span class="annot"><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span></span><span>
</span><span id="line-481"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NamespaceDiffType"><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span></span><span>
</span><span id="line-482"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CausalType"><span class="annot"><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span></span><span>
</span><span id="line-483"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679390193"><span id="local-6989586621679390195"><span class="annot"><span class="annottext">EntityType -&gt; EntityType -&gt; Bool
(EntityType -&gt; EntityType -&gt; Bool)
-&gt; (EntityType -&gt; EntityType -&gt; Bool) -&gt; Eq EntityType
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: EntityType -&gt; EntityType -&gt; Bool
== :: EntityType -&gt; EntityType -&gt; Bool
$c/= :: EntityType -&gt; EntityType -&gt; Bool
/= :: EntityType -&gt; EntityType -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679390201"><span id="local-6989586621679390203"><span id="local-6989586621679390205"><span id="local-6989586621679390209"><span id="local-6989586621679390212"><span id="local-6989586621679390215"><span id="local-6989586621679390218"><span class="annot"><span class="annottext">Eq EntityType
Eq EntityType =&gt;
(EntityType -&gt; EntityType -&gt; Ordering)
-&gt; (EntityType -&gt; EntityType -&gt; Bool)
-&gt; (EntityType -&gt; EntityType -&gt; Bool)
-&gt; (EntityType -&gt; EntityType -&gt; Bool)
-&gt; (EntityType -&gt; EntityType -&gt; Bool)
-&gt; (EntityType -&gt; EntityType -&gt; EntityType)
-&gt; (EntityType -&gt; EntityType -&gt; EntityType)
-&gt; Ord EntityType
EntityType -&gt; EntityType -&gt; Bool
EntityType -&gt; EntityType -&gt; Ordering
EntityType -&gt; EntityType -&gt; EntityType
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: EntityType -&gt; EntityType -&gt; Ordering
compare :: EntityType -&gt; EntityType -&gt; Ordering
$c&lt; :: EntityType -&gt; EntityType -&gt; Bool
&lt; :: EntityType -&gt; EntityType -&gt; Bool
$c&lt;= :: EntityType -&gt; EntityType -&gt; Bool
&lt;= :: EntityType -&gt; EntityType -&gt; Bool
$c&gt; :: EntityType -&gt; EntityType -&gt; Bool
&gt; :: EntityType -&gt; EntityType -&gt; Bool
$c&gt;= :: EntityType -&gt; EntityType -&gt; Bool
&gt;= :: EntityType -&gt; EntityType -&gt; Bool
$cmax :: EntityType -&gt; EntityType -&gt; EntityType
max :: EntityType -&gt; EntityType -&gt; EntityType
$cmin :: EntityType -&gt; EntityType -&gt; EntityType
min :: EntityType -&gt; EntityType -&gt; EntityType
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679390221"><span id="local-6989586621679390223"><span id="local-6989586621679390227"><span class="annot"><span class="annottext">Int -&gt; EntityType -&gt; ShowS
[EntityType] -&gt; ShowS
EntityType -&gt; String
(Int -&gt; EntityType -&gt; ShowS)
-&gt; (EntityType -&gt; String)
-&gt; ([EntityType] -&gt; ShowS)
-&gt; Show EntityType
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; EntityType -&gt; ShowS
showsPrec :: Int -&gt; EntityType -&gt; ShowS
$cshow :: EntityType -&gt; String
show :: EntityType -&gt; String
$cshowList :: [EntityType] -&gt; ShowS
showList :: [EntityType] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-484"></span><span>
</span><span id="line-485"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679390231"><span id="local-6989586621679390234"><span id="local-6989586621679390237"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-type">EntityType</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-486"></span><span>  </span><span id="local-6989586621679390247"><span class="annot"><span class="annottext">toJSON :: EntityType -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-487"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value) -&gt; (EntityType -&gt; Text) -&gt; EntityType -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-488"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;term_component&quot;</span></span><span>
</span><span id="line-489"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;decl_component&quot;</span></span><span>
</span><span id="line-490"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch&quot;</span></span><span>
</span><span id="line-491"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch_diff&quot;</span></span><span>
</span><span id="line-492"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace&quot;</span></span><span>
</span><span id="line-493"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace_diff&quot;</span></span><span>
</span><span id="line-494"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;causal&quot;</span></span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679390250"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-type">EntityType</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-497"></span><span>  </span><span id="local-6989586621679390277"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser EntityType
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Text -&gt; Parser EntityType) -&gt; Value -&gt; Parser EntityType
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;EntityType&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-498"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;term_component&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Parser EntityType
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span><span>
</span><span id="line-499"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;decl_component&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Parser EntityType
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span><span>
</span><span id="line-500"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Parser EntityType
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span><span>
</span><span id="line-501"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch_diff&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Parser EntityType
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span><span>
</span><span id="line-502"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Parser EntityType
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span><span>
</span><span id="line-503"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace_diff&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Parser EntityType
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span><span>
</span><span id="line-504"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;causal&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Parser EntityType
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span><span>
</span><span id="line-505"></span><span>    </span><span id="local-6989586621679390278"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390278"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Parser EntityType
forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Parser EntityType) -&gt; Text -&gt; Parser EntityType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected entity type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390278"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-506"></span><span>
</span><span id="line-507"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-508"></span><span class="hs-comment">-- Request/response types</span><span>
</span><span id="line-509"></span><span>
</span><span id="line-510"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-511"></span><span class="hs-comment">-- Get causal hash by path</span><span>
</span><span id="line-512"></span><span>
</span><span id="line-513"></span><span class="hs-keyword">newtype</span><span> </span><span id="GetCausalHashByPathRequest"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-var">GetCausalHashByPathRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="GetCausalHashByPathRequest"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-var">GetCausalHashByPathRequest</span></a></span></span><span>
</span><span id="line-514"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Apath%3AGetCausalHashByPathRequest"><span class="annot"><span class="annottext">GetCausalHashByPathRequest -&gt; Path
</span><a href="Unison.Sync.Types.html#%24sel%3Apath%3AGetCausalHashByPathRequest"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-515"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-516"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679390283"><span id="local-6989586621679390287"><span id="local-6989586621679390291"><span class="annot"><span class="annottext">Int -&gt; GetCausalHashByPathRequest -&gt; ShowS
[GetCausalHashByPathRequest] -&gt; ShowS
GetCausalHashByPathRequest -&gt; String
(Int -&gt; GetCausalHashByPathRequest -&gt; ShowS)
-&gt; (GetCausalHashByPathRequest -&gt; String)
-&gt; ([GetCausalHashByPathRequest] -&gt; ShowS)
-&gt; Show GetCausalHashByPathRequest
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; GetCausalHashByPathRequest -&gt; ShowS
showsPrec :: Int -&gt; GetCausalHashByPathRequest -&gt; ShowS
$cshow :: GetCausalHashByPathRequest -&gt; String
show :: GetCausalHashByPathRequest -&gt; String
$cshowList :: [GetCausalHashByPathRequest] -&gt; ShowS
showList :: [GetCausalHashByPathRequest] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679390294"><span id="local-6989586621679390297"><span class="annot"><span class="annottext">GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
(GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool)
-&gt; (GetCausalHashByPathRequest
    -&gt; GetCausalHashByPathRequest -&gt; Bool)
-&gt; Eq GetCausalHashByPathRequest
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
== :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c/= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
/= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679390303"><span id="local-6989586621679390306"><span id="local-6989586621679390309"><span id="local-6989586621679390313"><span id="local-6989586621679390316"><span id="local-6989586621679390319"><span id="local-6989586621679390322"><span class="annot"><span class="annottext">Eq GetCausalHashByPathRequest
Eq GetCausalHashByPathRequest =&gt;
(GetCausalHashByPathRequest
 -&gt; GetCausalHashByPathRequest -&gt; Ordering)
-&gt; (GetCausalHashByPathRequest
    -&gt; GetCausalHashByPathRequest -&gt; Bool)
-&gt; (GetCausalHashByPathRequest
    -&gt; GetCausalHashByPathRequest -&gt; Bool)
-&gt; (GetCausalHashByPathRequest
    -&gt; GetCausalHashByPathRequest -&gt; Bool)
-&gt; (GetCausalHashByPathRequest
    -&gt; GetCausalHashByPathRequest -&gt; Bool)
-&gt; (GetCausalHashByPathRequest
    -&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest)
-&gt; (GetCausalHashByPathRequest
    -&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest)
-&gt; Ord GetCausalHashByPathRequest
GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; Ordering
GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; Ordering
compare :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; Ordering
$c&lt; :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
&lt; :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c&lt;= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
&lt;= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c&gt; :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
&gt; :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c&gt;= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
&gt;= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$cmax :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
max :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
$cmin :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
min :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679390326"><span id="local-6989586621679390330"><span id="local-6989586621679390333"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-type">GetCausalHashByPathRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-519"></span><span>  </span><span id="local-6989586621679390340"><span class="annot"><span class="annottext">toJSON :: GetCausalHashByPathRequest -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-type">GetCausalHashByPathRequest</span></a></span><span> </span><span id="local-6989586621679390341"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679390341"><span class="hs-identifier hs-var">path</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-520"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-521"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Path -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679390341"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-522"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-523"></span><span>
</span><span id="line-524"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679390344"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-type">GetCausalHashByPathRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-525"></span><span>  </span><span id="local-6989586621679390350"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser GetCausalHashByPathRequest
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser GetCausalHashByPathRequest)
-&gt; Value
-&gt; Parser GetCausalHashByPathRequest
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GetCausalHashByPathRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679390351"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390351"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-526"></span><span>    </span><span id="local-6989586621679390352"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679390352"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390351"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Path
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-527"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-type">GetCausalHashByPathRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Path
$sel:path:GetCausalHashByPathRequest :: Path
path :: Path
</span><a href="Unison.Sync.Types.html#%24sel%3Apath%3AGetCausalHashByPathRequest"><span class="hs-glyph hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-528"></span><span>
</span><span id="line-529"></span><span class="hs-keyword">data</span><span> </span><span id="GetCausalHashByPathResponse"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathResponse"><span class="hs-identifier hs-var">GetCausalHashByPathResponse</span></a></span></span><span>
</span><span id="line-530"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="GetCausalHashByPathSuccess"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathSuccess"><span class="hs-identifier hs-var">GetCausalHashByPathSuccess</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashJWT</span></span><span class="hs-special">)</span><span>
</span><span id="line-531"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GetCausalHashByPathNoReadPermission"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathNoReadPermission"><span class="hs-identifier hs-var">GetCausalHashByPathNoReadPermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-532"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GetCausalHashByPathUserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathUserNotFound"><span class="hs-identifier hs-var">GetCausalHashByPathUserNotFound</span></a></span></span><span>
</span><span id="line-533"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GetCausalHashByPathInvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathInvalidRepoInfo"><span class="hs-identifier hs-var">GetCausalHashByPathInvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-534"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679390358"><span id="local-6989586621679390369"><span id="local-6989586621679390373"><span class="annot"><span class="annottext">Int -&gt; GetCausalHashByPathResponse -&gt; ShowS
[GetCausalHashByPathResponse] -&gt; ShowS
GetCausalHashByPathResponse -&gt; String
(Int -&gt; GetCausalHashByPathResponse -&gt; ShowS)
-&gt; (GetCausalHashByPathResponse -&gt; String)
-&gt; ([GetCausalHashByPathResponse] -&gt; ShowS)
-&gt; Show GetCausalHashByPathResponse
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; GetCausalHashByPathResponse -&gt; ShowS
showsPrec :: Int -&gt; GetCausalHashByPathResponse -&gt; ShowS
$cshow :: GetCausalHashByPathResponse -&gt; String
show :: GetCausalHashByPathResponse -&gt; String
$cshowList :: [GetCausalHashByPathResponse] -&gt; ShowS
showList :: [GetCausalHashByPathResponse] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679390377"><span id="local-6989586621679390385"><span class="annot"><span class="annottext">GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
(GetCausalHashByPathResponse
 -&gt; GetCausalHashByPathResponse -&gt; Bool)
-&gt; (GetCausalHashByPathResponse
    -&gt; GetCausalHashByPathResponse -&gt; Bool)
-&gt; Eq GetCausalHashByPathResponse
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
== :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c/= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
/= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679390392"><span id="local-6989586621679390400"><span id="local-6989586621679390404"><span id="local-6989586621679390407"><span id="local-6989586621679390410"><span id="local-6989586621679390413"><span id="local-6989586621679390416"><span class="annot"><span class="annottext">Eq GetCausalHashByPathResponse
Eq GetCausalHashByPathResponse =&gt;
(GetCausalHashByPathResponse
 -&gt; GetCausalHashByPathResponse -&gt; Ordering)
-&gt; (GetCausalHashByPathResponse
    -&gt; GetCausalHashByPathResponse -&gt; Bool)
-&gt; (GetCausalHashByPathResponse
    -&gt; GetCausalHashByPathResponse -&gt; Bool)
-&gt; (GetCausalHashByPathResponse
    -&gt; GetCausalHashByPathResponse -&gt; Bool)
-&gt; (GetCausalHashByPathResponse
    -&gt; GetCausalHashByPathResponse -&gt; Bool)
-&gt; (GetCausalHashByPathResponse
    -&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse)
-&gt; (GetCausalHashByPathResponse
    -&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse)
-&gt; Ord GetCausalHashByPathResponse
GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; Ordering
GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; Ordering
compare :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; Ordering
$c&lt; :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
&lt; :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c&lt;= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
&lt;= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c&gt; :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
&gt; :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c&gt;= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
&gt;= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$cmax :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
max :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
$cmin :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
min :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-535"></span><span>
</span><span id="line-536"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679390421"><span id="local-6989586621679390425"><span id="local-6989586621679390428"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathResponse"><span class="hs-identifier hs-type">GetCausalHashByPathResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-537"></span><span>  </span><span id="local-6989586621679390444"><span class="annot"><span class="annottext">toJSON :: GetCausalHashByPathResponse -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-538"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathSuccess"><span class="hs-identifier hs-type">GetCausalHashByPathSuccess</span></a></span><span> </span><span id="local-6989586621679390445"><span class="annot"><span class="annottext">Maybe HashJWT
</span><a href="#local-6989586621679390445"><span class="hs-identifier hs-var">hashJWT</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe HashJWT -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe HashJWT
</span><a href="#local-6989586621679390445"><span class="hs-identifier hs-var">hashJWT</span></a></span><span>
</span><span id="line-539"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathNoReadPermission"><span class="hs-identifier hs-type">GetCausalHashByPathNoReadPermission</span></a></span><span> </span><span id="local-6989586621679390447"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679390447"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Path -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_read_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679390447"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-540"></span><span>    </span><span class="annot"><span class="annottext">GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathUserNotFound"><span class="hs-identifier hs-var">GetCausalHashByPathUserNotFound</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; () -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-541"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathInvalidRepoInfo"><span class="hs-identifier hs-type">GetCausalHashByPathInvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679390448"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390448"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679390449"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679390449"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; (Text, RepoInfo) -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390448"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679390449"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-542"></span><span>
</span><span id="line-543"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679390452"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathResponse"><span class="hs-identifier hs-type">GetCausalHashByPathResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-544"></span><span>  </span><span id="local-6989586621679390484"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser GetCausalHashByPathResponse
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser GetCausalHashByPathResponse)
-&gt; Value
-&gt; Parser GetCausalHashByPathResponse
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GetCausalHashByPathResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679390485"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390485"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-545"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390485"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value
-&gt; (Value -&gt; Parser GetCausalHashByPathResponse)
-&gt; Parser GetCausalHashByPathResponse
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser GetCausalHashByPathResponse)
-&gt; Value
-&gt; Parser GetCausalHashByPathResponse
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-546"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe HashJWT -&gt; GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathSuccess"><span class="hs-identifier hs-var">GetCausalHashByPathSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe HashJWT -&gt; GetCausalHashByPathResponse)
-&gt; Parser (Maybe HashJWT) -&gt; Parser GetCausalHashByPathResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390485"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (Maybe HashJWT)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-547"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_read_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Path -&gt; GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathNoReadPermission"><span class="hs-identifier hs-var">GetCausalHashByPathNoReadPermission</span></a></span><span> </span><span class="annot"><span class="annottext">(Path -&gt; GetCausalHashByPathResponse)
-&gt; Parser Path -&gt; Parser GetCausalHashByPathResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390485"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Path
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-548"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GetCausalHashByPathResponse -&gt; Parser GetCausalHashByPathResponse
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathUserNotFound"><span class="hs-identifier hs-var">GetCausalHashByPathUserNotFound</span></a></span><span>
</span><span id="line-549"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; RepoInfo -&gt; GetCausalHashByPathResponse)
-&gt; (Text, RepoInfo) -&gt; GetCausalHashByPathResponse
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathInvalidRepoInfo"><span class="hs-identifier hs-var">GetCausalHashByPathInvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">((Text, RepoInfo) -&gt; GetCausalHashByPathResponse)
-&gt; Parser (Text, RepoInfo) -&gt; Parser GetCausalHashByPathResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390485"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (Text, RepoInfo)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-550"></span><span>      </span><span id="local-6989586621679390487"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390487"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Parser GetCausalHashByPathResponse
forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Parser GetCausalHashByPathResponse)
-&gt; Text -&gt; Parser GetCausalHashByPathResponse
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected GetCausalHashByPathResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390487"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-551"></span><span>
</span><span id="line-552"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-553"></span><span class="hs-comment">-- Download entities</span><span>
</span><span id="line-554"></span><span>
</span><span id="line-555"></span><span class="hs-keyword">data</span><span> </span><span id="DownloadEntitiesRequest"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-var">DownloadEntitiesRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DownloadEntitiesRequest"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-var">DownloadEntitiesRequest</span></a></span></span><span>
</span><span id="line-556"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3ArepoInfo%3ADownloadEntitiesRequest"><span class="annot"><span class="annottext">DownloadEntitiesRequest -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#%24sel%3ArepoInfo%3ADownloadEntitiesRequest"><span class="hs-identifier hs-var hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-557"></span><span>    </span><span id="%24sel%3Ahashes%3ADownloadEntitiesRequest"><span class="annot"><span class="annottext">DownloadEntitiesRequest -&gt; NESet HashJWT
</span><a href="Unison.Sync.Types.html#%24sel%3Ahashes%3ADownloadEntitiesRequest"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NESet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashJWT</span></span><span>
</span><span id="line-558"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-559"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679390492"><span id="local-6989586621679390499"><span id="local-6989586621679390503"><span class="annot"><span class="annottext">Int -&gt; DownloadEntitiesRequest -&gt; ShowS
[DownloadEntitiesRequest] -&gt; ShowS
DownloadEntitiesRequest -&gt; String
(Int -&gt; DownloadEntitiesRequest -&gt; ShowS)
-&gt; (DownloadEntitiesRequest -&gt; String)
-&gt; ([DownloadEntitiesRequest] -&gt; ShowS)
-&gt; Show DownloadEntitiesRequest
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; DownloadEntitiesRequest -&gt; ShowS
showsPrec :: Int -&gt; DownloadEntitiesRequest -&gt; ShowS
$cshow :: DownloadEntitiesRequest -&gt; String
show :: DownloadEntitiesRequest -&gt; String
$cshowList :: [DownloadEntitiesRequest] -&gt; ShowS
showList :: [DownloadEntitiesRequest] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679390506"><span id="local-6989586621679390512"><span class="annot"><span class="annottext">DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
(DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool)
-&gt; (DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool)
-&gt; Eq DownloadEntitiesRequest
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
== :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c/= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
/= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679390518"><span id="local-6989586621679390524"><span id="local-6989586621679390529"><span id="local-6989586621679390533"><span id="local-6989586621679390536"><span id="local-6989586621679390539"><span id="local-6989586621679390542"><span class="annot"><span class="annottext">Eq DownloadEntitiesRequest
Eq DownloadEntitiesRequest =&gt;
(DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Ordering)
-&gt; (DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool)
-&gt; (DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool)
-&gt; (DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool)
-&gt; (DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool)
-&gt; (DownloadEntitiesRequest
    -&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest)
-&gt; (DownloadEntitiesRequest
    -&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest)
-&gt; Ord DownloadEntitiesRequest
DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Ordering
DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Ordering
compare :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Ordering
$c&lt; :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
&lt; :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c&lt;= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
&lt;= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c&gt; :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
&gt; :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c&gt;= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
&gt;= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$cmax :: DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
max :: DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
$cmin :: DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
min :: DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-560"></span><span>
</span><span id="line-561"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679390546"><span id="local-6989586621679390550"><span id="local-6989586621679390553"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-type">DownloadEntitiesRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-562"></span><span>  </span><span id="local-6989586621679390565"><span class="annot"><span class="annottext">toJSON :: DownloadEntitiesRequest -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-type">DownloadEntitiesRequest</span></a></span><span> </span><span id="local-6989586621679390566"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679390566"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span id="local-6989586621679390567"><span class="annot"><span class="annottext">NESet HashJWT
</span><a href="#local-6989586621679390567"><span class="hs-identifier hs-var">hashes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-563"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-564"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; RepoInfo -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679390566"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-565"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hashes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; NESet HashJWT -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NESet HashJWT
</span><a href="#local-6989586621679390567"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-566"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-567"></span><span>
</span><span id="line-568"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679390570"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-type">DownloadEntitiesRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-569"></span><span>  </span><span id="local-6989586621679390590"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser DownloadEntitiesRequest
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser DownloadEntitiesRequest)
-&gt; Value
-&gt; Parser DownloadEntitiesRequest
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DownloadEntitiesRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679390591"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390591"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-570"></span><span>    </span><span id="local-6989586621679390592"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679390592"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-571"></span><span>      </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390591"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser RepoInfo
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser RepoInfo -&gt; Parser RepoInfo -&gt; Parser RepoInfo
forall a. Parser a -&gt; Parser a -&gt; Parser a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-572"></span><span>        </span><span class="hs-comment">-- Back-compat by converting old 'repo_name' fields into the new 'repo_info' format.</span><span>
</span><span id="line-573"></span><span>        </span><span id="local-6989586621679390594"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390594"><span class="hs-identifier hs-var">repoName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390591"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_name&quot;</span></span><span>
</span><span id="line-574"></span><span>        </span><span class="annot"><span class="annottext">RepoInfo -&gt; Parser RepoInfo
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(RepoInfo -&gt; Parser RepoInfo)
-&gt; (Text -&gt; RepoInfo) -&gt; Text -&gt; Parser RepoInfo
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Parser RepoInfo) -&gt; Text -&gt; Parser RepoInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390594"><span class="hs-identifier hs-var">repoName</span></a></span><span>
</span><span id="line-575"></span><span>    </span><span id="local-6989586621679390595"><span class="annot"><span class="annottext">NESet HashJWT
</span><a href="#local-6989586621679390595"><span class="hs-identifier hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390591"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (NESet HashJWT)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hashes&quot;</span></span><span>
</span><span id="line-576"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-type">DownloadEntitiesRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">NESet HashJWT
RepoInfo
$sel:repoInfo:DownloadEntitiesRequest :: RepoInfo
$sel:hashes:DownloadEntitiesRequest :: NESet HashJWT
repoInfo :: RepoInfo
hashes :: NESet HashJWT
</span><a href="Unison.Sync.Types.html#%24sel%3ArepoInfo%3ADownloadEntitiesRequest"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-577"></span><span>
</span><span id="line-578"></span><span class="hs-keyword">data</span><span> </span><span id="DownloadEntitiesResponse"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesResponse"><span class="hs-identifier hs-var">DownloadEntitiesResponse</span></a></span></span><span>
</span><span id="line-579"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DownloadEntitiesSuccess"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesSuccess"><span class="hs-identifier hs-var">DownloadEntitiesSuccess</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NEMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashJWT</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-580"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DownloadEntitiesFailure"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesError"><span class="hs-identifier hs-type">DownloadEntitiesError</span></a></span><span>
</span><span id="line-581"></span><span>
</span><span id="line-582"></span><span class="hs-keyword">data</span><span> </span><span id="DownloadEntitiesError"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesError"><span class="hs-identifier hs-var">DownloadEntitiesError</span></a></span></span><span>
</span><span id="line-583"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DownloadEntitiesNoReadPermission"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesNoReadPermission"><span class="hs-identifier hs-var">DownloadEntitiesNoReadPermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-584"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | msg, repoInfo</span></span><span>
</span><span id="line-585"></span><span>    </span><span id="DownloadEntitiesInvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesInvalidRepoInfo"><span class="hs-identifier hs-var">DownloadEntitiesInvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-586"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | userHandle</span></span><span>
</span><span id="line-587"></span><span>    </span><span id="DownloadEntitiesUserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesUserNotFound"><span class="hs-identifier hs-var">DownloadEntitiesUserNotFound</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-588"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | project shorthand</span></span><span>
</span><span id="line-589"></span><span>    </span><span id="DownloadEntitiesProjectNotFound"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesProjectNotFound"><span class="hs-identifier hs-var">DownloadEntitiesProjectNotFound</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-590"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DownloadEntitiesEntityValidationFailure"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesEntityValidationFailure"><span class="hs-identifier hs-var">DownloadEntitiesEntityValidationFailure</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityValidationError"><span class="hs-identifier hs-type">EntityValidationError</span></a></span><span>
</span><span id="line-591"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679390604"><span id="local-6989586621679390613"><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
(DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool)
-&gt; (DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool)
-&gt; Eq DownloadEntitiesError
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
== :: DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
$c/= :: DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
/= :: DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679390617"><span id="local-6989586621679390631"><span id="local-6989586621679390635"><span class="annot"><span class="annottext">Int -&gt; DownloadEntitiesError -&gt; ShowS
[DownloadEntitiesError] -&gt; ShowS
DownloadEntitiesError -&gt; String
(Int -&gt; DownloadEntitiesError -&gt; ShowS)
-&gt; (DownloadEntitiesError -&gt; String)
-&gt; ([DownloadEntitiesError] -&gt; ShowS)
-&gt; Show DownloadEntitiesError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; DownloadEntitiesError -&gt; ShowS
showsPrec :: Int -&gt; DownloadEntitiesError -&gt; ShowS
$cshow :: DownloadEntitiesError -&gt; String
show :: DownloadEntitiesError -&gt; String
$cshowList :: [DownloadEntitiesError] -&gt; ShowS
showList :: [DownloadEntitiesError] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-592"></span><span>
</span><span id="line-593"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679390639"><span id="local-6989586621679390643"><span id="local-6989586621679390646"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesResponse"><span class="hs-identifier hs-type">DownloadEntitiesResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-594"></span><span>  </span><span id="local-6989586621679390669"><span class="annot"><span class="annottext">toJSON :: DownloadEntitiesResponse -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-595"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesSuccess"><span class="hs-identifier hs-type">DownloadEntitiesSuccess</span></a></span><span> </span><span id="local-6989586621679390670"><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 HashJWT)
</span><a href="#local-6989586621679390670"><span class="hs-identifier hs-var">entities</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; NEMap Hash32 (Entity Text Hash32 HashJWT) -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 HashJWT)
</span><a href="#local-6989586621679390670"><span class="hs-identifier hs-var">entities</span></a></span><span>
</span><span id="line-596"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesNoReadPermission"><span class="hs-identifier hs-type">DownloadEntitiesNoReadPermission</span></a></span><span> </span><span id="local-6989586621679390671"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679390671"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_read_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679390671"><span class="hs-identifier hs-var">repoInfo</span></a></span><span>
</span><span id="line-597"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesInvalidRepoInfo"><span class="hs-identifier hs-type">DownloadEntitiesInvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679390672"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390672"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679390673"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679390673"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; (Text, RepoInfo) -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390672"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679390673"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-598"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesUserNotFound"><span class="hs-identifier hs-type">DownloadEntitiesUserNotFound</span></a></span><span> </span><span id="local-6989586621679390674"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390674"><span class="hs-identifier hs-var">userHandle</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390674"><span class="hs-identifier hs-var">userHandle</span></a></span><span>
</span><span id="line-599"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesProjectNotFound"><span class="hs-identifier hs-type">DownloadEntitiesProjectNotFound</span></a></span><span> </span><span id="local-6989586621679390675"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390675"><span class="hs-identifier hs-var">projectShorthand</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;project_not_found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390675"><span class="hs-identifier hs-var">projectShorthand</span></a></span><span>
</span><span id="line-600"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesEntityValidationFailure"><span class="hs-identifier hs-type">DownloadEntitiesEntityValidationFailure</span></a></span><span> </span><span id="local-6989586621679390676"><span class="annot"><span class="annottext">EntityValidationError
</span><a href="#local-6989586621679390676"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; EntityValidationError -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;entity_validation_failure&quot;</span></span><span> </span><span class="annot"><span class="annottext">EntityValidationError
</span><a href="#local-6989586621679390676"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-601"></span><span>
</span><span id="line-602"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679390679"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesResponse"><span class="hs-identifier hs-type">DownloadEntitiesResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-603"></span><span>  </span><span id="local-6989586621679390724"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser DownloadEntitiesResponse
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser DownloadEntitiesResponse)
-&gt; Value
-&gt; Parser DownloadEntitiesResponse
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DownloadEntitiesResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679390725"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390725"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-604"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390725"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value
-&gt; (Value -&gt; Parser DownloadEntitiesResponse)
-&gt; Parser DownloadEntitiesResponse
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser DownloadEntitiesResponse)
-&gt; Value
-&gt; Parser DownloadEntitiesResponse
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-605"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 HashJWT)
-&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesSuccess"><span class="hs-identifier hs-var">DownloadEntitiesSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">(NEMap Hash32 (Entity Text Hash32 HashJWT)
 -&gt; DownloadEntitiesResponse)
-&gt; Parser (NEMap Hash32 (Entity Text Hash32 HashJWT))
-&gt; Parser DownloadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390725"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (NEMap Hash32 (Entity Text Hash32 HashJWT))
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-606"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_read_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(DownloadEntitiesError -&gt; DownloadEntitiesResponse)
-&gt; (RepoInfo -&gt; DownloadEntitiesError)
-&gt; RepoInfo
-&gt; DownloadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo -&gt; DownloadEntitiesError
</span><a href="Unison.Sync.Types.html#DownloadEntitiesNoReadPermission"><span class="hs-identifier hs-var">DownloadEntitiesNoReadPermission</span></a></span><span> </span><span class="annot"><span class="annottext">(RepoInfo -&gt; DownloadEntitiesResponse)
-&gt; Parser RepoInfo -&gt; Parser DownloadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390725"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser RepoInfo
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-607"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(DownloadEntitiesError -&gt; DownloadEntitiesResponse)
-&gt; ((Text, RepoInfo) -&gt; DownloadEntitiesError)
-&gt; (Text, RepoInfo)
-&gt; DownloadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; RepoInfo -&gt; DownloadEntitiesError)
-&gt; (Text, RepoInfo) -&gt; DownloadEntitiesError
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; DownloadEntitiesError
</span><a href="Unison.Sync.Types.html#DownloadEntitiesInvalidRepoInfo"><span class="hs-identifier hs-var">DownloadEntitiesInvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">((Text, RepoInfo) -&gt; DownloadEntitiesResponse)
-&gt; Parser (Text, RepoInfo) -&gt; Parser DownloadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390725"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (Text, RepoInfo)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-608"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(DownloadEntitiesError -&gt; DownloadEntitiesResponse)
-&gt; (Text -&gt; DownloadEntitiesError)
-&gt; Text
-&gt; DownloadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; DownloadEntitiesError
</span><a href="Unison.Sync.Types.html#DownloadEntitiesUserNotFound"><span class="hs-identifier hs-var">DownloadEntitiesUserNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; DownloadEntitiesResponse)
-&gt; Parser Text -&gt; Parser DownloadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390725"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-609"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;project_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(DownloadEntitiesError -&gt; DownloadEntitiesResponse)
-&gt; (Text -&gt; DownloadEntitiesError)
-&gt; Text
-&gt; DownloadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; DownloadEntitiesError
</span><a href="Unison.Sync.Types.html#DownloadEntitiesProjectNotFound"><span class="hs-identifier hs-var">DownloadEntitiesProjectNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; DownloadEntitiesResponse)
-&gt; Parser Text -&gt; Parser DownloadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390725"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-610"></span><span>      </span><span id="local-6989586621679390726"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390726"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Parser DownloadEntitiesResponse
forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Parser DownloadEntitiesResponse)
-&gt; Text -&gt; Parser DownloadEntitiesResponse
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected DownloadEntitiesResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390726"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-611"></span><span>
</span><span id="line-612"></span><span class="annot"><span class="hs-comment">-- | The ways in which validating an entity may fail.</span></span><span>
</span><span id="line-613"></span><span class="hs-keyword">data</span><span> </span><span id="EntityValidationError"><span class="annot"><a href="Unison.Sync.Types.html#EntityValidationError"><span class="hs-identifier hs-var">EntityValidationError</span></a></span></span><span>
</span><span id="line-614"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="EntityHashMismatch"><span class="annot"><a href="Unison.Sync.Types.html#EntityHashMismatch"><span class="hs-identifier hs-var">EntityHashMismatch</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-type">EntityType</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span><span>
</span><span id="line-615"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UnsupportedEntityType"><span class="annot"><a href="Unison.Sync.Types.html#UnsupportedEntityType"><span class="hs-identifier hs-var">UnsupportedEntityType</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-type">EntityType</span></a></span><span>
</span><span id="line-616"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="InvalidByteEncoding"><span class="annot"><a href="Unison.Sync.Types.html#InvalidByteEncoding"><span class="hs-identifier hs-var">InvalidByteEncoding</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-type">EntityType</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-comment">{- decoding err msg -}</span><span>
</span><span id="line-617"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HashResolutionFailure"><span class="annot"><a href="Unison.Sync.Types.html#HashResolutionFailure"><span class="hs-identifier hs-var">HashResolutionFailure</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span>
</span><span id="line-618"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679390732"><span id="local-6989586621679390748"><span id="local-6989586621679390751"><span class="annot"><span class="annottext">Int -&gt; EntityValidationError -&gt; ShowS
[EntityValidationError] -&gt; ShowS
EntityValidationError -&gt; String
(Int -&gt; EntityValidationError -&gt; ShowS)
-&gt; (EntityValidationError -&gt; String)
-&gt; ([EntityValidationError] -&gt; ShowS)
-&gt; Show EntityValidationError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; EntityValidationError -&gt; ShowS
showsPrec :: Int -&gt; EntityValidationError -&gt; ShowS
$cshow :: EntityValidationError -&gt; String
show :: EntityValidationError -&gt; String
$cshowList :: [EntityValidationError] -&gt; ShowS
showList :: [EntityValidationError] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679390754"><span id="local-6989586621679390766"><span class="annot"><span class="annottext">EntityValidationError -&gt; EntityValidationError -&gt; Bool
(EntityValidationError -&gt; EntityValidationError -&gt; Bool)
-&gt; (EntityValidationError -&gt; EntityValidationError -&gt; Bool)
-&gt; Eq EntityValidationError
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: EntityValidationError -&gt; EntityValidationError -&gt; Bool
== :: EntityValidationError -&gt; EntityValidationError -&gt; Bool
$c/= :: EntityValidationError -&gt; EntityValidationError -&gt; Bool
/= :: EntityValidationError -&gt; EntityValidationError -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679390771"><span id="local-6989586621679390782"><span id="local-6989586621679390786"><span id="local-6989586621679390789"><span id="local-6989586621679390792"><span id="local-6989586621679390795"><span id="local-6989586621679390798"><span class="annot"><span class="annottext">Eq EntityValidationError
Eq EntityValidationError =&gt;
(EntityValidationError -&gt; EntityValidationError -&gt; Ordering)
-&gt; (EntityValidationError -&gt; EntityValidationError -&gt; Bool)
-&gt; (EntityValidationError -&gt; EntityValidationError -&gt; Bool)
-&gt; (EntityValidationError -&gt; EntityValidationError -&gt; Bool)
-&gt; (EntityValidationError -&gt; EntityValidationError -&gt; Bool)
-&gt; (EntityValidationError
    -&gt; EntityValidationError -&gt; EntityValidationError)
-&gt; (EntityValidationError
    -&gt; EntityValidationError -&gt; EntityValidationError)
-&gt; Ord EntityValidationError
EntityValidationError -&gt; EntityValidationError -&gt; Bool
EntityValidationError -&gt; EntityValidationError -&gt; Ordering
EntityValidationError
-&gt; EntityValidationError -&gt; EntityValidationError
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: EntityValidationError -&gt; EntityValidationError -&gt; Ordering
compare :: EntityValidationError -&gt; EntityValidationError -&gt; Ordering
$c&lt; :: EntityValidationError -&gt; EntityValidationError -&gt; Bool
&lt; :: EntityValidationError -&gt; EntityValidationError -&gt; Bool
$c&lt;= :: EntityValidationError -&gt; EntityValidationError -&gt; Bool
&lt;= :: EntityValidationError -&gt; EntityValidationError -&gt; Bool
$c&gt; :: EntityValidationError -&gt; EntityValidationError -&gt; Bool
&gt; :: EntityValidationError -&gt; EntityValidationError -&gt; Bool
$c&gt;= :: EntityValidationError -&gt; EntityValidationError -&gt; Bool
&gt;= :: EntityValidationError -&gt; EntityValidationError -&gt; Bool
$cmax :: EntityValidationError
-&gt; EntityValidationError -&gt; EntityValidationError
max :: EntityValidationError
-&gt; EntityValidationError -&gt; EntityValidationError
$cmin :: EntityValidationError
-&gt; EntityValidationError -&gt; EntityValidationError
min :: EntityValidationError
-&gt; EntityValidationError -&gt; EntityValidationError
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-619"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679390805"><span id="local-6989586621679390809"><span id="local-6989586621679390812"><span class="annot"><span class="annottext">Show EntityValidationError
Typeable EntityValidationError
(Typeable EntityValidationError, Show EntityValidationError) =&gt;
(EntityValidationError -&gt; SomeException)
-&gt; (SomeException -&gt; Maybe EntityValidationError)
-&gt; (EntityValidationError -&gt; String)
-&gt; Exception EntityValidationError
SomeException -&gt; Maybe EntityValidationError
EntityValidationError -&gt; String
EntityValidationError -&gt; SomeException
forall e.
(Typeable e, Show e) =&gt;
(e -&gt; SomeException)
-&gt; (SomeException -&gt; Maybe e) -&gt; (e -&gt; String) -&gt; Exception e
$ctoException :: EntityValidationError -&gt; SomeException
toException :: EntityValidationError -&gt; SomeException
$cfromException :: SomeException -&gt; Maybe EntityValidationError
fromException :: SomeException -&gt; Maybe EntityValidationError
$cdisplayException :: EntityValidationError -&gt; String
displayException :: EntityValidationError -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Exception</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-620"></span><span>
</span><span id="line-621"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679390817"><span id="local-6989586621679390820"><span id="local-6989586621679390823"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityValidationError"><span class="hs-identifier hs-type">EntityValidationError</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-622"></span><span>  </span><span id="local-6989586621679390857"><span class="annot"><span class="annottext">toJSON :: EntityValidationError -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-623"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#EntityHashMismatch"><span class="hs-identifier hs-type">EntityHashMismatch</span></a></span><span> </span><span id="local-6989586621679390858"><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679390858"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span id="local-6989586621679390859"><span class="annot"><span class="annottext">HashMismatchForEntity
</span><a href="#local-6989586621679390859"><span class="hs-identifier hs-var">mismatch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;mismatched_hash&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; EntityType -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679390858"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;mismatch&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; HashMismatchForEntity -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">HashMismatchForEntity
</span><a href="#local-6989586621679390859"><span class="hs-identifier hs-var">mismatch</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-624"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UnsupportedEntityType"><span class="hs-identifier hs-type">UnsupportedEntityType</span></a></span><span> </span><span id="local-6989586621679390860"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679390860"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span id="local-6989586621679390861"><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679390861"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;unsupported_entity_type&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Hash32 -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679390860"><span class="hs-identifier hs-var">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; EntityType -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679390861"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-625"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#InvalidByteEncoding"><span class="hs-identifier hs-type">InvalidByteEncoding</span></a></span><span> </span><span id="local-6989586621679390862"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679390862"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span id="local-6989586621679390863"><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679390863"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span id="local-6989586621679390864"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390864"><span class="hs-identifier hs-var">errMsg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_byte_encoding&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Hash32 -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679390862"><span class="hs-identifier hs-var">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; EntityType -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679390863"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;error&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390864"><span class="hs-identifier hs-var">errMsg</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-626"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#HashResolutionFailure"><span class="hs-identifier hs-type">HashResolutionFailure</span></a></span><span> </span><span id="local-6989586621679390865"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679390865"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Hash32 -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_resolution_failure&quot;</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679390865"><span class="hs-identifier hs-var">hash</span></a></span><span>
</span><span id="line-627"></span><span>
</span><span id="line-628"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679390868"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityValidationError"><span class="hs-identifier hs-type">EntityValidationError</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-629"></span><span>  </span><span id="local-6989586621679390927"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser EntityValidationError
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser EntityValidationError)
-&gt; Value
-&gt; Parser EntityValidationError
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;EntityValidationError&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679390928"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390928"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-630"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390928"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value
-&gt; (Value -&gt; Parser EntityValidationError)
-&gt; Parser EntityValidationError
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser EntityValidationError)
-&gt; Value
-&gt; Parser EntityValidationError
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-631"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;mismatched_hash&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-632"></span><span>        </span><span id="local-6989586621679390929"><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679390929"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390928"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Object
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Object -&gt; (Object -&gt; Parser EntityType) -&gt; Parser EntityType
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser EntityType
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-633"></span><span>        </span><span id="local-6989586621679390930"><span class="annot"><span class="annottext">HashMismatchForEntity
</span><a href="#local-6989586621679390930"><span class="hs-identifier hs-var">mismatch</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390928"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Object
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Object
-&gt; (Object -&gt; Parser HashMismatchForEntity)
-&gt; Parser HashMismatchForEntity
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser HashMismatchForEntity
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;mismatch&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-634"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityType -&gt; HashMismatchForEntity -&gt; EntityValidationError
</span><a href="Unison.Sync.Types.html#EntityHashMismatch"><span class="hs-identifier hs-var">EntityHashMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679390929"><span class="hs-identifier hs-var">typ</span></a></span><span> </span><span class="annot"><span class="annottext">HashMismatchForEntity
</span><a href="#local-6989586621679390930"><span class="hs-identifier hs-var">mismatch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-635"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;unsupported_entity_type&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-636"></span><span>        </span><span id="local-6989586621679390931"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679390931"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390928"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Object
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Object -&gt; (Object -&gt; Parser Hash32) -&gt; Parser Hash32
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Hash32
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hash&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-637"></span><span>        </span><span id="local-6989586621679390932"><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679390932"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390928"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Object
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Object -&gt; (Object -&gt; Parser EntityType) -&gt; Parser EntityType
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser EntityType
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-638"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hash32 -&gt; EntityType -&gt; EntityValidationError
</span><a href="Unison.Sync.Types.html#UnsupportedEntityType"><span class="hs-identifier hs-var">UnsupportedEntityType</span></a></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679390931"><span class="hs-identifier hs-var">hash</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679390932"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-639"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_byte_encoding&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-640"></span><span>        </span><span id="local-6989586621679390933"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679390933"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390928"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Object
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Object -&gt; (Object -&gt; Parser Hash32) -&gt; Parser Hash32
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Hash32
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hash&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-641"></span><span>        </span><span id="local-6989586621679390934"><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679390934"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390928"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Object
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Object -&gt; (Object -&gt; Parser EntityType) -&gt; Parser EntityType
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser EntityType
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-642"></span><span>        </span><span id="local-6989586621679390935"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390935"><span class="hs-identifier hs-var">errMsg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679390928"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Object
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Object -&gt; (Object -&gt; Parser Text) -&gt; Parser Text
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;error&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-643"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hash32 -&gt; EntityType -&gt; Text -&gt; EntityValidationError
</span><a href="Unison.Sync.Types.html#InvalidByteEncoding"><span class="hs-identifier hs-var">InvalidByteEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679390933"><span class="hs-identifier hs-var">hash</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679390934"><span class="hs-identifier hs-var">typ</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390935"><span class="hs-identifier hs-var">errMsg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-644"></span><span>      </span><span id="local-6989586621679390936"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390936"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Parser EntityValidationError
forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Parser EntityValidationError)
-&gt; Text -&gt; Parser EntityValidationError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected EntityValidationError type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679390936"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-645"></span><span>
</span><span id="line-646"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-647"></span><span class="hs-comment">-- Upload entities</span><span>
</span><span id="line-648"></span><span>
</span><span id="line-649"></span><span class="hs-keyword">data</span><span> </span><span id="UploadEntitiesRequest"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-var">UploadEntitiesRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UploadEntitiesRequest"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-var">UploadEntitiesRequest</span></a></span></span><span>
</span><span id="line-650"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3ArepoInfo%3AUploadEntitiesRequest"><span class="annot"><span class="annottext">UploadEntitiesRequest -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#%24sel%3ArepoInfo%3AUploadEntitiesRequest"><span class="hs-identifier hs-var hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-651"></span><span>    </span><span id="%24sel%3Aentities%3AUploadEntitiesRequest"><span class="annot"><span class="annottext">UploadEntitiesRequest -&gt; NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="Unison.Sync.Types.html#%24sel%3Aentities%3AUploadEntitiesRequest"><span class="hs-identifier hs-var hs-var">entities</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NEMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-652"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-653"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679390941"><span id="local-6989586621679390949"><span id="local-6989586621679390953"><span class="annot"><span class="annottext">Int -&gt; UploadEntitiesRequest -&gt; ShowS
[UploadEntitiesRequest] -&gt; ShowS
UploadEntitiesRequest -&gt; String
(Int -&gt; UploadEntitiesRequest -&gt; ShowS)
-&gt; (UploadEntitiesRequest -&gt; String)
-&gt; ([UploadEntitiesRequest] -&gt; ShowS)
-&gt; Show UploadEntitiesRequest
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; UploadEntitiesRequest -&gt; ShowS
showsPrec :: Int -&gt; UploadEntitiesRequest -&gt; ShowS
$cshow :: UploadEntitiesRequest -&gt; String
show :: UploadEntitiesRequest -&gt; String
$cshowList :: [UploadEntitiesRequest] -&gt; ShowS
showList :: [UploadEntitiesRequest] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679390957"><span id="local-6989586621679390964"><span class="annot"><span class="annottext">UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
(UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool)
-&gt; (UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool)
-&gt; Eq UploadEntitiesRequest
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
== :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c/= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
/= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679390971"><span id="local-6989586621679390978"><span id="local-6989586621679390984"><span id="local-6989586621679390988"><span id="local-6989586621679390991"><span id="local-6989586621679390994"><span id="local-6989586621679390997"><span class="annot"><span class="annottext">Eq UploadEntitiesRequest
Eq UploadEntitiesRequest =&gt;
(UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Ordering)
-&gt; (UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool)
-&gt; (UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool)
-&gt; (UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool)
-&gt; (UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool)
-&gt; (UploadEntitiesRequest
    -&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest)
-&gt; (UploadEntitiesRequest
    -&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest)
-&gt; Ord UploadEntitiesRequest
UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Ordering
UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Ordering
compare :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Ordering
$c&lt; :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
&lt; :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c&lt;= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
&lt;= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c&gt; :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
&gt; :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c&gt;= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
&gt;= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$cmax :: UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
max :: UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
$cmin :: UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
min :: UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-654"></span><span>
</span><span id="line-655"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679391003"><span id="local-6989586621679391007"><span id="local-6989586621679391010"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-type">UploadEntitiesRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-656"></span><span>  </span><span id="local-6989586621679391025"><span class="annot"><span class="annottext">toJSON :: UploadEntitiesRequest -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-type">UploadEntitiesRequest</span></a></span><span> </span><span id="local-6989586621679391026"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679391026"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span id="local-6989586621679391027"><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="#local-6989586621679391027"><span class="hs-identifier hs-var">entities</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-657"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-658"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; RepoInfo -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679391026"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-659"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;entities&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; NEMap Hash32 (Entity Text Hash32 Hash32) -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="#local-6989586621679391027"><span class="hs-identifier hs-var">entities</span></a></span><span>
</span><span id="line-660"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-661"></span><span>
</span><span id="line-662"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679391030"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-type">UploadEntitiesRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-663"></span><span>  </span><span id="local-6989586621679391051"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser UploadEntitiesRequest
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser UploadEntitiesRequest)
-&gt; Value
-&gt; Parser UploadEntitiesRequest
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UploadEntitiesRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679391052"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391052"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-664"></span><span>    </span><span id="local-6989586621679391053"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679391053"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-665"></span><span>      </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391052"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser RepoInfo
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser RepoInfo -&gt; Parser RepoInfo -&gt; Parser RepoInfo
forall a. Parser a -&gt; Parser a -&gt; Parser a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-666"></span><span>        </span><span class="hs-comment">-- Back-compat by converting old 'repo_name' fields into the new 'repo_info' format.</span><span>
</span><span id="line-667"></span><span>        </span><span id="local-6989586621679391054"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679391054"><span class="hs-identifier hs-var">repoName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391052"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_name&quot;</span></span><span>
</span><span id="line-668"></span><span>        </span><span class="annot"><span class="annottext">RepoInfo -&gt; Parser RepoInfo
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(RepoInfo -&gt; Parser RepoInfo)
-&gt; (Text -&gt; RepoInfo) -&gt; Text -&gt; Parser RepoInfo
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Parser RepoInfo) -&gt; Text -&gt; Parser RepoInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679391054"><span class="hs-identifier hs-var">repoName</span></a></span><span>
</span><span id="line-669"></span><span>    </span><span id="local-6989586621679391055"><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="#local-6989586621679391055"><span class="hs-identifier hs-var">entities</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391052"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (NEMap Hash32 (Entity Text Hash32 Hash32))
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;entities&quot;</span></span><span>
</span><span id="line-670"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-type">UploadEntitiesRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 Hash32)
RepoInfo
$sel:repoInfo:UploadEntitiesRequest :: RepoInfo
$sel:entities:UploadEntitiesRequest :: NEMap Hash32 (Entity Text Hash32 Hash32)
repoInfo :: RepoInfo
entities :: NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="Unison.Sync.Types.html#%24sel%3ArepoInfo%3AUploadEntitiesRequest"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-671"></span><span>
</span><span id="line-672"></span><span class="hs-keyword">data</span><span> </span><span id="UploadEntitiesResponse"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesResponse"><span class="hs-identifier hs-var">UploadEntitiesResponse</span></a></span></span><span>
</span><span id="line-673"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UploadEntitiesSuccess"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesSuccess"><span class="hs-identifier hs-var">UploadEntitiesSuccess</span></a></span></span><span>
</span><span id="line-674"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UploadEntitiesFailure"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError"><span class="hs-identifier hs-type">UploadEntitiesError</span></a></span><span>
</span><span id="line-675"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679391059"><span id="local-6989586621679391064"><span id="local-6989586621679391068"><span class="annot"><span class="annottext">Int -&gt; UploadEntitiesResponse -&gt; ShowS
[UploadEntitiesResponse] -&gt; ShowS
UploadEntitiesResponse -&gt; String
(Int -&gt; UploadEntitiesResponse -&gt; ShowS)
-&gt; (UploadEntitiesResponse -&gt; String)
-&gt; ([UploadEntitiesResponse] -&gt; ShowS)
-&gt; Show UploadEntitiesResponse
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; UploadEntitiesResponse -&gt; ShowS
showsPrec :: Int -&gt; UploadEntitiesResponse -&gt; ShowS
$cshow :: UploadEntitiesResponse -&gt; String
show :: UploadEntitiesResponse -&gt; String
$cshowList :: [UploadEntitiesResponse] -&gt; ShowS
showList :: [UploadEntitiesResponse] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679391071"><span id="local-6989586621679391075"><span class="annot"><span class="annottext">UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
(UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool)
-&gt; (UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool)
-&gt; Eq UploadEntitiesResponse
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
== :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c/= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
/= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679391081"><span id="local-6989586621679391085"><span id="local-6989586621679391088"><span id="local-6989586621679391092"><span id="local-6989586621679391095"><span id="local-6989586621679391098"><span id="local-6989586621679391101"><span class="annot"><span class="annottext">Eq UploadEntitiesResponse
Eq UploadEntitiesResponse =&gt;
(UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Ordering)
-&gt; (UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool)
-&gt; (UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool)
-&gt; (UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool)
-&gt; (UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool)
-&gt; (UploadEntitiesResponse
    -&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse)
-&gt; (UploadEntitiesResponse
    -&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse)
-&gt; Ord UploadEntitiesResponse
UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Ordering
UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Ordering
compare :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Ordering
$c&lt; :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
&lt; :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c&lt;= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
&lt;= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c&gt; :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
&gt; :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c&gt;= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
&gt;= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$cmax :: UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
max :: UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
$cmin :: UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
min :: UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-676"></span><span>
</span><span id="line-677"></span><span class="hs-keyword">data</span><span> </span><span id="UploadEntitiesError"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError"><span class="hs-identifier hs-var">UploadEntitiesError</span></a></span></span><span>
</span><span id="line-678"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UploadEntitiesError%27EntityValidationFailure"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27EntityValidationFailure"><span class="hs-identifier hs-var">UploadEntitiesError'EntityValidationFailure</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityValidationError"><span class="hs-identifier hs-type">EntityValidationError</span></a></span><span>
</span><span id="line-679"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UploadEntitiesError%27HashMismatchForEntity"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27HashMismatchForEntity"><span class="hs-identifier hs-var">UploadEntitiesError'HashMismatchForEntity</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span><span>
</span><span id="line-680"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | msg, repoInfo</span></span><span>
</span><span id="line-681"></span><span>    </span><span id="UploadEntitiesError%27InvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27InvalidRepoInfo"><span class="hs-identifier hs-var">UploadEntitiesError'InvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-682"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UploadEntitiesError%27NeedDependencies"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27NeedDependencies"><span class="hs-identifier hs-var">UploadEntitiesError'NeedDependencies</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-683"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UploadEntitiesError%27NoWritePermission"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27NoWritePermission"><span class="hs-identifier hs-var">UploadEntitiesError'NoWritePermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-684"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | project shorthand</span></span><span>
</span><span id="line-685"></span><span>    </span><span id="UploadEntitiesError%27ProjectNotFound"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27ProjectNotFound"><span class="hs-identifier hs-var">UploadEntitiesError'ProjectNotFound</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-686"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | userHandle</span></span><span>
</span><span id="line-687"></span><span>    </span><span id="UploadEntitiesError%27UserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27UserNotFound"><span class="hs-identifier hs-var">UploadEntitiesError'UserNotFound</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-688"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679391111"><span id="local-6989586621679391130"><span id="local-6989586621679391133"><span class="annot"><span class="annottext">Int -&gt; UploadEntitiesError -&gt; ShowS
[UploadEntitiesError] -&gt; ShowS
UploadEntitiesError -&gt; String
(Int -&gt; UploadEntitiesError -&gt; ShowS)
-&gt; (UploadEntitiesError -&gt; String)
-&gt; ([UploadEntitiesError] -&gt; ShowS)
-&gt; Show UploadEntitiesError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; UploadEntitiesError -&gt; ShowS
showsPrec :: Int -&gt; UploadEntitiesError -&gt; ShowS
$cshow :: UploadEntitiesError -&gt; String
show :: UploadEntitiesError -&gt; String
$cshowList :: [UploadEntitiesError] -&gt; ShowS
showList :: [UploadEntitiesError] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679391136"><span id="local-6989586621679391148"><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
(UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool)
-&gt; (UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool)
-&gt; Eq UploadEntitiesError
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
== :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c/= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
/= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679391153"><span id="local-6989586621679391165"><span id="local-6989586621679391168"><span id="local-6989586621679391171"><span id="local-6989586621679391174"><span id="local-6989586621679391177"><span id="local-6989586621679391180"><span class="annot"><span class="annottext">Eq UploadEntitiesError
Eq UploadEntitiesError =&gt;
(UploadEntitiesError -&gt; UploadEntitiesError -&gt; Ordering)
-&gt; (UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool)
-&gt; (UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool)
-&gt; (UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool)
-&gt; (UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool)
-&gt; (UploadEntitiesError
    -&gt; UploadEntitiesError -&gt; UploadEntitiesError)
-&gt; (UploadEntitiesError
    -&gt; UploadEntitiesError -&gt; UploadEntitiesError)
-&gt; Ord UploadEntitiesError
UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
UploadEntitiesError -&gt; UploadEntitiesError -&gt; Ordering
UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Ordering
compare :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Ordering
$c&lt; :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
&lt; :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c&lt;= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
&lt;= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c&gt; :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
&gt; :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c&gt;= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
&gt;= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$cmax :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
max :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
$cmin :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
min :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-689"></span><span>
</span><span id="line-690"></span><span class="hs-keyword">data</span><span> </span><span id="HashMismatchForEntity"><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-var">HashMismatchForEntity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HashMismatchForEntity"><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-var">HashMismatchForEntity</span></a></span></span><span>
</span><span id="line-691"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Asupplied%3AHashMismatchForEntity"><span class="annot"><span class="annottext">HashMismatchForEntity -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Asupplied%3AHashMismatchForEntity"><span class="hs-identifier hs-var hs-var">supplied</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span>
</span><span id="line-692"></span><span>    </span><span id="%24sel%3Acomputed%3AHashMismatchForEntity"><span class="annot"><span class="annottext">HashMismatchForEntity -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Acomputed%3AHashMismatchForEntity"><span class="hs-identifier hs-var hs-var">computed</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span>
</span><span id="line-693"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-694"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679391186"><span id="local-6989586621679391191"><span id="local-6989586621679391194"><span class="annot"><span class="annottext">Int -&gt; HashMismatchForEntity -&gt; ShowS
[HashMismatchForEntity] -&gt; ShowS
HashMismatchForEntity -&gt; String
(Int -&gt; HashMismatchForEntity -&gt; ShowS)
-&gt; (HashMismatchForEntity -&gt; String)
-&gt; ([HashMismatchForEntity] -&gt; ShowS)
-&gt; Show HashMismatchForEntity
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; HashMismatchForEntity -&gt; ShowS
showsPrec :: Int -&gt; HashMismatchForEntity -&gt; ShowS
$cshow :: HashMismatchForEntity -&gt; String
show :: HashMismatchForEntity -&gt; String
$cshowList :: [HashMismatchForEntity] -&gt; ShowS
showList :: [HashMismatchForEntity] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679391197"><span id="local-6989586621679391201"><span class="annot"><span class="annottext">HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
(HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool)
-&gt; (HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool)
-&gt; Eq HashMismatchForEntity
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
== :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c/= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
/= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679391206"><span id="local-6989586621679391210"><span id="local-6989586621679391214"><span id="local-6989586621679391217"><span id="local-6989586621679391220"><span id="local-6989586621679391223"><span id="local-6989586621679391226"><span class="annot"><span class="annottext">Eq HashMismatchForEntity
Eq HashMismatchForEntity =&gt;
(HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Ordering)
-&gt; (HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool)
-&gt; (HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool)
-&gt; (HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool)
-&gt; (HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool)
-&gt; (HashMismatchForEntity
    -&gt; HashMismatchForEntity -&gt; HashMismatchForEntity)
-&gt; (HashMismatchForEntity
    -&gt; HashMismatchForEntity -&gt; HashMismatchForEntity)
-&gt; Ord HashMismatchForEntity
HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Ordering
HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Ordering
compare :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Ordering
$c&lt; :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
&lt; :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c&lt;= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
&lt;= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c&gt; :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
&gt; :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c&gt;= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
&gt;= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$cmax :: HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
max :: HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
$cmin :: HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
min :: HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-695"></span><span>
</span><span id="line-696"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679391230"><span id="local-6989586621679391234"><span id="local-6989586621679391237"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesResponse"><span class="hs-identifier hs-type">UploadEntitiesResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-697"></span><span>  </span><span id="local-6989586621679391261"><span class="annot"><span class="annottext">toJSON :: UploadEntitiesResponse -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-698"></span><span>    </span><span class="annot"><span class="annottext">UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesSuccess"><span class="hs-identifier hs-var">UploadEntitiesSuccess</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">Object
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-699"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27EntityValidationFailure"><span class="hs-identifier hs-type">UploadEntitiesError'EntityValidationFailure</span></a></span><span> </span><span id="local-6989586621679391263"><span class="annot"><span class="annottext">EntityValidationError
</span><a href="#local-6989586621679391263"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-700"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; EntityValidationError -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;entity_validation_failure&quot;</span></span><span> </span><span class="annot"><span class="annottext">EntityValidationError
</span><a href="#local-6989586621679391263"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-701"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27HashMismatchForEntity"><span class="hs-identifier hs-type">UploadEntitiesError'HashMismatchForEntity</span></a></span><span> </span><span id="local-6989586621679391264"><span class="annot"><span class="annottext">HashMismatchForEntity
</span><a href="#local-6989586621679391264"><span class="hs-identifier hs-var">mismatch</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-702"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; HashMismatchForEntity -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_mismatch_for_entity&quot;</span></span><span> </span><span class="annot"><span class="annottext">HashMismatchForEntity
</span><a href="#local-6989586621679391264"><span class="hs-identifier hs-var">mismatch</span></a></span><span>
</span><span id="line-703"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27InvalidRepoInfo"><span class="hs-identifier hs-type">UploadEntitiesError'InvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679391265"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679391265"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679391266"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679391266"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-704"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; (Text, RepoInfo) -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679391265"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679391266"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-705"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27NeedDependencies"><span class="hs-identifier hs-type">UploadEntitiesError'NeedDependencies</span></a></span><span> </span><span id="local-6989586621679391267"><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679391267"><span class="hs-identifier hs-var">nd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; NeedDependencies Hash32 -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;need_dependencies&quot;</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679391267"><span class="hs-identifier hs-var">nd</span></a></span><span>
</span><span id="line-706"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27NoWritePermission"><span class="hs-identifier hs-type">UploadEntitiesError'NoWritePermission</span></a></span><span> </span><span id="local-6989586621679391268"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679391268"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679391268"><span class="hs-identifier hs-var">repoInfo</span></a></span><span>
</span><span id="line-707"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27ProjectNotFound"><span class="hs-identifier hs-type">UploadEntitiesError'ProjectNotFound</span></a></span><span> </span><span id="local-6989586621679391269"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679391269"><span class="hs-identifier hs-var">projectShorthand</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-708"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;project_not_found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679391269"><span class="hs-identifier hs-var">projectShorthand</span></a></span><span>
</span><span id="line-709"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27UserNotFound"><span class="hs-identifier hs-type">UploadEntitiesError'UserNotFound</span></a></span><span> </span><span id="local-6989586621679391270"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679391270"><span class="hs-identifier hs-var">userHandle</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679391270"><span class="hs-identifier hs-var">userHandle</span></a></span><span>
</span><span id="line-710"></span><span>
</span><span id="line-711"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679391273"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesResponse"><span class="hs-identifier hs-type">UploadEntitiesResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-712"></span><span>  </span><span id="local-6989586621679391325"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser UploadEntitiesResponse
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser UploadEntitiesResponse)
-&gt; Value
-&gt; Parser UploadEntitiesResponse
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UploadEntitiesResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679391326"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391326"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-713"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391326"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value
-&gt; (Value -&gt; Parser UploadEntitiesResponse)
-&gt; Parser UploadEntitiesResponse
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser UploadEntitiesResponse)
-&gt; Value
-&gt; Parser UploadEntitiesResponse
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-714"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesResponse -&gt; Parser UploadEntitiesResponse
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesSuccess"><span class="hs-identifier hs-var">UploadEntitiesSuccess</span></a></span><span>
</span><span id="line-715"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;entity_validation_failure&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(UploadEntitiesError -&gt; UploadEntitiesResponse)
-&gt; (EntityValidationError -&gt; UploadEntitiesError)
-&gt; EntityValidationError
-&gt; UploadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">EntityValidationError -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27EntityValidationFailure"><span class="hs-identifier hs-var">UploadEntitiesError'EntityValidationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(EntityValidationError -&gt; UploadEntitiesResponse)
-&gt; Parser EntityValidationError -&gt; Parser UploadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391326"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser EntityValidationError
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-716"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;need_dependencies&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(UploadEntitiesError -&gt; UploadEntitiesResponse)
-&gt; (NeedDependencies Hash32 -&gt; UploadEntitiesError)
-&gt; NeedDependencies Hash32
-&gt; UploadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32 -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27NeedDependencies"><span class="hs-identifier hs-var">UploadEntitiesError'NeedDependencies</span></a></span><span> </span><span class="annot"><span class="annottext">(NeedDependencies Hash32 -&gt; UploadEntitiesResponse)
-&gt; Parser (NeedDependencies Hash32)
-&gt; Parser UploadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391326"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (NeedDependencies Hash32)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-717"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(UploadEntitiesError -&gt; UploadEntitiesResponse)
-&gt; (RepoInfo -&gt; UploadEntitiesError)
-&gt; RepoInfo
-&gt; UploadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27NoWritePermission"><span class="hs-identifier hs-var">UploadEntitiesError'NoWritePermission</span></a></span><span> </span><span class="annot"><span class="annottext">(RepoInfo -&gt; UploadEntitiesResponse)
-&gt; Parser RepoInfo -&gt; Parser UploadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391326"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser RepoInfo
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-718"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_mismatch_for_entity&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-719"></span><span>        </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(UploadEntitiesError -&gt; UploadEntitiesResponse)
-&gt; (HashMismatchForEntity -&gt; UploadEntitiesError)
-&gt; HashMismatchForEntity
-&gt; UploadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashMismatchForEntity -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27HashMismatchForEntity"><span class="hs-identifier hs-var">UploadEntitiesError'HashMismatchForEntity</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMismatchForEntity -&gt; UploadEntitiesResponse)
-&gt; Parser HashMismatchForEntity -&gt; Parser UploadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391326"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser HashMismatchForEntity
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-720"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-721"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679391327"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679391327"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679391328"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679391328"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391326"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (Text, RepoInfo)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-722"></span><span>        </span><span class="annot"><span class="annottext">UploadEntitiesResponse -&gt; Parser UploadEntitiesResponse
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27InvalidRepoInfo"><span class="hs-identifier hs-var">UploadEntitiesError'InvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679391327"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679391328"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-723"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(UploadEntitiesError -&gt; UploadEntitiesResponse)
-&gt; (Text -&gt; UploadEntitiesError) -&gt; Text -&gt; UploadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27UserNotFound"><span class="hs-identifier hs-var">UploadEntitiesError'UserNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; UploadEntitiesResponse)
-&gt; Parser Text -&gt; Parser UploadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391326"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-724"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;project_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(UploadEntitiesError -&gt; UploadEntitiesResponse)
-&gt; (Text -&gt; UploadEntitiesError) -&gt; Text -&gt; UploadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27ProjectNotFound"><span class="hs-identifier hs-var">UploadEntitiesError'ProjectNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; UploadEntitiesResponse)
-&gt; Parser Text -&gt; Parser UploadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391326"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-725"></span><span>      </span><span id="local-6989586621679391329"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679391329"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Parser UploadEntitiesResponse
forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Parser UploadEntitiesResponse)
-&gt; Text -&gt; Parser UploadEntitiesResponse
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected UploadEntitiesResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679391329"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-726"></span><span>
</span><span id="line-727"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679391332"><span id="local-6989586621679391335"><span id="local-6989586621679391338"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-728"></span><span>  </span><span id="local-6989586621679391348"><span class="annot"><span class="annottext">toJSON :: HashMismatchForEntity -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span><span> </span><span id="local-6989586621679391349"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679391349"><span class="hs-identifier hs-var">supplied</span></a></span></span><span> </span><span id="local-6989586621679391350"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679391350"><span class="hs-identifier hs-var">computed</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-729"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-730"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;supplied&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Hash32 -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679391349"><span class="hs-identifier hs-var">supplied</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-731"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;computed&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Hash32 -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679391350"><span class="hs-identifier hs-var">computed</span></a></span><span>
</span><span id="line-732"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-733"></span><span>
</span><span id="line-734"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679391353"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-735"></span><span>  </span><span id="local-6989586621679391361"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser HashMismatchForEntity
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-736"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser HashMismatchForEntity)
-&gt; Value
-&gt; Parser HashMismatchForEntity
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HashMismatchForEntity&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679391362"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391362"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-737"></span><span>      </span><span class="annot"><span class="annottext">Hash32 -&gt; Hash32 -&gt; HashMismatchForEntity
</span><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-var">HashMismatchForEntity</span></a></span><span>
</span><span id="line-738"></span><span>        </span><span class="annot"><span class="annottext">(Hash32 -&gt; Hash32 -&gt; HashMismatchForEntity)
-&gt; Parser Hash32 -&gt; Parser (Hash32 -&gt; HashMismatchForEntity)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391362"><span class="hs-identifier hs-var">obj</span></a></span><span>
</span><span id="line-739"></span><span>          </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Hash32
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;supplied&quot;</span></span><span>
</span><span id="line-740"></span><span>        </span><span class="annot"><span class="annottext">Parser (Hash32 -&gt; HashMismatchForEntity)
-&gt; Parser Hash32 -&gt; Parser HashMismatchForEntity
forall a b. Parser (a -&gt; b) -&gt; Parser a -&gt; Parser b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391362"><span class="hs-identifier hs-var">obj</span></a></span><span>
</span><span id="line-741"></span><span>          </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Hash32
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;computed&quot;</span></span><span>
</span><span id="line-742"></span><span>
</span><span id="line-743"></span><span class="hs-keyword">data</span><span> </span><span id="InvalidParentage"><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-var">InvalidParentage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="InvalidParentage"><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-var">InvalidParentage</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3Aparent%3AInvalidParentage"><span class="annot"><span class="annottext">InvalidParentage -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3AInvalidParentage"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span> </span><span id="%24sel%3Achild%3AInvalidParentage"><span class="annot"><span class="annottext">InvalidParentage -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Achild%3AInvalidParentage"><span class="hs-identifier hs-var hs-var">child</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">}</span><span>
</span><span id="line-744"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679391367"><span id="local-6989586621679391372"><span id="local-6989586621679391376"><span class="annot"><span class="annottext">Int -&gt; InvalidParentage -&gt; ShowS
[InvalidParentage] -&gt; ShowS
InvalidParentage -&gt; String
(Int -&gt; InvalidParentage -&gt; ShowS)
-&gt; (InvalidParentage -&gt; String)
-&gt; ([InvalidParentage] -&gt; ShowS)
-&gt; Show InvalidParentage
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; InvalidParentage -&gt; ShowS
showsPrec :: Int -&gt; InvalidParentage -&gt; ShowS
$cshow :: InvalidParentage -&gt; String
show :: InvalidParentage -&gt; String
$cshowList :: [InvalidParentage] -&gt; ShowS
showList :: [InvalidParentage] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-745"></span><span>
</span><span id="line-746"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679391380"><span id="local-6989586621679391384"><span id="local-6989586621679391387"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-type">InvalidParentage</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-747"></span><span>  </span><span id="local-6989586621679391397"><span class="annot"><span class="annottext">toJSON :: InvalidParentage -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-type">InvalidParentage</span></a></span><span> </span><span id="local-6989586621679391398"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679391398"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621679391399"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679391399"><span class="hs-identifier hs-var">child</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Hash32 -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679391398"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Hash32 -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679391399"><span class="hs-identifier hs-var">child</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-748"></span><span>
</span><span id="line-749"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679391402"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-type">InvalidParentage</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-750"></span><span>  </span><span id="local-6989586621679391411"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser InvalidParentage
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-751"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser InvalidParentage)
-&gt; Value
-&gt; Parser InvalidParentage
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;InvalidParentage&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679391412"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391412"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hash32 -&gt; Hash32 -&gt; InvalidParentage
</span><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-var">InvalidParentage</span></a></span><span> </span><span class="annot"><span class="annottext">(Hash32 -&gt; Hash32 -&gt; InvalidParentage)
-&gt; Parser Hash32 -&gt; Parser (Hash32 -&gt; InvalidParentage)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391412"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Hash32
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser (Hash32 -&gt; InvalidParentage)
-&gt; Parser Hash32 -&gt; Parser InvalidParentage
forall a b. Parser (a -&gt; b) -&gt; Parser a -&gt; Parser b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391412"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Hash32
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child&quot;</span></span><span>
</span><span id="line-752"></span><span>
</span><span id="line-753"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-754"></span><span class="hs-comment">-- Common/shared error types</span><span>
</span><span id="line-755"></span><span>
</span><span id="line-756"></span><span class="hs-keyword">data</span><span> </span><span id="NeedDependencies"><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-var">NeedDependencies</span></a></span></span><span> </span><span id="local-6989586621679388311"><span class="annot"><a href="#local-6989586621679388311"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NeedDependencies"><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-var">NeedDependencies</span></a></span></span><span>
</span><span id="line-757"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AmissingDependencies%3ANeedDependencies"><span class="annot"><span class="annottext">forall hash. NeedDependencies hash -&gt; NESet hash
</span><a href="Unison.Sync.Types.html#%24sel%3AmissingDependencies%3ANeedDependencies"><span class="hs-identifier hs-var hs-var">missingDependencies</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NESet</span></span><span> </span><span class="annot"><a href="#local-6989586621679388311"><span class="hs-identifier hs-type">hash</span></a></span><span>
</span><span id="line-758"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-759"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679391417"><span id="local-6989586621679391421"><span id="local-6989586621679391424"><span class="annot"><span class="annottext">Int -&gt; NeedDependencies hash -&gt; ShowS
[NeedDependencies hash] -&gt; ShowS
NeedDependencies hash -&gt; String
(Int -&gt; NeedDependencies hash -&gt; ShowS)
-&gt; (NeedDependencies hash -&gt; String)
-&gt; ([NeedDependencies hash] -&gt; ShowS)
-&gt; Show (NeedDependencies hash)
forall hash. Show hash =&gt; Int -&gt; NeedDependencies hash -&gt; ShowS
forall hash. Show hash =&gt; [NeedDependencies hash] -&gt; ShowS
forall hash. Show hash =&gt; NeedDependencies hash -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall hash. Show hash =&gt; Int -&gt; NeedDependencies hash -&gt; ShowS
showsPrec :: Int -&gt; NeedDependencies hash -&gt; ShowS
$cshow :: forall hash. Show hash =&gt; NeedDependencies hash -&gt; String
show :: NeedDependencies hash -&gt; String
$cshowList :: forall hash. Show hash =&gt; [NeedDependencies hash] -&gt; ShowS
showList :: [NeedDependencies hash] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679391428"><span id="local-6989586621679391431"><span class="annot"><span class="annottext">NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
(NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool)
-&gt; (NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool)
-&gt; Eq (NeedDependencies hash)
forall hash.
Eq hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall hash.
Eq hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
== :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c/= :: forall hash.
Eq hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
/= :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679391438"><span id="local-6989586621679391441"><span id="local-6989586621679391444"><span id="local-6989586621679391447"><span id="local-6989586621679391450"><span id="local-6989586621679391453"><span id="local-6989586621679391456"><span class="annot"><span class="annottext">Eq (NeedDependencies hash)
Eq (NeedDependencies hash) =&gt;
(NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering)
-&gt; (NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool)
-&gt; (NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool)
-&gt; (NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool)
-&gt; (NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool)
-&gt; (NeedDependencies hash
    -&gt; NeedDependencies hash -&gt; NeedDependencies hash)
-&gt; (NeedDependencies hash
    -&gt; NeedDependencies hash -&gt; NeedDependencies hash)
-&gt; Ord (NeedDependencies hash)
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering
NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall hash. Ord hash =&gt; Eq (NeedDependencies hash)
forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering
forall hash.
Ord hash =&gt;
NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
$ccompare :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering
compare :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering
$c&lt; :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
&lt; :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c&lt;= :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
&lt;= :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c&gt; :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
&gt; :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c&gt;= :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
&gt;= :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$cmax :: forall hash.
Ord hash =&gt;
NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
max :: NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
$cmin :: forall hash.
Ord hash =&gt;
NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
min :: NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-760"></span><span>
</span><span id="line-761"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679388307"><span id="local-6989586621679391461"><span id="local-6989586621679391464"><span id="local-6989586621679391467"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679388307"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388307"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-762"></span><span>  </span><span id="local-6989586621679391474"><span class="annot"><span class="annottext">toJSON :: NeedDependencies hash -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span id="local-6989586621679391475"><span class="annot"><span class="annottext">NESet hash
</span><a href="#local-6989586621679391475"><span class="hs-identifier hs-var">missingDependencies</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-763"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; NESet hash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NESet hash
</span><a href="#local-6989586621679391475"><span class="hs-identifier hs-var">missingDependencies</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-764"></span><span>
</span><span id="line-765"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679388309"><span id="local-6989586621679391480"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679388309"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679388309"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388309"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-766"></span><span>  </span><span id="local-6989586621679391485"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (NeedDependencies hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (NeedDependencies hash))
-&gt; Value
-&gt; Parser (NeedDependencies hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NeedDependencies&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679391486"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391486"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-767"></span><span>    </span><span id="local-6989586621679391487"><span class="annot"><span class="annottext">NESet hash
</span><a href="#local-6989586621679391487"><span class="hs-identifier hs-var">missingDependencies</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679391486"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (NESet hash)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span>
</span><span id="line-768"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">NESet hash
$sel:missingDependencies:NeedDependencies :: NESet hash
missingDependencies :: NESet hash
</span><a href="Unison.Sync.Types.html#%24sel%3AmissingDependencies%3ANeedDependencies"><span class="hs-glyph hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-769"></span><span>
</span><span id="line-770"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-771"></span><span class="hs-comment">-- Misc. helpers</span><span>
</span><span id="line-772"></span><span>
</span><span id="line-773"></span><span id="local-6989586621679388251"><span id="local-6989586621679388252"><span class="annot"><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-type">failText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadFail</span></span><span> </span><span class="annot"><a href="#local-6989586621679388251"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679388251"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679388252"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-774"></span><span id="failText"><span class="annot"><span class="annottext">failText :: forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var hs-var">failText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; m a
forall a. String -&gt; m a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m a) -&gt; (Text -&gt; String) -&gt; Text -&gt; m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">Text.unpack</span></span><span>
</span><span id="line-775"></span><span>
</span><span id="line-776"></span><span id="local-6989586621679388261"><span class="annot"><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-type">jsonUnion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679388261"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679388261"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span></span><span>
</span><span id="line-777"></span><span id="jsonUnion"><span class="annot"><span class="annottext">jsonUnion :: forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var hs-var">jsonUnion</span></a></span></span><span> </span><span id="local-6989586621679391500"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679391500"><span class="hs-identifier hs-var">typeName</span></a></span></span><span> </span><span id="local-6989586621679391501"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679391501"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-778"></span><span>  </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span>
</span><span id="line-779"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679391500"><span class="hs-identifier hs-var">typeName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-780"></span><span>      </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; a -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679391501"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-781"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-782"></span></pre></body></html>